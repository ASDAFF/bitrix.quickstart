var objFilter={SESS_INCLUDE_AREAS:0,FIRST_TIME:1,arFilterResponseData:{},arElementsSearch:{},arScale:{},USE_AJAX:1,FILTER_RESET:1,CATALOG_RESET:1,CHANGE_WORKAREA:1,CATALOG_IBLOCK_ID:"",CATALOG_IBLOCK_CODE:"",TRADEOF_IBLOCK_ID:"",TRADEOF_IBLOCK_CODE:"",PATH:"",CURRENT_SECTION_ID:"",CURRENT_SECTION_CODE:"",SECTION_ID:"",QUERY:"",ROOT_PATH:"",BRAND_ROOT:"",nPageSize:"",FASHON_ROOT:"",FASHON_MODE:"",CURRENCY_FORMAT:{},orderRow:"",noGET:1,firstTime:1,changeSlider:0,SEARCH_WHERE:"",showAjaxLoader:function(){var a=$(".page-container").height();var b='<div class="centerbg1" id="preloaderbg" style="display: block;height: '+a+'px"> 		  <div class="centerbg2"> 			<div id="preloader"></div> 		  </div> 		</div>';$(b).prependTo("body")},hideAjaxLoader:function(){$("#preloaderbg").remove()},checkPriceSliderState:function(){if($("#slider-CATALOG_PRICE_1").length){var a=$("#slider-CATALOG_PRICE_1").data("slider").getValue();if((a[0]==0)&&(a[1]==9)){return true}else{return false}}else{return true}},setClearBtnStatus:function(){$(".accordion").each(function(b){if($(this).find(".arFilter.selected").length>0){$(this).find(".my_clear").removeClass("hidden")}else{$(this).find(".my_clear").addClass("hidden")}});if($("#slider-CATALOG_PRICE_1").length){var a=$("#slider-CATALOG_PRICE_1").data("slider").getValue();if(($(".arFilter.selected").length==0)&&(a[0]==0)&&(a[1]==9)){$("#my_clear").addClass("hidden")}else{$("#my_clear").removeClass("hidden")}}else{if($(".arFilter.selected").length==0){$("#my_clear").addClass("hidden")}else{$("#my_clear").removeClass("hidden")}}},setOrder:function(a){objFilter.orderRow=a},getElements:function(k,h){if(k<1){k=1}var f={};var b={};var g="?iNumPage="+k+"&nPageSize="+objFilter.nPageSize+"&orderRow="+objFilter.orderRow;if(objFilter.QUERY!=""){g+="&q="+objFilter.QUERY+"&SEARCH_WHERE="+objFilter.SEARCH_WHERE}var e={};var c=-1;$('.arFilter.selected[data-offer="N"]').each(function(l){var j={};j[$(this).attr("data-key")+""]=$(this).attr("data-value");f[l]=j;g+="&arFilter["+(l++)+"]["+$(this).attr("data-key")+"]="+$(this).attr("data-value")});if(objFilter.changeSlider){var a={};objTools.forEach(objFilter.arScale,function(j,l){a=$("#slider-"+j).data("slider").getValue();g+="&arFilter["+(c--)+"][min"+j+"]="+objFilter.arScale[j].DATA[a[0]];g+="&arFilter["+(c--)+"][max"+j+"]="+objFilter.arScale[j].DATA[a[1]];e={};e["min"+j]=objFilter.arScale[j].DATA[a[0]];f[(c--)]=e;e={};e["max"+j]=objFilter.arScale[j].DATA[a[1]];f[(c--)]=e})}$('.arFilter.selected[data-offer="Y"]').each(function(l){var j={};j[$(this).attr("data-key")+""]=$(this).attr("data-value");b[l]=j;g+="&arOffer["+(l++)+"]["+$(this).attr("data-key")+"]="+$(this).attr("data-value")});if(objFilter.SESS_INCLUDE_AREAS==1){window.location.href="./"+g}else{var d={};$(".arFilter").each(function(j,l){d[j]=$(this).attr("data-value")});$.ajax({type:"POST",url:objFilter.PATH+"/ajax.php",data:{arElementsSearch:objFilter.arElementsSearch,CATALOG_IBLOCK_ID:objFilter.CATALOG_IBLOCK_ID,CATALOG_IBLOCK_CODE:objFilter.CATALOG_IBLOCK_CODE,OFFERS_IBLOCK_ID:objFilter.TRADEOF_IBLOCK_ID,OFFERS_IBLOCK_CODE:objFilter.TRADEOF_IBLOCK_CODE,CUR_SECTION_ID:objFilter.CURRENT_SECTION_ID,CUR_SECTION_CODE:objFilter.CURRENT_SECTION_CODE,nPageSize:objFilter.nPageSize,iNumPage:k,arFilter:f,arOffer:b,arFilterValue:d,FILTER_RESET:objFilter.FILTER_RESET,CATALOG_RESET:objFilter.CATALOG_RESET,BRAND_ROOT:objFilter.BRAND_ROOT,FASHION_ROOT:objFilter.FASHION_ROOT,FASHION_MODE:objFilter.FASHION_MODE,secid:objFilter.SECTION_ID,q:objFilter.QUERY,orderRow:objFilter.orderRow,SEARCH_WHERE:objFilter.SEARCH_WHERE},dataType:"JSON",beforeSend:function(){objFilter.showAjaxLoader()},success:function(n){objFilter.arFilterResponseData=n;if(objFilter.FILTER_RESET==1){if(!objFilter.changeSlider){var j=objFilter.CURRENCY_FORMAT.FORMAT_STRING;var m=objTools.number_format(n.minPrice,objFilter.CURRENCY_FORMAT.DECIMALS,objFilter.CURRENCY_FORMAT.DEC_POINT,objFilter.CURRENCY_FORMAT.THOUSANDS_SEP);var p=objTools.number_format(n.maxPrice,objFilter.CURRENCY_FORMAT.DECIMALS,objFilter.CURRENCY_FORMAT.DEC_POINT,objFilter.CURRENCY_FORMAT.THOUSANDS_SEP);$("#minAmount-CATALOG_PRICE_1").text(j.replace("#",m));$("#maxAmount-CATALOG_PRICE_1").text(j.replace("#",p));var o=Math.round((n.maxPrice-n.minPrice)/10);if(window.objFilter.arScale&&window.objFilter.arScale.CATALOG_PRICE_1){objFilter.arScale.CATALOG_PRICE_1.DATA={};objFilter.firstTime=0;objFilter.arScale.CATALOG_PRICE_1.DATA[0]=n.minPrice;objFilter.arScale.CATALOG_PRICE_1.DATA[9]=n.maxPrice;var l="";for(i=1;i<=8;i++){objFilter.arScale.CATALOG_PRICE_1.DATA[i]=(n.minPrice-0)+(i*o)}$("#slider-CATALOG_PRICE_1").slider("setValue",[0,9])}}objFilter.changeSlider=0;$(".removeonly").removeClass("removeonly");$(".arFilter").each(function(q,r){if((objFilter.FIRST_TIME)){if((n.arFilterState2[q]==0)){$(r).addClass("enabled");$(r).parent().addClass("hide");$(r).parent().removeClass("show")}else{$(r).addClass("enabled");$(r).parent().addClass("show")}}if(!$(r).hasClass("exception")){if((n.arFilterState2[q]==0)){$(r).removeClass("enabled")}else{$(r).addClass("enabled");$(r).parent().addClass("show")}}if(((n.arFilterState2[q]==0)&&($(r).hasClass("selected")))){$(r).removeClass("exception");$(r).addClass("removeonly")}});$("ul.attribute-items").each(function(q,r){if($(r).find(".show").length==0){$(r).parent().parent().parent().parent().parent().parent().hide()}else{$(r).parent().parent().parent().parent().parent().parent().show()}});$(".accordion-inner").each(function(q,r){if(($(r).find(".show").length<8)){$(r).addClass("sel")}else{$(r).removeClass("sel")}});if(n.workarea&&objFilter.CHANGE_WORKAREA&&objFilter.CATALOG_RESET){$("#workarea").html(n.workarea)}objFilter.setClearBtnStatus();if($(".arFilter.selected").length==1){$(".arFilter.selected").eq(-1).parent().parent().find("li a").addClass("enabled")}}else{$("#workarea").html(n.workarea)}if(n.isAuthorized&&n.isAuthorized==1){$(".bottom-balloon button").each(function(){if($(this).hasClass("notify")){$(this).removeClass("notify").addClass("authNotify")}});for(i in n.offersSubsribed){$("#btn_"+n.offersSubsribed[i]).removeClass("authNotify").html("��������")}}},complete:function(){objFilter.FIRST_TIME=0;objFilter.FILTER_RESET=1;objFilter.CATALOG_RESET=1;objFilter.CHANGE_WORKAREA=1;objFilter.hideAjaxLoader();ajaxImgLoad()}});if(h){window.history.pushState(null,null,"./"+g)}}},init:function(s,t,b,h,k,r,f,m,c,d,e,g,o,l,n,a,p,j,q){objFilter.SESS_INCLUDE_AREAS=j;objFilter.CURRENCY_FORMAT=b;objFilter.arElementsSearch=t;objFilter.arScale=s;objFilter.CURRENT_SECTION_ID=h;objFilter.CURRENT_SECTION_CODE=k;objFilter.CATALOG_IBLOCK_ID=f;objFilter.CATALOG_IBLOCK_CODE=m;objFilter.TRADEOF_IBLOCK_ID=c;objFilter.TRADEOF_IBLOCK_CODE=d;objFilter.PATH=r;objFilter.SEARCH_WHERE=q;if((t!=null)&&(t[0]!=-1)){objFilter.QUERY=o}else{$("#title-search-input").attr("value","");objFilter.QUERY=""}objFilter.ROOT_PATH=l;objFilter.BRAND_ROOT=n;objFilter.FASHION_ROOT=a;objFilter.FASHION_MODE=p;$('.arFilter.selected[offer="N"]').each(function(u){objFilter.noGET=0});$('.arFilter.selected[offer="Y"]').each(function(u){objFilter.noGET=0});if(e==0){objFilter.nPageSize=16}else{objFilter.nPageSize=e}objFilter.FILTER_RESET=1;objFilter.USE_AJAX=0;objFilter.SECTION_ID=g;$(".my_clear").live("click",function(){if($(this).attr("id")!="my_clear"){var u=0;var v=0;$(".my_clear").each(function(w){v=v+1;if($(this).css("display")=="none"){u=u+1}});$(this).parent().parent().find(".arFilter").removeClass("selected");objFilter.changeSlider=!objFilter.checkPriceSliderState();$(".exception").removeClass("exception");$(".removeonly").removeClass("removeonly");objFilter.getElements(1,true)}return false});$("#workarea .selectpicker").live("change",function(){objFilter.setOrder($(this).val());objFilter.changeSlider=!objFilter.checkPriceSliderState();objFilter.FILTER_RESET=0;objFilter.getElements(1,true);return false});$("#my_clear").live("click",function(){$(".arFilter").removeClass("selected");$(".exception").removeClass("exception");$(".removeonly").removeClass("removeonly");objFilter.USE_AJAX=false;if(window.objFilter.arScale&&window.objFilter.arScale.CATALOG_PRICE_1){for(i=0;i<10;i++){objFilter.arScale.CATALOG_PRICE_1.DATA[i]=0}}objTools.forEach(s,function(u,v){$("#minAmount-"+u).text("");$("#maxAmount-"+u).text("");$("#slider-"+u).slider("setValue",[0,v.DATA.length-0])});objFilter.changeSlider=0;objFilter.USE_AJAX=true;objFilter.getElements(1,true);return false});objTools.forEach(s,function(v,y){$("#slider-"+v).slider({min:0,max:y.DATA.length-1,value:[y.MIN,y.MAX],step:1,tooltip:false}).on("slide",function(C){if(v=="CATALOG_PRICE_1"){var z=objFilter.CURRENCY_FORMAT.FORMAT_STRING;var A=objTools.number_format(y.DATA[C.value[0]],objFilter.CURRENCY_FORMAT.DECIMALS,objFilter.CURRENCY_FORMAT.DEC_POINT,objFilter.CURRENCY_FORMAT.THOUSANDS_SEP);var B=objTools.number_format(y.DATA[C.value[1]],objFilter.CURRENCY_FORMAT.DECIMALS,objFilter.CURRENCY_FORMAT.DEC_POINT,objFilter.CURRENCY_FORMAT.THOUSANDS_SEP);$("#minAmount-"+v).text(z.replace("#",A));$("#maxAmount-"+v).text(z.replace("#",B))}else{$("#minAmount-"+v).text(y.DATA[C.value[0]]);-$("#maxAmount-"+v).text(y.DATA[C.value[1]])}}).on("slideStop",function(z){$(".exception").removeClass("exception");objFilter.changeSlider=1;objFilter.getElements(1,true);$("#my_clear").removeClass("hidden")});if(v=="CATALOG_PRICE_1"){var u=objFilter.CURRENCY_FORMAT.FORMAT_STRING;var w=objTools.number_format(y.DATA[0],objFilter.CURRENCY_FORMAT.DECIMALS,objFilter.CURRENCY_FORMAT.DEC_POINT,objFilter.CURRENCY_FORMAT.THOUSANDS_SEP);var x=objTools.number_format(y.DATA[y.DATA.length-1],objFilter.CURRENCY_FORMAT.DECIMALS,objFilter.CURRENCY_FORMAT.DEC_POINT,objFilter.CURRENCY_FORMAT.THOUSANDS_SEP);$("#minAmount-"+v).text(u.replace("#",w));$("#maxAmount-"+v).text(u.replace("#",x))}else{$("#minAmount-"+v).text(y.DATA[y.MIN]);$("#maxAmount-"+v).text(y.DATA[y.MAX])}});$(".navig li a").live("click",function(){$("body,html").animate({scrollTop:0},800);objFilter.FILTER_RESET=0;objFilter.changeSlider=objFilter.checkPriceSliderState();objFilter.QUERY=$(this).attr("data-q");objFilter.SEARCH_WHERE=$(this).attr("data-where");objFilter.getElements($(this).attr("data-inumpage"),true);return false});$(".arFilter").live("click",function(){$(".exception").removeClass("exception");objFilter.changeSlider=!objFilter.checkPriceSliderState();if($(this).hasClass("enabled")){if($(this).hasClass("selected")){$(this).removeClass("selected");if($(this).parent().parent().find(".arFilter.selected").length>0){$(this).parent().parent().find("li a").addClass("exception")}objFilter.getElements(1,true)}else{if(!$(this).hasClass("disabled")){$(this).addClass("selected");if($(this).parent().parent().find(".arFilter.selected").length>0){$(this).parent().parent().find("li a").addClass("exception")}objFilter.getElements(1,true)}}}return false});$(".removeonly").live("mouseover",function(){$(this).addClass("enabled");$(this).addClass("selected")});$(".removeonly").live("mouseout",function(){$(this).removeClass("enabled")});objFilter.changeSlider=1;objFilter.CATALOG_RESET=0;if(objFilter.SESS_INCLUDE_AREAS!=1){objFilter.getElements(1,false)}}};extend(objFilter,objTools);