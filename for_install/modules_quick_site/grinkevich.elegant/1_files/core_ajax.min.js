(function(d){if(d.BX.ajax){return}var b=d.BX,g={},c={method:"GET",dataType:"html",timeout:0,async:true,processData:true,scriptsRunFirst:false,emulateOnload:true,skipAuthCheck:false,start:true,cache:true,preparePost:true,headers:false,lsTimeout:30,lsForce:false},f=null,e={},i=[],a={url_utf:/[^\034-\254]+/g,script_self:/\/bitrix\/js\/main\/core\/core(_ajax)*.js$/i,script_self_window:/\/bitrix\/js\/main\/core\/core_window.js$/i,script_self_admin:/\/bitrix\/js\/main\/core\/core_admin.js$/i,script_onload:/window.onload/g};b.ajax=function(j){var k,m;if(!j||!j.url||!b.type.isString(j.url)){return false}for(var n in g){if(typeof(j[n])=="undefined"){j[n]=g[n]}}g={};for(n in c){if(typeof(j[n])=="undefined"){j[n]=c[n]}}j.method=j.method.toUpperCase();if(!b.localStorage){j.lsId=null}if(b.browser.IsIE()){var s=a.url_utf.exec(j.url);if(s){do{j.url=j.url.replace(s,b.util.urlencode(s));s=a.url_utf.exec(j.url)}while(s)}}if(j.dataType=="json"){j.emulateOnload=false}if(!j.cache&&j.method=="GET"){j.url=b.ajax._uncache(j.url)}if(j.method=="POST"&&j.preparePost){j.data=b.ajax.prepareData(j.data)}var r=true;if(j.lsId&&!j.lsForce){var q=b.localStorage.get("ajax-"+j.lsId);if(q!==null){r=false;var o=function(u){if(u.key=="ajax-"+j.lsId&&u.value!="BXAJAXWAIT"){var v=u.value,t=!!u.oldValue&&v==null;if(!t){b.ajax.__run(j,v)}else{if(j.onfailure){j.onfailure("timeout")}}b.removeCustomEvent("onLocalStorageChange",o)}};if(q=="BXAJAXWAIT"){b.addCustomEvent("onLocalStorageChange",o)}else{setTimeout(function(){o({key:"ajax-"+j.lsId,value:q})},10)}}}if(r){j.xhr=b.ajax.xhr();if(!j.xhr){return}if(j.lsId){b.localStorage.set("ajax-"+j.lsId,"BXAJAXWAIT",j.lsTimeout)}j.xhr.open(j.method,j.url,j.async);if(!j.skipBxHeader&&!b.ajax.isCrossDomain(j.url)){j.xhr.setRequestHeader("Bx-ajax","true")}if(j.method=="POST"&&j.preparePost){j.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}if(typeof(j.headers)=="object"){for(n=0;n<j.headers.length;n++){j.xhr.setRequestHeader(j.headers[n].name,j.headers[n].value)}}var l=false;var p=j.xhr.onreadystatechange=function(t){if(l){return}if(t==="timeout"){if(j.onfailure){j.onfailure("timeout")}b.onCustomEvent(j.xhr,"onAjaxFailure",["timeout","",j]);j.xhr.onreadystatechange=b.DoNothing;j.xhr.abort();if(j.async){j.xhr=null}}else{if(j.xhr.readyState==4||t=="run"){k=b.ajax.xhrSuccess(j.xhr)?"success":"error";l=true;j.xhr.onreadystatechange=b.DoNothing;if(k=="success"){var u=(!!j.skipAuthCheck||b.ajax.isCrossDomain(j.url))?false:j.xhr.getResponseHeader("X-Bitrix-Ajax-Status");if(!!u&&u=="Authorize"){if(j.onfailure){j.onfailure("auth",j.xhr.status)}b.onCustomEvent(j.xhr,"onAjaxFailure",["auth",j.xhr.status,j])}else{var v=j.xhr.responseText;if(j.lsId){b.localStorage.set("ajax-"+j.lsId,v,j.lsTimeout)}b.ajax.__run(j,v)}}else{if(j.onfailure){j.onfailure("status",j.xhr.status)}b.onCustomEvent(j.xhr,"onAjaxFailure",["status",j.xhr.status,j])}if(j.async){j.xhr=null}}}};if(j.async&&j.timeout>0){setTimeout(function(){if(j.xhr&&!l){p("timeout")}},j.timeout*1000)}if(j.start){j.xhr.send(j.data);if(!j.async){p("run")}}return j.xhr}};b.ajax.xhr=function(){if(d.XMLHttpRequest){try{return new XMLHttpRequest()}catch(j){}}else{if(d.ActiveXObject){try{return new d.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(j){}try{return new d.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(j){}try{return new d.ActiveXObject("Msxml2.XMLHTTP")}catch(j){}try{return new d.ActiveXObject("Microsoft.XMLHTTP")}catch(j){}throw new Error("This browser does not support XMLHttpRequest.")}}return null};b.ajax.isCrossDomain=function(k,j){j=j||d.location;if(k.indexOf("//")===0){k=j.protocol+k}if(k.indexOf("http")!==0){return false}var l=d.document.createElement("a");l.href=k;return l.protocol!==j.protocol||l.hostname!==j.hostname||b.ajax.getHostPort(l.protocol,l.host)!==b.ajax.getHostPort(j.protocol,j.host)};b.ajax.getHostPort=function(l,k){var j=/:(\d+)$/.exec(k);if(j){return j[1]}else{if(l==="http:"){return"80"}else{if(l==="https:"){return"443"}}}return""};b.ajax.__prepareOnload=function(k){if(k.length>0){b.ajax["onload_"+f]=null;for(var l=0,j=k.length;l<j;l++){if(k[l].isInternal){k[l].JS=k[l].JS.replace(a.script_onload,"BX.ajax.onload_"+f)}}}b.CaptureEventsGet();b.CaptureEvents(d,"load")};b.ajax.__runOnload=function(){if(null!=b.ajax["onload_"+f]){b.ajax["onload_"+f].apply(d);b.ajax["onload_"+f]=null}var k=b.CaptureEventsGet();if(k){for(var j=0;j<k.length;j++){k[j].apply(d)}}};b.ajax.__run=function(j,k){if(!j.processData){if(j.onsuccess){j.onsuccess(k)}b.onCustomEvent(j.xhr,"onAjaxSuccess",[k,j])}else{k=b.ajax.processRequestData(k,j)}};b.ajax._onParseJSONFailure=function(j){this.jsonFailure=true;this.jsonResponse=j;this.jsonProactive=/^\[WAF\]/.test(j)};b.ajax.processRequestData=function(n,k){var r,m=[],q=[];switch(k.dataType.toUpperCase()){case"JSON":b.addCustomEvent(k.xhr,"onParseJSONFailure",b.proxy(b.ajax._onParseJSONFailure,k));r=b.parseJSON(n,k.xhr);b.removeCustomEvent(k.xhr,"onParseJSONFailure",b.proxy(b.ajax._onParseJSONFailure,k));break;case"SCRIPT":m.push({isInternal:true,JS:n,bRunFirst:k.scriptsRunFirst});k.processScriptsConsecutive=true;r=n;break;default:var j=b.processHTML(n,k.scriptsRunFirst);r=j.HTML;m=j.SCRIPT;q=j.STYLE;break}var p=false;if(null==f){f=parseInt(Math.random()*1000000);p=true}if(q.length>0){b.loadCSS(q)}if(k.emulateOnload){b.ajax.__prepareOnload(m)}var l=b.DoNothing;if(k.emulateOnload||p){l=b.defer(function(){if(k.emulateOnload){b.ajax.__runOnload()}if(p){f=null}b.onCustomEvent(k.xhr,"onAjaxSuccessFinish",[k])})}try{if(!!k.jsonFailure){throw {type:"json_failure",data:k.jsonResponse,bProactive:k.jsonProactive}}k.scripts=m;b.ajax.processScripts(k.scripts,true);if(k.onsuccess){k.onsuccess(r)}b.onCustomEvent(k.xhr,"onAjaxSuccess",[r,k]);if(!k.processScriptsConsecutive){b.ajax.processScripts(k.scripts,false,l)}else{b.ajax.processScriptsConsecutive(k.scripts,false);l()}}catch(o){if(k.onfailure){k.onfailure("processing",o)}b.onCustomEvent(k.xhr,"onAjaxFailure",["processing",o,k])}};b.ajax.processScripts=function(q,j,p){var k=[],r="";p=p||b.DoNothing;for(var s=0,m=q.length;s<m;s++){if(typeof j!="undefined"&&j!=!!q[s].bRunFirst){continue}if(q[s].isInternal){r+=";"+q[s].JS}else{k.push(q[s].JS)}}k=b.util.array_unique(k);var o=k.length;var n=o;var t=r.length>0?function(){b.evalGlobal(r)}:b.DoNothing;if(o>0){var u=function(){if(--n<=0){t();p();t=b.DoNothing}};for(s=0;s<o;s++){b.loadScript(k[s],u)}}else{t();p()}};b.ajax.processScriptsConsecutive=function(j,m){for(var k=0,l=j.length;k<l;k++){if(null!=m&&m!=!!j[k].bRunFirst){continue}if(j[k].isInternal){b.evalGlobal(j[k].JS)}else{b.ajax.loadScriptAjax([j[k].JS])}}};b.ajax.prepareData=function(n,m){var l="";if(b.type.isString(n)){l=n}else{if(null!=n){for(var k in n){if(n.hasOwnProperty(k)){if(l.length>0){l+="&"}var j=b.util.urlencode(k);if(m){j=m+"["+j+"]"}if(typeof n[k]=="object"){l+=b.ajax.prepareData(n[k],j)}else{l+=j+"="+b.util.urlencode(n[k])}}}}}return l};b.ajax.xhrSuccess=function(j){return(j.status>=200&&j.status<300)||j.status===304||j.status===1223||j.status===0};b.ajax.Setup=function(j,l){l=!!l;for(var k in j){if(l){g[k]=j[k]}else{c[k]=j[k]}}};b.ajax.replaceLocalStorageValue=function(l,k,j){if(!!b.localStorage){b.localStorage.set("ajax-"+l,k,j)}};b.ajax._uncache=function(j){return j+((j.indexOf("?")!==-1?"&":"?")+"_="+(new Date()).getTime())};b.ajax.get=function(j,k,l){if(b.type.isFunction(k)){l=k;k=""}k=b.ajax.prepareData(k);if(k){j+=(j.indexOf("?")!==-1?"&":"?")+k;k=""}return b.ajax({method:"GET",dataType:"html",url:j,data:"",onsuccess:l})};b.ajax.getCaptcha=function(j){return b.ajax.loadJSON("/bitrix/tools/ajax_captcha.php",j)};b.ajax.insertToNode=function(l,m){m=b(m);if(!!m){var k={cancel:false};b.onCustomEvent("onAjaxInsertToNode",[{url:l,node:m,eventArgs:k}]);if(k.cancel===true){return}var j=null;if(!g.denyShowWait){j=b.showWait(m);delete g.denyShowWait}return b.ajax.get(l,function(n){m.innerHTML=n;b.closeWait(m,j)})}};b.ajax.post=function(j,k,l){k=b.ajax.prepareData(k);return b.ajax({method:"POST",dataType:"html",url:j,data:k,onsuccess:l})};b.ajax.loadScriptAjax=function(m,o,n){if(b.type.isArray(m)){for(var l=0,k=m.length;l<k;l++){b.ajax.loadScriptAjax(m[l],o,n)}}else{var j=m.replace(/\.js\?.*/,".js");if(a.script_self.test(j)){return}if(a.script_self_window.test(j)&&b.CWindow){return}if(a.script_self_admin.test(j)&&b.admin){return}if(typeof e[j]=="undefined"){if(!!n){e[j]="";return b.loadScript(m)}else{return b.ajax({url:m,method:"GET",dataType:"script",processData:true,emulateOnload:false,scriptsRunFirst:true,async:false,start:true,onsuccess:function(p){e[j]=p;if(o){o(p)}}})}}else{if(o){o(e[j])}}}};b.ajax.loadJSON=function(k,l,m,j){if(b.type.isFunction(l)){j=m;m=l;l=""}l=b.ajax.prepareData(l);if(l){k+=(k.indexOf("?")!==-1?"&":"?")+l;l=""}return b.ajax({method:"GET",dataType:"json",url:k,onsuccess:m,onfailure:j})};b.ajax.load=function(m,o){if(!b.type.isArray(m)){m=[m]}var l=0;if(!b.type.isFunction(o)){o=b.DoNothing}var n=function(p){if(b.type.isFunction(this.callback)){this.callback(p)}if(++l>=j){o()}};for(var k=0,j=m.length;k<j;k++){switch(m[k].type.toUpperCase()){case"SCRIPT":b.loadScript([m[k].url],b.proxy(n,m[k]));break;case"CSS":b.loadCSS([m[k].url]);if(++l>=j){o()}break;case"JSON":b.ajax.loadJSON(m[k].url,b.proxy(n,m[k]));break;default:b.ajax.get(m[k].url,"",b.proxy(n,m[k]));break}}};b.ajax.submit=function(k,l){if(!k.target){if(null==k.BXFormTarget){var j="formTarget_"+Math.random();k.BXFormTarget=document.body.appendChild(b.create("IFRAME",{props:{name:j,id:j,src:"javascript:void(0)"},style:{display:"none"}}))}k.target=k.BXFormTarget.name}k.BXFormCallback=l;b.bind(k.BXFormTarget,"load",b.proxy(b.ajax._submit_callback,k));b.submit(k);return false};b.ajax.submitComponentForm=function(m,k,n){if(!m.target){if(null==m.BXFormTarget){var l="formTarget_"+Math.random();m.BXFormTarget=document.body.appendChild(b.create("IFRAME",{props:{name:l,id:l,src:"javascript:void(0)"},style:{display:"none"}}))}m.target=m.BXFormTarget.name}if(!!n){var j=b.showWait(k)}m.BXFormCallback=function(o){if(!!n){b.closeWait(j)}var p=function(){if(!!d.bxcompajaxframeonload){setTimeout(function(){d.bxcompajaxframeonload();d.bxcompajaxframeonload=null},10)}};b(k).innerHTML=o;b.onCustomEvent("onAjaxSuccess",[null,null,p])};b.bind(m.BXFormTarget,"load",b.proxy(b.ajax._submit_callback,m));return true};b.ajax._submit_callback=function(){try{if(this.BXFormTarget.contentWindow.location.href.indexOf("http")!=0){return}}catch(j){return}if(this.BXFormCallback){this.BXFormCallback.apply(this,[this.BXFormTarget.contentWindow.document.body.innerHTML])}b.unbindAll(this.BXFormTarget)};b.ajax.prepareForm=function(A,w){w=(!!w?w:{});var x,z,s,t=[],u=A.elements.length,l=0,r=0;if(!!A){for(x=0;x<u;x++){s=A.elements[x];if(s.disabled){continue}switch(s.type.toLowerCase()){case"text":case"textarea":case"password":case"hidden":case"select-one":t.push({name:s.name,value:s.value});r+=(s.name.length+s.value.length);break;case"file":if(!!s.files){for(z=0;z<s.files.length;z++){l++;t.push({name:s.name,value:s.files[z],file:true});r+=s.files[z].size}}break;case"radio":case"checkbox":if(s.checked){t.push({name:s.name,value:s.value});r+=(s.name.length+s.value.length)}break;case"select-multiple":for(var v=0;v<s.options.length;v++){if(s.options[v].selected){t.push({name:s.name,value:s.options[v].value});r+=(s.name.length+s.options[v].length)}}break;default:break}}x=0;r=0;var y=w;while(x<t.length){var m=t[x].name.indexOf("[");if(m==-1){y[t[x].name]=t[x].value;y=w;x++}else{var k=t[x].name.substring(0,m);var q=t[x].name.substring(m+1);if(!y[k]){y[k]=[]}var o=q.indexOf("]");if(o==-1){y=w;x++}else{if(o==0){y=y[k];t[x].name=""+y.length}else{y=y[k];t[x].name=q.substring(0,o)+q.substring(o+1)}}}}}return{data:w,filesCount:l,roughSize:r}};b.ajax.submitAjax=function(p,j){j=(!!j&&typeof j=="object"?j:{});j.url=(j.url||p.getAttribute("action"));j.data=b.ajax.prepareForm(p).data;if(!d.FormData){b.ajax(j)}else{var n=function(r){var q=Object.prototype.toString.call(r);return(q=="[object File]"||q=="[object Blob]")},m=function(r,q,t){if(!!t&&typeof t=="object"&&!n(t)){for(var s in t){if(t.hasOwnProperty(s)){m(r,(q==""?s:q+"["+s+"]"),t[s])}}}else{r.append(q,(!!t?t:""))}},l=function(t){var s={};if(null!=t){if(typeof t=="object"){for(var r in t){if(t.hasOwnProperty(r)){var q=b.util.urlencode(r);if(typeof t[r]=="object"&&t[r]["file"]!==true){s[q]=l(t[r])}else{if(t[r]["file"]===true){s[q]=t[r]["value"]}else{s[q]=b.util.urlencode(t[r])}}}}}else{s=b.util.urlencode(t)}}return s},k=new d.FormData();if(j.method!=="POST"){j.data=b.ajax.prepareData(j.data);if(j.data){j.url+=(j.url.indexOf("?")!==-1?"&":"?")+j.data;j.data=""}}else{if(j.preparePost===true){j.data=l(j.data)}m(k,"",j.data);j.data=k}j.preparePost=false;j.start=false;var o=b.ajax(j);if(!!j.onprogress){o.upload.addEventListener("progress",function(r){var q=null;if(r.lengthComputable&&(r.total||r.totalSize)){q=r.loaded*100/(r.total||r.totalSize)}j.onprogress(r,q)})}o.send(k)}};b.ajax.UpdatePageData=function(l){if(l.TITLE){b.ajax.UpdatePageTitle(l.TITLE)}if(l.WINDOW_TITLE||l.TITLE){b.ajax.UpdateWindowTitle(l.WINDOW_TITLE||l.TITLE)}if(l.NAV_CHAIN){b.ajax.UpdatePageNavChain(l.NAV_CHAIN)}if(l.CSS&&l.CSS.length>0){b.loadCSS(l.CSS)}if(l.SCRIPTS&&l.SCRIPTS.length>0){var k=function(n,p,m){if(!!p&&b.type.isArray(p.scripts)){for(var q=0,o=l.SCRIPTS.length;q<o;q++){p.scripts.push({isInternal:false,JS:l.SCRIPTS[q]})}}else{b.loadScript(l.SCRIPTS,m)}b.removeCustomEvent("onAjaxSuccess",k)};b.addCustomEvent("onAjaxSuccess",k)}else{var j=function(n,o,m){if(b.type.isFunction(m)){m()}b.removeCustomEvent("onAjaxSuccess",j)};b.addCustomEvent("onAjaxSuccess",j)}};b.ajax.UpdatePageTitle=function(k){var j=b("pagetitle");if(j){j.removeChild(j.firstChild);if(!j.firstChild){j.appendChild(document.createTextNode(k))}else{j.insertBefore(document.createTextNode(k),j.firstChild)}}};b.ajax.UpdateWindowTitle=function(j){document.title=j};b.ajax.UpdatePageNavChain=function(j){var k=b("navigation");if(k){k.innerHTML=j}};b.userOptions={options:null,bSend:false,delay:5000,path:"/bitrix/admin/user_options.php?"};b.userOptions.setAjaxPath=function(j){b.userOptions.path=j.indexOf("?")==-1?j+"?":j+"&"};b.userOptions.save=function(n,o,m,k,l){if(null==b.userOptions.options){b.userOptions.options={}}l=!!l;b.userOptions.options[n+"."+o+"."+m]=[n,o,m,k,l];var j=b.userOptions.__get();if(j!=""){document.cookie=b.message("COOKIE_PREFIX")+"_LAST_SETTINGS="+j+"&sessid="+b.bitrix_sessid()+"; expires=Thu, 31 Dec 2020 23:59:59 GMT; path=/;"}if(!b.userOptions.bSend){b.userOptions.bSend=true;setTimeout(function(){b.userOptions.send(null)},b.userOptions.delay)}};b.userOptions.send=function(k){var j=b.userOptions.__get();b.userOptions.options=null;b.userOptions.bSend=false;if(j!=""){document.cookie=b.message("COOKIE_PREFIX")+"_LAST_SETTINGS=; path=/;";b.ajax({method:"GET",dataType:"html",processData:false,cache:false,url:b.userOptions.path+j+"&sessid="+b.bitrix_sessid(),onsuccess:k})}};b.userOptions.del=function(k,l,j,m){b.ajax.get(b.userOptions.path+"action=delete&c="+k+"&n="+l+(j==true?"&common=Y":"")+"&sessid="+b.bitrix_sessid(),m)};b.userOptions.__get=function(){if(!b.userOptions.options){return""}var j="",o=-1,m="",l,k;for(k in b.userOptions.options){if(b.userOptions.options.hasOwnProperty(k)){l=b.userOptions.options[k];if(m!=l[0]+"."+l[1]){o++;j+="&p["+o+"][c]="+b.util.urlencode(l[0]);j+="&p["+o+"][n]="+b.util.urlencode(l[1]);if(l[4]==true){j+="&p["+o+"][d]=Y"}m=l[0]+"."+l[1]}j+="&p["+o+"][v]["+b.util.urlencode(l[2])+"]="+b.util.urlencode(l[3])}}return j.substr(1)};b.ajax.history={expected_hash:"",obParams:null,obFrame:null,obImage:null,obTimer:null,bInited:false,bHashCollision:false,bPushState:!!(history.pushState&&b.type.isFunction(history.pushState)),startState:null,init:function(j){if(b.ajax.history.bInited){return}this.obParams=j;var k=this.obParams.getState();if(b.ajax.history.bPushState){b.ajax.history.expected_hash=d.location.pathname;if(d.location.search){b.ajax.history.expected_hash+=d.location.search}b.ajax.history.put(k,b.ajax.history.expected_hash,"",true);setTimeout(function(){b.bind(d,"popstate",b.ajax.history.__hashListener)},500)}else{b.ajax.history.expected_hash=d.location.hash;if(!b.ajax.history.expected_hash||b.ajax.history.expected_hash=="#"){b.ajax.history.expected_hash="__bx_no_hash__"}h.put(b.ajax.history.expected_hash,k);b.ajax.history.obTimer=setTimeout(b.ajax.history.__hashListener,500);if(b.browser.IsIE()){b.ajax.history.obFrame=document.createElement("IFRAME");b.hide_object(b.ajax.history.obFrame);document.body.appendChild(b.ajax.history.obFrame);b.ajax.history.obFrame.contentWindow.document.open();b.ajax.history.obFrame.contentWindow.document.write(b.ajax.history.expected_hash);b.ajax.history.obFrame.contentWindow.document.close()}else{if(b.browser.IsOpera()){b.ajax.history.obImage=document.createElement("IMG");b.hide_object(b.ajax.history.obImage);document.body.appendChild(b.ajax.history.obImage);b.ajax.history.obImage.setAttribute("src","javascript:location.href = 'javascript:BX.ajax.history.__hashListener();';")}}}b.ajax.history.bInited=true},__hashListener:function(l){l=l||d.event||{state:false};if(b.ajax.history.bPushState){b.ajax.history.obParams.setState(l.state||b.ajax.history.startState)}else{if(b.ajax.history.obTimer){d.clearTimeout(b.ajax.history.obTimer);b.ajax.history.obTimer=null}var m;if(null!=b.ajax.history.obFrame){m=b.ajax.history.obFrame.contentWindow.document.body.innerText}else{m=d.location.hash}if(!m||m=="#"){m="__bx_no_hash__"}if(m.indexOf("#")==0){m=m.substring(1)}if(m!=b.ajax.history.expected_hash){var k=h.get(m);if(k){b.ajax.history.obParams.setState(k);b.ajax.history.expected_hash=m;if(null!=b.ajax.history.obFrame){var j=m=="__bx_no_hash__"?"":m;if(d.location.hash!=j&&d.location.hash!="#"+j){d.location.hash=j}}}}b.ajax.history.obTimer=setTimeout(b.ajax.history.__hashListener,500)}},put:function(m,j,l,k){if(this.bPushState){if(!k){history.pushState(m,"",j)}else{b.ajax.history.startState=m}}else{if(typeof l!="undefined"){j=l}else{j="view"+j}h.put(j,m);b.ajax.history.expected_hash=j;d.location.hash=b.util.urlencode(j);if(null!=b.ajax.history.obFrame){b.ajax.history.obFrame.contentWindow.document.open();b.ajax.history.obFrame.contentWindow.document.write(j);b.ajax.history.obFrame.contentWindow.document.close()}}},checkRedirectStart:function(j,l){var k=d.location.hash;if(k.substring(0,1)=="#"){k=k.substring(1)}var m=k.substring(0,5);if(m=="view/"||m=="view%"){b.ajax.history.bHashCollision=true;document.write('<div id="__ajax_hash_collision_'+l+'" style="display: none;">')}},checkRedirectFinish:function(j,l){document.write("</div>");var k=d.location.hash;if(k.substring(0,1)=="#"){k=k.substring(1)}b.ready(function(){var p=k.substring(0,5);if(p=="view/"||p=="view%"){var n=b("__ajax_hash_collision_"+l);var o=n.firstChild;b.cleanNode(o);n.style.display="block";if(p!="view%"){k=b.util.urlencode(k)}k+=(k.indexOf("%3F")==-1?"%3F":"%26")+j+"="+l;var m="/bitrix/tools/ajax_redirector.php?hash="+k;b.ajax.insertToNode(m,o)}})}};b.ajax.component=function(j){this.node=j};b.ajax.component.prototype.getState=function(){var j={node:this.node,title:d.document.title,data:b(this.node).innerHTML};var k=b("navigation");if(null!=k){j.nav_chain=k.innerHTML}return j};b.ajax.component.prototype.setState=function(j){b(j.node).innerHTML=j.data;b.ajax.UpdatePageTitle(j.title);if(j.nav_chain){b.ajax.UpdatePageNavChain(j.nav_chain)}};var h={arHistory:{},put:function(k,j){this.arHistory[k]=j},get:function(j){return this.arHistory[j]}};b.ajax.FormData=function(){this.elements=[];this.files=[];this.features={};this.isSupported();this.log("BX FormData init")};b.ajax.FormData.isSupported=function(){var k=new b.ajax.FormData();var j=k.features.supported;k=null;return j};b.ajax.FormData.prototype.log=function(k){if(false){try{if(b.browser.IsIE()){k=JSON.stringify(k)}console.log(k)}catch(j){}}};b.ajax.FormData.prototype.isSupported=function(){var j={};j.fileReader=(d.FileReader&&d.FileReader.prototype.readAsBinaryString);j.readFormData=j.sendFormData=!!(d.FormData);j.supported=!!(j.readFormData&&j.sendFormData);this.features=j;this.log("features:");this.log(j);return j.supported};b.ajax.FormData.prototype.append=function(j,k){if(typeof(k)==="object"){this.files.push({name:j,value:k})}else{this.elements.push({name:j,value:k})}};b.ajax.FormData.prototype.send=function(k,j,n,o){this.log("FD send");this.xhr=b.ajax({method:"POST",dataType:"html",url:k,onsuccess:j,onfailure:o,start:false,preparePost:false});if(n){this.xhr.upload.addEventListener("progress",function(p){if(p.lengthComputable){n(p.loaded/(p.total||p.totalSize))}},false)}if(this.features.readFormData&&this.features.sendFormData){var m=new FormData();this.log("use browser formdata");for(var l in this.elements){if(this.elements.hasOwnProperty(l)){m.append(this.elements[l].name,this.elements[l].value)}}for(l in this.files){if(this.files.hasOwnProperty(l)){m.append(this.files[l].name,this.files[l].value)}}this.xhr.send(m)}return this.xhr};b.addCustomEvent("onAjaxFailure",b.debug)})(window);