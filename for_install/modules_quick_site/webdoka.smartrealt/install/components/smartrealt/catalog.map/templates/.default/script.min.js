function SmartRealtMap(){var h;var d;var i;var c;var b;var g;function e(){if(i){var r={center:[55.76,37.64],zoom:10};var j=false;$("#"+h).empty();var k=new ymaps.Map(h,r);k.controls.add("typeSelector");k.controls.add("smallZoomControl",{left:7,top:7});myCollection=new ymaps.GeoObjectCollection();for(iIndex in g){var o=g[iIndex];var q=0;if((o.Latitude+"").length==0||(o.Longitude+"").length==0){continue}if((o.Zoom+"").length!=0){q=parseInt(o.Zoom)}myPlacemark=new ymaps.Placemark([o.Latitude,o.Longitude],{balloonContentBody:o.Info,maxWidth:270},{});if(!j){j=myPlacemark.geometry.getBounds()}else{f(myPlacemark.geometry.getBounds(),j)}myCollection.add(myPlacemark)}k.geoObjects.add(myCollection);k.setBounds(j,{checkZoomRange:true,callback:function(s){if(g.length==1&&q>0){k.setZoom(q)}}})}else{var r={scrollwheel:false,mapTypeControl:true,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},streetViewControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP};var k=new google.maps.Map(document.getElementById(h),r);var p=new google.maps.LatLngBounds();var l=new google.maps.InfoWindow();for(iIndex in g){var o=g[iIndex];var q=0;if((o.Latitude+"").length==0||(o.Longitude+"").length==0){continue}if((o.Zoom+"").length!=0){q=parseInt(o.Zoom)}var m=new google.maps.LatLng(o.Latitude,o.Longitude);p.extend(m);var n=new google.maps.Marker({position:m,map:k,title:o.SectionFullNameSign+" "+o.Address,content:o.Info});google.maps.event.addListener(n,"click",function(){l.open(k,this);l.setContent(this.content)})}if(g.length==1&&q>0){k.setCenter(p.getCenter());k.setZoom(q)}else{k.setCenter(p.getCenter(),k.fitBounds(p))}}}function f(k,j){if(k[0]&&k[1]){j[0][0]=Math.min(k[0][0],j[0][0]);j[0][1]=Math.min(k[0][1],j[0][1]);j[1][0]=Math.max(k[1][0],j[1][0]);j[1][1]=Math.max(k[1][1],j[1][1])}}function a(){this.LoadMap=function(){if(i){ymaps.ready(e)}else{e()}};this.SetMapId=function(j){h=j};this.SetMapType=function(j){d=j;i=d=="yandex"};this.SetWidth=function(j){c=j};this.SetHeight=function(j){b=j};this.SetMarkers=function(j){g=j}}return new a()};