<? $GLOBALS['_1654820673_']=Array('i' .'ntva' .'l','st' .'rval','' .'in_arra' .'y','is_array','intv' .'al','is' .'_arra' .'y','in_array','is_array','intval','' .'in' .'_arr' .'ay','' .'in_arr' .'ay','' .'pr' .'eg_' .'re' .'pl' .'a' .'ce','arr' .'a' .'y_' .'key' .'s','' .'intval','strval'); ?><? function _2049855732($i){$a=Array('LANG','DEFAULT','Y','LANG','CODE','CODE','CODE','SID','SID','SID','CODE','SID','CODE','CODE','SID','SID','CODE','CODE','CODE','CODE','CODE','SID','SID','SID','SID','SID','DEFAULT','Y','SID','DEFAULT','/^(>=|<=|=|!|>|<)/','','ID','STATUS','LANG','LID',"NAME",'NAME');return $a[$i];} ?><? class CStartShopOrderStatus extends CStartShop implements CStartShopInterface{private static $arFieldsEditable=array('SID','CODE','SORT','CAN_PAY','DEFAULT');public static function getArFieldsEditable(){return static::$arFieldsEditable;}private static $arFieldsFiltering=array('ID','CODE','SID','SORT','CAN_PAY','DEFAULT');public static function getArFieldsFiltering(){return static::$arFieldsFiltering;}protected static $sLanguageTable="startshop_order_statuses_language";protected static $sLanguageTableLink="STATUS";protected static $sLanguageTableLanguage="LID";protected static $arLanguageFields=array("NAME");public static function SetDefault($_0,$_1){$_0=$GLOBALS['_1654820673_'][0]($_0);$_1=$GLOBALS['_1654820673_'][1]($_1);if(empty($_1)|| empty($_0))return false;$_2=(bool)static::GetList(array(),array('ID'=> $_0,'SID'=> $_1))->Fetch();if($_2){CStartShopDBQueryBX::Update()->Tables('startshop_order_statuses')->Values(array('DEFAULT'=> 'N'))->Where(array('SID'=> $_1))->Execute();CStartShopDBQueryBX::Update()->Tables('startshop_order_statuses')->Values(array('DEFAULT'=> 'Y'))->Where(array('ID'=> $_0))->Execute();return true;}return false;}public static function Add($_3){if(empty($_3['SID'])|| empty($_3['CODE']))return false;$_4=$_3[_2049855732(0)];$_3=CStartShopUtil::ArrayFilter($_3,function($_5){return $GLOBALS['_1654820673_'][2]($_5,CStartShopOrderStatus::getArFieldsEditable());},STARTSHOP_UTIL_ARRAY_FILTER_USE_KEY);if(!$GLOBALS['_1654820673_'][3]($_4))$_4=array();$_2=(bool)static::GetList(array(),array('CODE'=> $_3['CODE'],'SID'=> $_3['SID']))->Fetch();if($_2)return false;$_6=CStartShopDBQueryBX::Insert()->Into('startshop_order_statuses')->Values($_3)->Execute();if($_6){if($_3[_2049855732(1)]== _2049855732(2))static::SetDefault($_6,$_3['SID']);foreach($_4 as $_5 => $_7)static::SetLanguage($_6,$_5,$_7);return $_6;}return false;}public static function Update($_0,$_3){$_0=$GLOBALS['_1654820673_'][4]($_0);$_4=$_3[_2049855732(3)];$_2=false;$_8=static::GetByID($_0)->GetNext();if(empty($_8))return false;if(!$GLOBALS['_1654820673_'][5]($_4))$_4=false;if(isset($_3[_2049855732(4)])&& empty($_3[_2049855732(5)]))unset($_3[_2049855732(6)]);if(isset($_3[_2049855732(7)])&& empty($_3[_2049855732(8)]))unset($_3[_2049855732(9)]);if(isset($_3[_2049855732(10)])|| isset($_3[_2049855732(11)]))if($_3[_2049855732(12)]!= $_8[_2049855732(13)]|| $_3[_2049855732(14)]!= $_8[_2049855732(15)]){$_9=array();if(isset($_3[_2049855732(16)])){$_9[_2049855732(17)]=$_3[_2049855732(18)];}else{$_9[_2049855732(19)]=$_8[_2049855732(20)];}if(isset($_3[_2049855732(21)])){$_9[_2049855732(22)]=$_3[_2049855732(23)];}else{$_9[_2049855732(24)]=$_8[_2049855732(25)];}$_2=(bool)static::GetList(array(),$_9)->Fetch();unset($_9);}if($_2)return false;$_3=CStartShopUtil::ArrayFilter($_3,function($_5){return $GLOBALS['_1654820673_'][6]($_5,CStartShopOrderStatus::getArFieldsEditable());},STARTSHOP_UTIL_ARRAY_FILTER_USE_KEY);if(!empty($_3)){if($_3[_2049855732(26)]== _2049855732(27))static::SetDefault($_0,!empty($_3['SID'])?$_3['SID']:$_8[_2049855732(28)]);unset($_3[_2049855732(29)]);CStartShopDBQueryBX::Update()->Tables('startshop_order_statuses')->Values($_3)->Where(array('ID' => $_0))->Execute();}if($GLOBALS['_1654820673_'][7]($_4)){static::DeleteLanguages($_0);foreach($_4 as $_5 => $_7)static::SetLanguage($_0,$_5,$_7);}return true;}public static function Delete($_0){$_0=$GLOBALS['_1654820673_'][8]($_0);CStartShopDBQueryBX::Delete()->From('startshop_order_statuses')->Where(array('ID'=> $_0))->Execute();static::DeleteLanguages($_0);return true;}public static function DeleteAll(){CStartShopDBQueryBX::Delete()->From('startshop_order_statuses')->Execute();static::DeleteLanguagesAll();return true;}public static function GetList($_10=array('ID'=> 'ASC'),$_11=array()){$_12=array();$_10=CStartShopUtil::ArrayFilter($_10,function($_5){return $GLOBALS['_1654820673_'][9]($_5,CStartShopOrderStatus::getArFieldsFiltering());},STARTSHOP_UTIL_ARRAY_FILTER_USE_KEY);$_11=CStartShopUtil::ArrayFilter($_11,function($_5){return $GLOBALS['_1654820673_'][10]($GLOBALS['_1654820673_'][11](_2049855732(30),_2049855732(31),$_5),CStartShopOrderStatus::getArFieldsFiltering());},STARTSHOP_UTIL_ARRAY_FILTER_USE_KEY);$_13=CStartShopDBQueryBX::Select()->From('startshop_order_statuses')->Where($_11)->OrderBy($_10)->Execute();while($_8=$_13->Fetch()){$_8['LANG']=array();$_12[$_8[_2049855732(32)]]=$_8;}if(!empty($_12)){$_14=static::GetLanguageList(array('LID'=> 'ASC'),array('STATUS'=> $GLOBALS['_1654820673_'][12]($_12)));while($_7=$_14->GetNext())$_12[$_7[_2049855732(33)]][_2049855732(34)][$_7[_2049855732(35)]]=array(_2049855732(36)=> $_7[_2049855732(37)]);}return CStartShopUtil::ArrayToDBResult($_12);}public static function GetByID($_15){$_15=$GLOBALS['_1654820673_'][13]($_15);return static::GetList(array(),array("ID"=> $_15));}public static function GetDefault($_1){$_1=$GLOBALS['_1654820673_'][14]($_1);return static::GetList(array(),array('DEFAULT'=> 'Y','SID'=> $_1));}} ?>