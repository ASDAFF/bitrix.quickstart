BX.Sale.OrderPaymentChange=(function(){var a=function(b){this.ajaxUrl=b.url;this.accountNumber=b.accountNumber||{};this.paymentNumber=b.paymentNumber||{};this.wrapperId=b.wrapperId||"";this.templateFolder=b.templateFolder;this.wrapper=document.getElementById("bx-sopc"+this.wrapperId);this.paySystemsContainer=this.wrapper.getElementsByClassName("sale-order-payment-change-pp")[0];BX.ready(BX.proxy(this.init,this))};a.prototype.init=function(){var b=this.wrapper.getElementsByClassName("sale-order-payment-change-pp-list")[0];new BX.easing({duration:500,start:{opacity:0,height:50},finish:{opacity:100,height:"auto"},transition:BX.easing.makeEaseOut(BX.easing.transitions.quad),step:function(c){b.style.opacity=c.opacity/100;b.style.height=b.height/450+"px"},complete:function(){b.style.height="auto"}}).animate();BX.bindDelegate(this.paySystemsContainer,"click",{className:"sale-order-payment-change-pp-company"},BX.proxy(function(d){var c=d.target.parentNode;var e=c.getElementsByClassName("sale-order-payment-change-pp-company-hidden")[0];BX.ajax({method:"POST",dataType:"html",url:this.ajaxUrl,data:{sessid:BX.bitrix_sessid(),paySystemId:e.value,accountNumber:this.accountNumber,paymentNumber:this.paymentNumber},onsuccess:BX.proxy(function(f){this.paySystemsContainer.innerHTML=f;var g=this.wrapper.parentNode.previousElementSibling.getElementsByClassName("sale-order-detail-payment-options-methods-image-element")[0];if(g!==undefined){g.style.backgroundImage=d.target.style.backgroundImage}},this),onfailure:BX.proxy(function(){return this},this)},this);return this},this));return this};return a})();