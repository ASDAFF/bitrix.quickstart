(function(b){var a=function(m,s){var j=b.extend({},b.fn.nivoSlider.defaults,s);var o={currentSlide:0,currentImage:"",totalSlides:0,running:false,paused:false,stop:false,controlNavEl:false};var d=b(m);d.data("nivo:vars",o).addClass("nivoSlider");var e=d.children();e.each(function(){var v=b(this);var u="";if(!v.is("img")){if(v.is("a")){v.addClass("nivo-imageLink");u=v}v=v.find("img:first")}var t=(t===0)?v.attr("width"):v.width(),i=(i===0)?v.attr("height"):v.height();if(u!==""){u.css("display","none")}v.css("display","none");o.totalSlides++});if(j.randomStart){j.startSlide=Math.floor(Math.random()*o.totalSlides)}if(j.startSlide>0){if(j.startSlide>=o.totalSlides){j.startSlide=o.totalSlides-1}o.currentSlide=j.startSlide}if(b(e[o.currentSlide]).is("img")){o.currentImage=b(e[o.currentSlide])}else{o.currentImage=b(e[o.currentSlide]).find("img:first")}if(b(e[o.currentSlide]).is("a")){b(e[o.currentSlide]).css("display","block")}var r=b('<img class="nivo-main-image" src="#" />');r.attr("src",o.currentImage.attr("src")).show();d.append(r);b(window).resize(function(){d.children("img").width(d.width());r.attr("src",o.currentImage.attr("src"));r.stop().height("auto");b(".nivo-slice").remove();b(".nivo-box").remove()});d.append(b('<div class="nivo-caption"></div>'));var p=function(i){var u=b(".nivo-caption",d);if(o.currentImage.attr("title")!=""&&o.currentImage.attr("title")!=undefined){var t=o.currentImage.attr("title");if(t.substr(0,1)=="#"){t=b(t).html()}if(u.css("display")=="block"){setTimeout(function(){u.html(t)},i.animSpeed)}else{u.html(t);u.stop().fadeIn(i.animSpeed)}}else{u.stop().fadeOut(i.animSpeed)}};p(j);var c=0;if(!j.manualAdvance&&e.length>1){c=setInterval(function(){q(d,e,j,false)},j.pauseTime)}if(j.directionNav){d.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+j.prevText+'</a><a class="nivo-nextNav">'+j.nextText+"</a></div>");b("a.nivo-prevNav",d).live("click",function(){if(o.running){return false}clearInterval(c);c="";o.currentSlide-=2;q(d,e,j,"prev")});b("a.nivo-nextNav",d).live("click",function(){if(o.running){return false}clearInterval(c);c="";q(d,e,j,"next")})}if(j.controlNav){o.controlNavEl=b('<div class="nivo-controlNav"></div>');d.after(o.controlNavEl);for(var l=0;l<e.length;l++){if(j.controlNavThumbs){o.controlNavEl.addClass("nivo-thumbs-enabled");var f=e.eq(l);if(!f.is("img")){f=f.find("img:first")}if(f.attr("data-thumb")){o.controlNavEl.append('<a class="nivo-control" rel="'+l+'"><img src="'+f.attr("data-thumb")+'" alt="" /></a>')}}else{o.controlNavEl.append('<a class="nivo-control" rel="'+l+'"></a>')}}b("a:eq("+o.currentSlide+")",o.controlNavEl).addClass("active");b("a",o.controlNavEl).bind("click",function(){if(o.running){return false}if(b(this).hasClass("active")){return false}clearInterval(c);c="";r.attr("src",o.currentImage.attr("src"));o.currentSlide=b(this).attr("rel")-1;q(d,e,j,"control")})}if(j.pauseOnHover){d.hover(function(){o.paused=true;clearInterval(c);c=""},function(){o.paused=false;if(c===""&&!j.manualAdvance){c=setInterval(function(){q(d,e,j,false)},j.pauseTime)}})}d.bind("nivo:animFinished",function(){r.attr("src",o.currentImage.attr("src"));o.running=false;b(e).each(function(){if(b(this).is("a")){b(this).css("display","none")}});if(b(e[o.currentSlide]).is("a")){b(e[o.currentSlide]).css("display","block")}if(c===""&&!o.paused&&!j.manualAdvance){c=setInterval(function(){q(d,e,j,false)},j.pauseTime)}j.afterChange.call(this)});var g=function(v,u,y){if(b(y.currentImage).parent().is("a")){b(y.currentImage).parent().css("display","block")}b('img[src="'+y.currentImage.attr("src")+'"]',v).not(".nivo-main-image,.nivo-control img").width(v.width()).css("visibility","hidden").show();var w=(b('img[src="'+y.currentImage.attr("src")+'"]',v).not(".nivo-main-image,.nivo-control img").parent().is("a"))?b('img[src="'+y.currentImage.attr("src")+'"]',v).not(".nivo-main-image,.nivo-control img").parent().height():b('img[src="'+y.currentImage.attr("src")+'"]',v).not(".nivo-main-image,.nivo-control img").height();for(var t=0;t<u.slices;t++){var x=Math.round(v.width()/u.slices);if(t===u.slices-1){v.append(b('<div class="nivo-slice" name="'+t+'"><img src="'+y.currentImage.attr("src")+'" style="position:absolute; width:'+v.width()+"px; height:auto; display:block !important; top:0; left:-"+((x+(t*x))-x)+'px;" /></div>').css({left:(x*t)+"px",width:(v.width()-(x*t))+"px",height:w+"px",opacity:"0",overflow:"hidden"}))}else{v.append(b('<div class="nivo-slice" name="'+t+'"><img src="'+y.currentImage.attr("src")+'" style="position:absolute; width:'+v.width()+"px; height:auto; display:block !important; top:0; left:-"+((x+(t*x))-x)+'px;" /></div>').css({left:(x*t)+"px",width:x+"px",height:w+"px",opacity:"0",overflow:"hidden"}))}}b(".nivo-slice",v).height(w);r.stop().animate({height:b(y.currentImage).height()},u.animSpeed)};var h=function(u,i,x){if(b(x.currentImage).parent().is("a")){b(x.currentImage).parent().css("display","block")}b('img[src="'+x.currentImage.attr("src")+'"]',u).not(".nivo-main-image,.nivo-control img").width(u.width()).css("visibility","hidden").show();var t=Math.round(u.width()/i.boxCols),y=Math.round(b('img[src="'+x.currentImage.attr("src")+'"]',u).not(".nivo-main-image,.nivo-control img").height()/i.boxRows);for(var v=0;v<i.boxRows;v++){for(var w=0;w<i.boxCols;w++){if(w===i.boxCols-1){u.append(b('<div class="nivo-box" name="'+w+'" rel="'+v+'"><img src="'+x.currentImage.attr("src")+'" style="position:absolute; width:'+u.width()+"px; height:auto; display:block; top:-"+(y*v)+"px; left:-"+(t*w)+'px;" /></div>').css({opacity:0,left:(t*w)+"px",top:(y*v)+"px",width:(u.width()-(t*w))+"px"}));b('.nivo-box[name="'+w+'"]',u).height(b('.nivo-box[name="'+w+'"] img',u).height()+"px")}else{u.append(b('<div class="nivo-box" name="'+w+'" rel="'+v+'"><img src="'+x.currentImage.attr("src")+'" style="position:absolute; width:'+u.width()+"px; height:auto; display:block; top:-"+(y*v)+"px; left:-"+(t*w)+'px;" /></div>').css({opacity:0,left:(t*w)+"px",top:(y*v)+"px",width:t+"px"}));b('.nivo-box[name="'+w+'"]',u).height(b('.nivo-box[name="'+w+'"] img',u).height()+"px")}}}r.stop().animate({height:b(x.currentImage).height()},i.animSpeed)};var q=function(I,H,L,E){var G=I.data("nivo:vars");if(G&&(G.currentSlide===G.totalSlides-1)){L.lastSlide.call(this)}if((!G||G.stop)&&!E){return false}L.beforeChange.call(this);if(!E){r.attr("src",G.currentImage.attr("src"))}else{if(E==="prev"){r.attr("src",G.currentImage.attr("src"))}if(E==="next"){r.attr("src",G.currentImage.attr("src"))}}G.currentSlide++;if(G.currentSlide===G.totalSlides){G.currentSlide=0;L.slideshowEnd.call(this)}if(G.currentSlide<0){G.currentSlide=(G.totalSlides-1)}if(b(H[G.currentSlide]).is("img")){G.currentImage=b(H[G.currentSlide])}else{G.currentImage=b(H[G.currentSlide]).find("img:first")}if(L.controlNav){b("a",G.controlNavEl).removeClass("active");b("a:eq("+G.currentSlide+")",G.controlNavEl).addClass("active")}p(L);b(".nivo-slice",I).remove();b(".nivo-box",I).remove();var u=L.effect,N="";if(L.effect==="random"){N=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse");u=N[Math.floor(Math.random()*(N.length+1))];if(u===undefined){u="fade"}}if(L.effect.indexOf(",")!==-1){N=L.effect.split(",");u=N[Math.floor(Math.random()*(N.length))];if(u===undefined){u="fade"}}if(G.currentImage.attr("data-transition")){u=G.currentImage.attr("data-transition")}G.running=true;var M=0,J=0,t="",A="",K="",x="";if(u==="sliceDown"||u==="sliceDownRight"||u==="sliceDownLeft"){g(I,L,G);M=0;J=0;t=b(".nivo-slice",I);if(u==="sliceDownLeft"){t=b(".nivo-slice",I)._reverse()}t.each(function(){var i=b(this);i.css({top:"0px"});if(J===L.slices-1){setTimeout(function(){i.animate({opacity:"1.0"},L.animSpeed,"",function(){I.trigger("nivo:animFinished")})},(100+M))}else{setTimeout(function(){i.animate({opacity:"1.0"},L.animSpeed)},(100+M))}M+=50;J++})}else{if(u==="sliceUp"||u==="sliceUpRight"||u==="sliceUpLeft"){g(I,L,G);M=0;J=0;t=b(".nivo-slice",I);if(u==="sliceUpLeft"){t=b(".nivo-slice",I)._reverse()}t.each(function(){var i=b(this);i.css({bottom:"0px"});if(J===L.slices-1){setTimeout(function(){i.animate({opacity:"1.0"},L.animSpeed,"",function(){I.trigger("nivo:animFinished")})},(100+M))}else{setTimeout(function(){i.animate({opacity:"1.0"},L.animSpeed)},(100+M))}M+=50;J++})}else{if(u==="sliceUpDown"||u==="sliceUpDownRight"||u==="sliceUpDownLeft"){g(I,L,G);M=0;J=0;var C=0;t=b(".nivo-slice",I);if(u==="sliceUpDownLeft"){t=b(".nivo-slice",I)._reverse()}t.each(function(){var i=b(this);if(J===0){i.css("top","0px");J++}else{i.css("bottom","0px");J=0}if(C===L.slices-1){setTimeout(function(){i.animate({opacity:"1.0"},L.animSpeed,"",function(){I.trigger("nivo:animFinished")})},(100+M))}else{setTimeout(function(){i.animate({opacity:"1.0"},L.animSpeed)},(100+M))}M+=50;C++})}else{if(u==="fold"){g(I,L,G);M=0;J=0;b(".nivo-slice",I).each(function(){var i=b(this);var v=i.width();i.css({top:"0px",width:"0px"});if(J===L.slices-1){setTimeout(function(){i.animate({width:v,opacity:"1.0"},L.animSpeed,"",function(){I.trigger("nivo:animFinished")})},(100+M))}else{setTimeout(function(){i.animate({width:v,opacity:"1.0"},L.animSpeed)},(100+M))}M+=50;J++})}else{if(u==="fade"){g(I,L,G);A=b(".nivo-slice:first",I);A.css({width:I.width()+"px"});A.animate({opacity:"1.0"},(L.animSpeed*2),"",function(){I.trigger("nivo:animFinished")})}else{if(u==="slideInRight"){g(I,L,G);A=b(".nivo-slice:first",I);A.css({width:"0px",opacity:"1"});A.animate({width:I.width()+"px"},(L.animSpeed*2),"",function(){I.trigger("nivo:animFinished")})}else{if(u==="slideInLeft"){g(I,L,G);A=b(".nivo-slice:first",I);A.css({width:"0px",opacity:"1",left:"",right:"0px"});A.animate({width:I.width()+"px"},(L.animSpeed*2),"",function(){A.css({left:"0px",right:""});I.trigger("nivo:animFinished")})}else{if(u==="boxRandom"){h(I,L,G);K=L.boxCols*L.boxRows;J=0;M=0;x=n(b(".nivo-box",I));x.each(function(){var i=b(this);if(J===K-1){setTimeout(function(){i.animate({opacity:"1"},L.animSpeed,"",function(){I.trigger("nivo:animFinished")})},(100+M))}else{setTimeout(function(){i.animate({opacity:"1"},L.animSpeed)},(100+M))}M+=20;J++})}else{if(u==="boxRain"||u==="boxRainReverse"||u==="boxRainGrow"||u==="boxRainGrowReverse"){h(I,L,G);K=L.boxCols*L.boxRows;J=0;M=0;var z=0;var F=0;var D=[];D[z]=[];x=b(".nivo-box",I);if(u==="boxRainReverse"||u==="boxRainGrowReverse"){x=b(".nivo-box",I)._reverse()}x.each(function(){D[z][F]=b(this);F++;if(F===L.boxCols){z++;F=0;D[z]=[]}});for(var B=0;B<(L.boxCols*2);B++){var w=B;for(var y=0;y<L.boxRows;y++){if(w>=0&&w<L.boxCols){(function(T,O,S,P,U){var R=b(D[T][O]);var v=R.width();var Q=R.height();if(u==="boxRainGrow"||u==="boxRainGrowReverse"){R.width(0).height(0)}if(P===U-1){setTimeout(function(){R.animate({opacity:"1",width:v,height:Q},L.animSpeed/1.3,"",function(){I.trigger("nivo:animFinished")})},(100+S))}else{setTimeout(function(){R.animate({opacity:"1",width:v,height:Q},L.animSpeed/1.3)},(100+S))}})(y,w,M,J,K);J++}w--}M+=100}}}}}}}}}}};var n=function(u){for(var v,t,w=u.length;w;v=parseInt(Math.random()*w,10),t=u[--w],u[w]=u[v],u[v]=t){}return u};var k=function(i){if(this.console&&typeof console.log!=="undefined"){console.log(i)}};this.stop=function(){if(!b(m).data("nivo:vars").stop){b(m).data("nivo:vars").stop=true;k("Stop Slider")}};this.start=function(){if(b(m).data("nivo:vars").stop){b(m).data("nivo:vars").stop=false;k("Start Slider")}};j.afterLoad.call(this);return this};b.fn.nivoSlider=function(c){return this.each(function(e,g){var d=b(this);if(d.data("nivoslider")){return d.data("nivoslider")}var f=new a(this,c);d.data("nivoslider",f)})};b.fn.nivoSlider.defaults={effect:"fade",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:7000,startSlide:0,directionNav:false,controlNav:true,controlNavThumbs:false,pauseOnHover:true,manualAdvance:false,prevText:"Prev",nextText:"Next",randomStart:false,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};b.fn._reverse=[].reverse})(jQuery);