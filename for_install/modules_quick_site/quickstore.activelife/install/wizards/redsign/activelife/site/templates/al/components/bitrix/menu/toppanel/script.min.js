!function(t,e,s,i){function n(e,s){this.options=t.extend({},n.defaults,s),this.settings=t.extend({},this.defaults),this.$element=t(e),this._items=[],this._more=[],this.setup(),this.init()}var h="slineTopMenu";n.defaults={initedClass:"inited",refreshClass:"refreshing",itemElement:"li",itemClass:"rmenu__item",subMenuClass:"rmenu__sub",moreClass:"rmenu__more",moreMenuElement:"ul",moreMenuClass:"rmenu__sub",toggleClass:"rmenu__toggle",moreInner:"• • •"},n.prototype.init=function(){this.$element.children(":not(."+this.settings.moreClass+")").filter(function(){return 1===this.nodeType}).each(t.proxy(function(e,s){this._items.push(t(s))},this)),this.$more=this.$element.children("."+this.settings.moreClass),this.$more.length||(this.$more=t("<"+this.settings.itemElement+"/>",{class:this.settings.itemClass+" "+this.settings.moreClass,style:"display:none",html:this.settings.moreInner}).prependTo(this.$element)),this.$moreMenu=this.$more.children("."+this.settings.moreMenuClass),this.$moreMenu.length||(this.$moreMenu=t("<"+this.settings.moreMenuElement+"/>",{class:this.settings.moreMenuClass}).appendTo(this.$more)),this.$element.is(":visible")&&this.refresh(),this.listenEvents(),this.$element.addClass(this.settings.initedClass)},n.prototype.refresh=function(){this.setup(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass)},n.prototype.update=function(){if(this.settings.dropdown)this.$element.addClass("hml_menu-drop"),this._more=this._items;else{if(this.$element.removeClass("hml_menu-drop"),this.menuWidth=this.$element.innerWidth(),this._more.length){for(var t in this._more)this._more[t].hide();this.$element.html(this._items.concat([this.$more]))}this._more=[];var e=0;for(var t in this._items)itemWidth=this._items[t].outerWidth()+parseInt(this._items[t].css("margin-left"))+parseInt(this._items[t].css("margin-right")),this.menuWidth<e+itemWidth?this._more.push(this._items[t].show()):(e+=itemWidth,this._items[t].show())}this._more.length>0?(itemWidth=this.$more.outerWidth()+parseInt(this.$more.css("margin-left"))+parseInt(this.$more.css("margin-right")),this.menuWidth<e+itemWidth&&this._more.unshift(this._items[this._items.length-this._more.length-1]),this.$more.show(),this.$moreMenu.html(this._more)):(this.$more.hide(),this.$moreMenu.html(""))},n.prototype.setup=function(){var e=this.viewport(),s=this.options.responsive,i=-1,n=null;s?(t.each(s,function(t){t<=e&&t>i&&(i=Number(t))}),n=t.extend({},this.options,s[i]),delete n.responsive):n=t.extend({},this.options),null!==this.settings&&this._breakpoint===i||(this._breakpoint=i,this.settings=n)},n.prototype.listenEvents=function(){var s=this;t(e).resize(t.proxy(s.refresh,s))},n.prototype.viewport=function(){var t;if(e.innerWidth)t=e.innerWidth;else{if(!s.documentElement||!s.documentElement.clientWidth)throw"Can not detect viewport width.";t=s.documentElement.clientWidth}return t},t.fn[h]=function(e){return this.each(function(){t.data(this,h)||t.data(this,h,new n(this,e))})}}(jQuery,window,document),$(document).ready(function(){$(".menu_top").slineTopMenu({dropdown:!0,itemClass:"menu_top__item",moreClass:"hml_menu__more",moreMenuClass:"menu_top__sub",responsive:{768:{dropdown:!1}}})});