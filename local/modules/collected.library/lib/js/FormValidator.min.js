var FormValidator={formElement:null,successClass:"validated",errorClass:"not-validated",errorElement:".item-error",errorMessages:{required:"Введите {name}",email:"Неверный формат E-mail",length:"Поле {name} должно содержать от {min} до {max} символов",phone:"Неверный формат телефона"},fields:{},errors:{},attributes:{},additionalParams:{},__parent:null,validators:{required:function(a){return $.trim(a)!==""}.bind(this.__parent),length:function(a){a=$.trim(a);if(!__parent.additionalParams){return !!a}return !(__parent.additionalParams.hasOwnProperty("min")&&a.length<__parent.additionalParams.min||__parent.additionalParams.hasOwnProperty("max")&&a.length>__parent.additionalParams.max)}.bind(this.__parent),email:function(a){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a)}.bind(this.__parent),phone:function(a){return/^\s*?(?:(?:\+?\s*?7)|(?:\s*?8\s*?))?(?:\s*?-?\s*?)?(?:\(\d{3}\)|\d{3})(?:\s*?-?\s*?)?\d{3}(?:\s*?-?\s*?)?\d{2}(?:\s*?-?\s*?)?\d{2}$/.test(a)}.bind(this.__parent)},init:function(){__parent=$.extend(true,{},this);return __parent},setForm:function(a){this.formElement=$(a);this.fields=this.formElement.find("input, textarea, select").not('[type="submit"], [type="button"]');return this},setErrorMessage:function(a,b){this.errorMessages[a]=b;return this},setErrorClass:function(a){this.errorClass=a;return this},setSuccessClass:function(a){this.successClass=a;return this},setErrorElement:function(a){this.errorElement=a;return this},setValidation:function(a){a=a||"change";var b=this;b.fields.on(a,function(){b.validateField($(this))});b.formElement.on("submit",function(f){b.validateAll();var g=b.getErrors(),c=false;for(var d in g){if($.trim(g[d])!=""){c=true;break}}if(c){f.preventDefault();return false}return true})},validateField:function(b){b=$(b);var d=[],a=b.attr("name")||b.attr("type"),j=null,h=null,c={},g=this,k=g.getElementRules(b);c.name=g.getElementTitle(b);c=$.extend(c,k);g.errors[a]="";if(h=b.data("validation")){d=h.split(/\s+/)||[];for(var e in d){if(!g.validators.hasOwnProperty([d[e]])||!g.errorMessages.hasOwnProperty([d[e]])){continue}if(!g.validators[d[e]](b.val())){var f="";if(k.hasOwnProperty([d[e]])&&k[d[e]].hasOwnProperty("message")){f=k[d[e]]["message"]}if(!f&&k.hasOwnProperty("message")){f=k.message}if(!f){f=g.errorMessages[d[e]]}g.errors[a]=f.replace(/\{([a-z]+)\}/gi,function(l,i){if(c[i]!="undefined"){return c[i]}return i});b.removeClass(g.successClass).addClass(g.errorClass).parent().find(g.errorElement).text(g.errors[a]);break}b.removeClass(g.errorClass).addClass(g.successClass).parent().find(g.errorElement).empty()}}},validateAll:function(){var a=this;a.fields.each(function(b,c){a.validateField(c)})},getElementTitle:function(a){var b="";if(!(b=a.data("validation-title"))){if(a.attr("name")){b=a.attr("name")}else{b=a.attr("type")}}return b},getElementRules:function(b){var c={};if((attr=b.data("validation-rules"))){var a=JSON.parse(attr.replace(/'/g,'"').replace(/\b([a-z]+?)(?=:)/gi,'"$1"'));if(a){c=$.extend(this.additionalParams,a)}}return c},hasErrors:function(){for(var a in this.errors){if(this.errors[a]!=""){return true}}return false},getErrors:function(){return this.errors},getError:function(a){return this.errors.hasOwnProperty(a)?this.errors[a]:false}};