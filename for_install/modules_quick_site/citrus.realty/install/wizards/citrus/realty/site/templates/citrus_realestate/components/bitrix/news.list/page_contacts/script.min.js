"use strict";function MultiGeocoder(a){this._options=a||{}}MultiGeocoder.prototype.geocode=function(f,b){var a=this,c=f.length,e=new ymaps.GeoObjectCollection({}),d=new ymaps.vow.Promise(function(h,g){f.forEach(function(j,i){ymaps.geocode(j,ymaps.util.extend({},a._options,b)).then(function(k){var l=k.geoObjects.get(0);l._idx=i;l&&e.add(l);--c||h({geoObjects:e})},function(k){g(k)})})});return d};(function(a){a.fn.citrusRealtyOfficeMapCheckHash=function(){var c=window.location.hash.substr(1);if(window.geoObjects){for(var b=0;b<window.geoObjects.length;++b){if(window.geoObjects[b]._info.code==c){window.geoObjects[b].balloon.open()}}}};a.fn.citrusRealtyOfficeMap=function(b){var c=a.extend({},a.fn.citrusRealtyOfficeMap.defaults,b);ymaps.ready(function(){var i=new ymaps.Map(c.id,{center:[55.734046,37.588628],zoom:9,controls:c.controls});var g=[],h=[];for(var e=0;e<c.items.length;++e){var f=c.items[e];g.push(f.address);h.push(f)}if(!window.geoObjects){window.geoObjects=[]}var d=new MultiGeocoder({});d.geocode(g).then(function(j){j.geoObjects.each(function(k){k._info=h[k._idx];window.geoObjects[k._idx]=k;if(k._info.header){k.properties.set("balloonContentHeader",k._info.header)}if(k._info.body){k.properties.set("balloonContentBody",k._info.body)}if(k._info.footer){k.properties.set("balloonContentFooter",k._info.footer)}});i.geoObjects.add(j.geoObjects);i.setBounds(j.geoObjects.getBounds(),{checkZoomRange:true});window.setTimeout(function(){a().citrusRealtyOfficeMapCheckHash()},500)},function(j){console.log(j)})});return this};a.fn.citrusRealtyOfficeMap.defaults={id:"",address:"",items:false,controls:["smallMapDefaultSet"]};a(window).on("hashchange",function(){a().citrusRealtyOfficeMapCheckHash()})}(jQuery));