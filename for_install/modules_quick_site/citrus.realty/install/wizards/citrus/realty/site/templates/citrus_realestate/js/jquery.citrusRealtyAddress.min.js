(function(a){a.fn.citrusRealtyAddress=function(b){var c=a.extend({},a.fn.citrusRealtyAddress.defaults,b);ymaps.ready(function(){var d=a("#"+c.id);ymaps.geocode(c.address,{results:1}).then(function(e){var g=e.geoObjects.get(0);if(!g){if(typeof(c.onError)==="function"){c.onError()}else{a(".content-map-scale").hide();d.hide()}return}var h=new ymaps.Map(c.id,{center:g.geometry.getCoordinates(),zoom:11,controls:c.controls});if(c.header){g.properties.set("balloonContentHeader",c.header)}if(c.body){g.properties.set("balloonContentBody",c.body)}if(c.footer){g.properties.set("balloonContentFooter",c.footer)}h.geoObjects.add(g);var f=g.properties.get("boundedBy");h.setBounds(f,{});if(c.openBaloon){g.balloon.open()}},function(e){if(typeof(c.onError)==="function"){c.onError()}else{a(".content-map-scale").hide();d.hide()}})});return this};a.fn.citrusRealtyAddress.defaults={id:"",address:"",header:false,body:false,footer:false,controls:["smallMapDefaultSet"],openBallon:false}}(jQuery));$(function(){$(".map-link").click(function(){var b=$(this);var a=b.data("address");if(a.length){$.fancybox({padding:0,autoSize:false,scrolling:"no",width:"95%",height:"95%",content:'<div id="map" style="width: 100%;height: 100%;"></div>',afterShow:function(){$().citrusRealtyAddress({id:"map",address:a,header:"",body:a,footer:"",controls:["largeMapDefaultSet"],onError:function(){$("#map").height("auto").html('<h2 style="text-align: center">'+BX.message("CITRUS_REALTY_ADDRESS_NOT_FOUND")+"</h2>");$(".fancybox-inner").css("display","table-cell").css("vertical-align","middle");window.setTimeout($.fancybox.close,2000)}})}})}})});