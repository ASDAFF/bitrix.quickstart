function updateProductDataAfterOffersChanged(q){var l=q.data("elementid");var m=new CatalogElement(l);var j=m.getSkuProperties(),v=q.find(".js-sku_props"),s,c;for(c in j){if(!j.hasOwnProperty(c)){continue}s=v.find(".js-sku_prop[data-code="+c+"]");s.find(".js-sku_option").removeClass("checked").filter("[data-value='"+j[c]+"']").addClass("checked");s.find(".js_select-val").html(j[c])}var t=m.getEnabledOfferValues(),o;v.find(".js-sku_option:not(.disabled)").addClass("disabled");for(o in t){s=v.find(".js-sku_prop[data-code="+o+"]");t[o].forEach(function(x){s.find(".js-sku_option.disabled[data-value='"+x+"']").removeClass("disabled")})}var w=m.getName();if(w){q.find(".js-compare-name").html(w)}if(!q.hasClass("js-detail")){var f=addUriParameter(q.find(".js-compare-name").attr("href"),"offer_id",m.getProductId());q.find(".js-compare-name, .js-detail_page_url").attr("href",f)}var h=m.getPictures(1);if(h&&h.src){q.find(".js-preview").attr("src",h.src)}var k=m.getPrices(),d=q.hasClass("js-detail"),e=q.find(".products__prices:first").html(""),b=$("<div></div>").addClass("prices"),u=$("<div></div>").addClass("prices__values");k.forEach(function(y){var x=b.clone(),z=u.clone();x.append($("<div></div>").addClass((!d?"hidden-xs ":"")+"prices__title").html(k.length>1?y.title:""));if(y.hasDiscount){z.append($("<div></div>").addClass((!d?"hidden-xs ":"")+"prices__val prices__val_old").html(y.printValue)).append($("<div></div>").addClass("prices__val prices__val_cool prices__val_new").html(y.printDiscountValue))}else{z.append($("<div></div>").addClass("prices__val prices__val_cool").html(y.printValue))}x.append(z);if(q.closest(".products_list").length>0){x=x.wrap("<div class='products__prices-item'></div>").parent()}e.append(x)});var r=m.getProductId(),a=m.canBuy(),n=q.find(".add2basketform"),p=false;if(a){n.removeClass("cantbuy")}else{n.addClass("cantbuy")}$.each(Basket.inbasket(),function(x,y){if(r==y){p=true;return false}});if(p){n.addClass("checked")}else{n.removeClass("checked")}n.find(".js-add2basketpid").val(r);var g=m.getQuantity(),i=q.find(".stores");console.log(rsFlyaway.stocks[l]);if(g>0&&g>rsFlyaway.stocks[l].LOW_QUANTITY){i.find(".stores-icon:first").removeClass("stores-mal").addClass("stores-full");i.find(".genamount:first").removeClass("empty").addClass("isset").html(rsFlyaway.stocks[l].MESSAGES.MESSAGE_ISSET)}else{if(g>0){i.find(".stores-icon:first").removeClass("stores-full").addClass("stores-mal");i.find(".genamount:first").removeClass("empty isset").html(rsFlyaway.stocks[l].MESSAGES.MESSAGE_LOW)}else{i.find(".stores-icon:first").removeClass("stores-full stores-mal");i.find(".genamount:first").removeClass("isset").addClass("empty").html(rsFlyaway.stocks[l].MESSAGES.MESSAGE_EMPTY)}}}$(document).ready(function(){$(document).on("click",".js-sku_option:not(.disabled)",function(){var e=$(this),a=e.closest(".js-element"),b=e.closest(".js-sku_props"),d={};e.closest(".js-sku_prop").find(".js-sku_option").removeClass("checked");e.addClass("checked");$.each(b.find(".js-sku_prop"),function(g,h){var f=$(h);d[f.data("code")]=f.find(".js-sku_option.checked").data("value")});var c=new CatalogElement(a.data("elementid"));if(!c.isReady){rsFlyaway.darken(a)}c.ready(function(){if(a.hasClass("area2darken")){rsFlyaway.darken(a)}c.selectOfferByValues(d);updateProductDataAfterOffersChanged(a);setTimeout(function(){$(document).trigger("changeOffer.rs.flyaway",[a])})})})});