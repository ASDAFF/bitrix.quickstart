var seoSettings={windowObj:false,requestUri:"",messages:{},counter:1,deleteParams:["back_url_admin","clear_cache","logout_butt","bitrix_include_areas","login","logout"],init:function(a){this.messages=a},clearQuerySrting:function(b){if(b==""){return""}var a="";var d=new Array();var e=new Array();var f=[];d=(b.substr(1)).split("&");for(var c=0;c<d.length;c++){e=d[c].split("=");if(jQuery.inArray(e[0],this.deleteParams)==-1){f.push(d[c])}}if(f.length>0){a="?"+f.join("&")}return a},urlsUpdate:function(){BX.showWait();$.post("/local/js/novagroup/seoAjax.php",{action:"updateUrlsFile"},function(a){BX.closeWait();if(a==1){$("#okDiv").show()}},"html")},makeWindow:function(){var a=this;a.windowObj=new BX.CDialog({title:a.messages.SEO_URLS_EDIT_LABEL,content:"<div id='seoPopup"+a.counter+"'></div>",resizable:true,draggable:true,height:"400",width:"550"});a.windowObj.SetButtons([{title:a.messages.SAVE,id:"seoSaveBtn",action:function(){var b=$("#old_url").val();if(b==""){alert(a.messages.SEO_URLS_ALERT_OLD_URL);return false}BX.showWait();$.post("/local/js/novagroup/seoAjax.php",$("#seoPopup"+a.counter+" form").serialize(),function(c){BX.closeWait();a.windowObj.Close()},"html")}},{id:"seoCloseBtn",title:a.messages.SEO_URLS_CLOSE_LABEL,action:function(){a.windowObj.Close()}},{id:"seoUpdateUrls",title:a.messages.SEO_URLS_UPDATE_LABEL,action:function(){a.urlsUpdate()}}]);BX.showWait();$.post("/local/js/novagroup/seoAjax.php",{action:"content",uri:this.requestUri},function(b){if(b=="ACCESS DENIED"){a.windowObj.Close()}else{a.windowObj.Show();$("#seoPopup"+a.counter).html(b)}BX.closeWait()},"html")},seoWindowOpen:function(a){var b=window.location.pathname+this.clearQuerySrting(window.location.search);if(b!=this.requestUri){this.counter++;this.requestUri=b;this.makeWindow()}else{this.windowObj.Show()}return false}};