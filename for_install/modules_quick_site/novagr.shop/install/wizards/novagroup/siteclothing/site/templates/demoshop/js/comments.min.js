function JCommentsEditor(a,b){this.init(a,b)}function JComments(b,c,a){this.init(b,c,a)}JCommentsEditor.prototype={ta:null,l10n:{},tags:{},smiles:{},events:null,counter:null,focused:false,resizable:true,init:function(c,b){this.ta=JComments.prototype.$(c);this.panelElements={};this.l10n={counterPre:"",counterPost:" symbols left",enterValue:"Enter value"};this.resizable=b;this.defaultHeight=this.ta.clientHeight;this.defaultRows=this.ta.rows;this.isWebkit=/webkit/.test(navigator.userAgent.toLowerCase());var a=this},defined:function(a){return(typeof(a)!="undefined")},insertText:function(f){var a=this.ta;if(this.defined(a.caretPos)&&a.createTextRange){a.focus();var e=document.selection.createRange();e.text=e.text+f;a.focus()}else{if(this.defined(a.selectionStart)){var b=a.value.substr(0,a.selectionStart);var d=a.value.substr(a.selectionEnd),c=a.scrollTop;a.value=b+f+d;if(a.setSelectionRange){a.focus();a.setSelectionRange(b.length+f.length,b.length+f.length)}a.scrollTop=c}else{a.value+=f;a.focus(a.value.length-1)}}},initSmiles:function(c){this.smilesPath=c;if(this.ta){this.smilesPanel=document.createElement("div");if(this.bbcPanel){document.body.appendChild(this.smilesPanel);this.smilesPanel.id="comments-form-smilespanel";this.smilesPanel.setAttribute("style","display:none;top:0;left:0;position:absolute;");this.smilesPanel.onclick=function(){this.style.display="none"};var a=this,b=function(h){var f=a.smilesPanel,g=a.getElementPos(h);if(f){var d=f.style;d.display=(d.display=="none"||d.display==""?"block":"none");d.left=g.left+"px";d.top=g.bottom+h.offsetHeight+"px";d.zIndex=99}return false};this.bbcPanel.appendChild(this.createButton(null,null,"bbcode-smile",b))}else{this.smilesPanel.className="smiles";this.ta.parentNode.insertBefore(this.smilesPanel,this.ta)}}},closeSmiles:function(){if(this.smilesPanel&&this.bbcPanel){this.smilesPanel.style.display="none"}},addSmile:function(b,d){if(this.ta){if(!this.smilesPath||!this.smilesPanel){return}var a=this,c=document.createElement("img");c.setAttribute("src",this.smilesPath+"/"+d);c.setAttribute("alt",b);c.className="smile";c.onclick=function(){a.insertText(" "+b+" ")};this.smilesPanel.appendChild(c)}}};JComments.prototype={oi:null,og:null,debug:false,requestURI:"",oldRequestURI:"",busy:null,form:null,cache:{},mode:"add",readyList:[],isReady:false,$:function(b){if(!b){return null}var a=document.getElementById(b);if(!a&&document.all){a=document.all[b]}return a}};