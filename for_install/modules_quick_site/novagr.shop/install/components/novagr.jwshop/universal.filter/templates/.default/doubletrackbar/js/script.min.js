function cDoubleTrackBar(c,a,b){switch(typeof c){case"string":this.Track=document.getElementById(c);break;case"object":this.Track=c;break}switch(typeof a){case"string":this.Tracker=document.getElementById(a);break;case"object":this.Tracker=a;break}if(!c||!a){return false}this.OnUpdate=b.OnUpdate;this.OnComplete=b.OnComplete;this.FingerOffset=b.FingerOffset||0;this.FormatNumbers=b.FormatNumbers||false;this.Min=b.Min||0;this.Max=b.Max||100;this.MinSpace=b.MinSpace||0;this.RoundTo=b.RoundTo||1;this.Margins=b.Margins||0;this.AllowedValues=b.AllowedValues||false;this.Disabled=(typeof b.Disabled!="undefined")?b.Disabled:false;if(this.Min>=this.Max){this.Max=this.Min+1}this.MinPos=this.Min;this.MaxPos=this.Max;if(this.Max-this.Min<this.MinSpace){this.MinSpace=this.Max-this.Min}if(this.Max-this.Min<this.RoundTo){this.RoundTo=this.Max-this.Min}this.MinSpace=Math.ceil(this.MinSpace/this.RoundTo)*this.RoundTo;this.Track.style.width=(this.Track.clientWidth||this.Track.offsetWidth)+"px";this.OnTrackMouseDown=this.bindAsEventListener(this.TrackMouseDown);this.OnDocumentMouseMove=this.bindAsEventListener(this.DocumentMouseMove);this.OnDocumentMouseUp=this.bindAsEventListener(this.DocumentMouseUp);this.bindEvent(this.Track,"mousedown",this.OnTrackMouseDown);this.TrackerLeft=0;this.UpdateTracker(this.Track.offsetWidth+this.FingerOffset);if(typeof this.OnUpdate=="function"){this.OnUpdate.call(this)}}cDoubleTrackBar.prototype={TrackMouseDown:function(a){this.TrackerLeft=this.Tracker.offsetLeft-this.Margins;this.TrackerRight=this.TrackerLeft+this.Tracker.offsetWidth;this.TrackerOffsets=this.getOffsets(this.Track);var b=a.clientX+document.documentElement.scrollLeft;b-=this.TrackerOffsets[0];this.Left=Math.abs(this.TrackerLeft-b+this.Margins)<=Math.abs(this.TrackerRight-b+this.Margins);if(typeof this.Disabled=="function"){if(this.Disabled.call(this)){return true}}else{if(this.Disabled){return true}}this.UpdateTracker(b);this.bindEvent(document,"mousemove",this.OnDocumentMouseMove);this.bindEvent(document,"mouseup",this.OnDocumentMouseUp);return this.stopEvent(a)},DocumentMouseMove:function(a){this.UpdateTracker(a.clientX+document.documentElement.scrollLeft-this.TrackerOffsets[0]);return this.stopEvent(a)},DocumentMouseUp:function(a){this.unbindEvent(document,"mousemove",this.OnDocumentMouseMove);this.unbindEvent(document,"mouseup",this.OnDocumentMouseUp);if(typeof this.OnComplete=="function"){this.OnComplete.call(this)}return this.stopEvent(a)},UpdateTracker:function(e){var b=this.Track.offsetWidth-this.Margins*2-1;var d=Math.floor(b*this.MinSpace/(this.Max-this.Min));var a=this.MinPos;var c=this.MaxPos;e-=this.Margins;if(this.Left){e+=this.FingerOffset;this.TrackerLeft=Math.max(0,Math.min(this.TrackerRight-d-1,e));this.MinPos=Math.round((this.Min+this.TrackerLeft*(this.Max-this.Min)/b)/this.RoundTo)*this.RoundTo;if(this.MinSpace>=this.MaxPos-this.MinPos){this.MinPos=this.MaxPos-this.MinSpace}if(this.AllowedValues){this.TrackerLeft=Math.round(b*(this.MinPos-this.Min)/(this.Max-this.Min))}}else{e-=this.FingerOffset;this.TrackerRight=Math.max(this.TrackerLeft+d+1,Math.min(b+1,e));this.MaxPos=Math.round((this.Min+(this.TrackerRight-1)*(this.Max-this.Min)/b)/this.RoundTo)*this.RoundTo;if(this.MinSpace>=this.MaxPos-this.MinPos){this.MaxPos=this.MinPos+this.MinSpace}if(this.AllowedValues){this.TrackerRight=Math.round(b*(this.MaxPos-this.Min)/(this.Max-this.Min))+1}}this.Tracker.style.width=(this.TrackerRight-this.TrackerLeft)+"px";this.Tracker.style.left=(this.Margins+this.TrackerLeft)+"px";if(typeof this.OnUpdate=="function"){if(!this.AllowedValues||(this.AllowedValues&&(c!=this.MaxPos||a!=this.MinPos))){this.OnUpdate.call(this)}}},AddHairline:function(c){var a=this.Track.appendChild(document.createElement("div"));var b=this.Track.offsetWidth-this.Margins*2-1;a.style.left=this.Margins+b/(this.Max-this.Min)*(c-this.Min)+"px";a.className="touch";a.innerHTML="<span>"+(this.FormatNumbers?this.leadSpaces(c):c)+"</span>"},AutoHairline:function(b){if(b>=1){this.AddHairline(this.Min)}if(b>=2){this.AddHairline(this.Max)}if(b>=3){b--;var d=this.Max-this.Min;var f=[10,20,50,100,250,500,1000,2000,5000,10000,20000,50000,100000,250000,500000,1000000];var a=1;for(var c=0;f[c];c++){a=f[c]/10;if(f[c]>d){break}}for(var c=1;c<b;c++){var e=this.Min+d/b*c;e=Math.round(e/a)*a;this.AddHairline(e)}}},getOffsets:function(b){var a=0,c=0;do{a+=b.offsetTop||0;c+=b.offsetLeft||0;b=b.offsetParent}while(b);return[c,a]},leadSpaces:function(b){var d="";b=b.toString();var a=b.length;for(var c=a;c>0;c--){if((a-c)%3==2){d="&nbsp;"+b.charAt(c-1)+d}else{d=b.charAt(c-1)+d}}return d},bindEvent:function(a,b,c){if(a.addEventListener){a.addEventListener(b,c,false)}else{a.attachEvent("on"+b,c)}},unbindEvent:function(a,b,c){if(a.removeEventListener){a.removeEventListener(b,c,false)}else{if(a.detachEvent){a.detachEvent("on"+b,c)}}},bindAsEventListener:function(b){var a=this;return function(c){return b.call(a,c||window.event)}},stopEvent:function(a){if(a.preventDefault){a.preventDefault();a.stopPropagation()}else{a.returnValue=false;a.cancelBubble=true}return false}};function classFilter(f,a,e){a=" "+a+" ";var c=[];for(var b=0;f[b];b++){var d=(" "+f[b].className+" ").indexOf(a)>=0;if(e^d){c.push(f[b])}}return c};