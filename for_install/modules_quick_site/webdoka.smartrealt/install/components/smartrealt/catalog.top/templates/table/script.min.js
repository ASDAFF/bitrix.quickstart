jQuery.cookie=function(k,l,h){if(typeof l!="undefined"){h=h||{};if(l===null){l="";h.expires=-1}var g="";if(h.expires&&(typeof h.expires=="number"||h.expires.toUTCString)){if(typeof h.expires=="number"){g=new Date;g.setTime(g.getTime()+h.expires*24*60*60*1000)}else{g=h.expires}g="; expires="+g.toUTCString()}var j=h.path?"; path="+h.path:"",i=h.domain?"; domain="+h.domain:"";h=h.secure?"; secure":"";document.cookie=[k,"=",encodeURIComponent(l),g,j,i,h].join("")}else{l=null;if(document.cookie&&document.cookie!=""){h=document.cookie.split(";");for(g=0;g<h.length;g++){j=jQuery.trim(h[g]);if(j.substring(0,k.length+1)==k+"="){l=decodeURIComponent(j.substring(k.length+1));break}}}return l}};function WD_ObjectList(){var n=$("#objectListContainer");var c=$("#mapContainer");var d="";var a="";var i="";var h="";var l=false;var b=false;var g=null;function f(){$("div.onmap a").bind("click",function(){if(c.is(":visible")){c.hide();$("#showMapLink").get(0).innerHTML=i;$.cookie("hideMap",1)}else{$("#showMapLink").get(0).innerHTML=a;c.show();$.cookie("hideMap",0)}return false})}function m(){$('select[name="objectsSortInfoSelect"]',n).bind("change",function(){if(this.value!=""){window.location=this.value}})}function k(){$("#printLink").bind("click",function(){if(document.getElementsByTagName){link=document.getElementsByTagName("link")}else{if(document.all){link=document.all.tags("link")}else{return}}if(l){l=false;this.innerHTML=d;$("#searchContainerForPrint").addClass("hiddenBlock");oWD_Template.setNormalView()}else{l=true;this.innerHTML=h;$("#searchContainerForPrint").removeClass("hiddenBlock");oWD_Template.setPrintView()}return false})}function e(){if(!b){b=true;if(GBrowserIsCompatible()){var w=new GSize(655,300);map=new GMap2(document.getElementById("google_map"),{size:w});map.addControl(new GSmallMapControl());map.addControl(new GMapTypeControl());var q=new GIcon(G_DEFAULT_ICON);q.image="/bitrix/templates/kznrielt/images/home.png";q.shadow="";q.iconSize=new GSize(27,26);function t(x,z,A){var y=new GMarker(x,{icon:q});y.bindInfoWindowHtml(A);return y}for(iIndex in g){var s=g[iIndex];var u=new GLatLng(s.fLatitude,s.fLongitude);var r=t(u,s.sName,s.sHTML);map.addOverlay(r);if(p){p.extend(u)}else{var p=new GLatLngBounds(u,u)}}var o=p.getCenter();var v=map.getBoundsZoomLevel(p);if(v>15){v=15}map.setCenter(o,v)}}}function j(){this.InitHandlers=function(){f();m();k();e()};this.SetPrintText=function(o){d=o};this.SetMapHideText=function(o){a=o};this.SetMapShowText=function(o){i=o};this.SetUndoPrintText=function(o){h=o};this.SetMarkers=function(o){g=o}}return new j()};