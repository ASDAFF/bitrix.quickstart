(function(a){a.fn.loopedSlider=function(b){var c={container:".container",slides:".slides",pagination:".pagination",containerClick:false,autoStart:0,slidespeed:0,fadespeed:500,autoHeight:false};this.each(function(){var i=a(this);var f=a.extend(c,b);var r=a(f.pagination+" li a",i);var h=0;var v=1;var x=a(f.slides,i).children().size();var k=a(f.slides,i).children().outerWidth();var e=0;var q=false;var g=0;a(f.slides,i).css({width:(x*k)});a(f.slides,i).children().each(function(){a(this).css({position:"absolute",left:e,display:"block"});e=e+k});a(r,i).each(function(){g=g+1;a(this).attr("rel",g);a(r.eq(0),i).parent().addClass("active")});a(f.slides,i).children(":eq("+(x-1)+")").css({position:"absolute",left:-k});if(f.autoHeight){l(v)}a(".next",i).click(function(){if(q===false){d("next",true);if(f.autoStart){clearInterval(sliderIntervalID)}}return false});a(".previous",i).click(function(){if(q===false){d("prev",true);if(f.autoStart){clearInterval(sliderIntervalID)}}return false});if(f.containerClick){a(f.container,i).click(function(){if(q===false){d("next",true);if(f.autoStart){clearInterval(sliderIntervalID)}}return false})}a(r,i).click(function(){if(a(this).parent().hasClass("active")){return false}else{v=a(this).attr("rel");a(r,i).parent().siblings().removeClass("active");a(this).parent().addClass("active");d("fade",v);if(f.autoStart){clearInterval(sliderIntervalID)}}return false});if(f.autoStart){sliderIntervalID=setInterval(function(){if(q===false){d("next",true)}},f.autoStart)}function j(m){if(m===x+1){m=1}if(m===0){m=x}a(r,i).parent().siblings().removeClass("active");a(r+'[rel="'+(m)+'"]',i).parent().addClass("active")}function l(m){if(m===x+1){m=1}if(m===0){m=x}var n=a(f.slides,i).children(":eq("+(m-1)+")",i).outerHeight();a(f.container,i).animate({height:n},f.autoHeight)}function d(m,n){q=true;switch(m){case"next":v=v+1;h=(-(v*k-k));j(v);if(f.autoHeight){l(v)}a(f.slides,i).animate({left:h},f.slidespeed,function(){if(v===x+1){v=1;a(f.slides,i).css({left:0},function(){a(f.slides,i).animate({left:h})});a(f.slides,i).children(":eq(0)").css({left:0});a(f.slides,i).children(":eq("+(x-1)+")").css({position:"absolute",left:-k})}if(v===x){a(f.slides,i).children(":eq(0)").css({left:(x*k)})}if(v===x-1){a(f.slides,i).children(":eq("+(x-1)+")").css({left:x*k-k})}q=false});break;case"prev":v=v-1;h=(-(v*k-k));j(v);if(f.autoHeight){l(v)}a(f.slides,i).animate({left:h},f.slidespeed,function(){if(v===0){v=x;a(f.slides,i).children(":eq("+(x-1)+")").css({position:"absolute",left:(x*k-k)});a(f.slides,i).css({left:-(x*k-k)});a(f.slides,i).children(":eq(0)").css({left:(x*k)})}if(v===2){a(f.slides,i).children(":eq(0)").css({position:"absolute",left:0})}if(v===1){a(f.slides,i).children(":eq("+(x-1)+")").css({position:"absolute",left:-k})}q=false});break;case"fade":v=[v]*1;h=(-(v*k-k));j(v);if(f.autoHeight){l(v)}a(f.slides,i).children().fadeOut(f.fadespeed,function(){a(f.slides,i).css({left:h});a(f.slides,i).children(":eq("+(x-1)+")").css({left:x*k-k});a(f.slides,i).children(":eq(0)").css({left:0});if(v===x){a(f.slides,i).children(":eq(0)").css({left:(x*k)})}if(v===1){a(f.slides,i).children(":eq("+(x-1)+")").css({position:"absolute",left:-k})}a(f.slides,i).children().fadeIn(f.fadespeed);q=false});break;default:break}}})}})(jQuery);