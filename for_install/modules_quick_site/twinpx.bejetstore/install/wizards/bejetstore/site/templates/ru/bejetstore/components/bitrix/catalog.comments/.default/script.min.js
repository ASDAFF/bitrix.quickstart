(function(a){if(!!a.JCCatalogSocnetsComments){return}a.JCCatalogSocnetsComments=function(c){var b;this.errorCode=0;this.params={};this.serviceList={blog:false,facebook:false,vk:false};this.settings={blog:{ajaxUrl:"",ajaxParams:{},contID:"bx-cat-soc-comments-blg"},facebook:{contID:"bx-cat-soc-comments-fb",contWidthID:"",parentContID:"soc_comments",facebookJSDK:"facebook-jssdk",facebookPath:""},vk:{}};this.services={blog:{obBlogCont:null},facebook:{obFBCont:null,obFBContWidth:null,obFBParentCont:null,obFBjSDK:null,currentWidth:0}};if("object"===typeof c){this.params=c;if(!!this.params.serviceList&&typeof(this.params.serviceList)==="object"){for(b in this.serviceList){if(this.serviceList.hasOwnProperty(b)&&!!this.params.serviceList[b]){this.serviceList[b]=true}}}if(this.serviceList.blog){this.initParams("blog")}if(this.serviceList.facebook){this.initParams("facebook")}}else{this.errorCode=-1}if(this.errorCode===0){BX.ready(BX.delegate(this.Init,this))}};a.JCCatalogSocnetsComments.prototype.initParams=function(c){var b;if(!!this.params.settings&&typeof(this.params.settings)==="object"&&typeof(this.params.settings[c])==="object"){for(b in this.settings[c]){if(this.settings[c].hasOwnProperty(b)&&!!this.params.settings[c][b]){this.settings[c][b]=this.params.settings[c][b]}}}};a.JCCatalogSocnetsComments.prototype.Init=function(){if(this.serviceList.blog){this.services.blog.obBlogCont=BX(this.settings.blog.contID);if(!this.services.blog.obBlogCont){this.serviceList.blog=false;this.errorCode=-16}}if(this.serviceList.facebook){this.services.facebook.obFBCont=BX(this.settings.facebook.contID);if(!this.services.facebook.obFBCont){this.serviceList.facebook=false;this.errorCode=-32}else{this.services.facebook.obFBContWidth=this.services.facebook.obFBCont.firstChild}this.services.facebook.obFBParentCont=BX(this.settings.facebook.parentContID)}if(this.errorCode===0){if(this.serviceList.blog){this.loadBlog()}if(this.serviceList.facebook){this.loadFB()}}this.params={}};a.JCCatalogSocnetsComments.prototype.loadBlog=function(){var b;if(this.errorCode!==0||!this.serviceList.blog||this.settings.blog.ajaxUrl.length===0){return}b=this.settings.blog.ajaxParams;b.sessid=BX.bitrix_sessid();BX.ajax({timeout:30,method:"POST",dataType:"html",url:this.settings.blog.ajaxUrl,data:b,onsuccess:BX.proxy(this.loadBlogResult,this)})};a.JCCatalogSocnetsComments.prototype.loadBlogResult=function(b){if(BX.type.isNotEmptyString(b)){BX.adjust(this.services.blog.obBlogCont,{html:b})}};a.JCCatalogSocnetsComments.prototype.loadFB=function(){var b;if(this.services.facebook.obFBParentCont&&this.services.facebook.obFBContWidth){b=parseInt(this.services.facebook.obFBParentCont.offsetWidth,10);if(!isNaN(b)){BX.adjust(this.services.facebook.obFBContWidth,{attrs:{"data-width":(b-20)}});this.services.facebook.currentWidth=b}if(!this.services.facebook.obFBjSDK){this.services.facebook.obFBjSDK=true;BX.defer(BX.proxy((function(h,e,i,c){var g,f=h.getElementsByTagName(e)[0];if(h.getElementById(i)){return}g=h.createElement(e);g.id=i;g.src=c;f.parentNode.insertBefore(g,f)}(document,"script",this.settings.facebook.facebookJSDK,this.settings.facebook.facebookPath)),this))}}};a.JCCatalogSocnetsComments.prototype.getFBParentWidth=function(){var b=0;if(!!this.services.facebook.obFBParentCont){b=parseInt(this.services.facebook.obFBParentCont.offsetWidth,10);if(isNaN(b)){b=0}}return b};a.JCCatalogSocnetsComments.prototype.setFBWidth=function(d){var b=null,e,c;if(this.serviceList.facebook&&this.services.facebook.currentWidth!==d&&d>20&&!!this.services.facebook.obFBContWidth){if(!!this.services.facebook.obFBContWidth.firstChild&&!!this.services.facebook.obFBContWidth.firstChild.fitrstChild){b=this.services.facebook.obFBContWidth.firstChild.fitrstChild;if(!!b){e=b.getAttribute("src");c=e.replace(/width=(\d+)/ig,"width="+d);BX.adjust(this.services.facebook.obFBContWidth,{attrs:{"data-width":(d-20)}});this.services.facebook.currentWidth=d;BX.style(this.services.facebook.obFBContWidth.firstChild,"width",d+"px");BX.adjust(b,{attrs:{src:c},style:{width:d+"px"}})}}}};a.JCCatalogSocnetsComments.prototype.onResize=function(){if(this.serviceList.facebook){this.setFBWidth(this.getFBParentWidth())}}})(window);