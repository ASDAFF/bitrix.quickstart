(function(g,e,b,h){var f="SlineMenu";var c={cssPrefix:".js-mm__",columns:3,productColumnWidth:270,transfromWidth:768};function d(j,i){this.$element=g(j);this.options=g.extend(c,i);this.getSelectors();this.getElements();this.init()}g.extend(d.prototype,{init:function(){this.hideNotFitElements();this.listenEvents();if(this.getWindowWidth()>=this.options.transfromWidth){this.grid();this.alignSubmenu()}this.setReady()},resize:function(){this.setUnready();if(this.getWindowWidth()>=this.options.transfromWidth){this.hideNotFitElements();this.breakGrid();this.grid();this.alignSubmenu()}else{this.breakGrid()}this.setReady()},alignSubmenu:function(){var j=this.$rootItems,i=this.$itemsContainer.parent().outerWidth();j.children(this.selectors.submenu).removeAttr("style").each(g.proxy(function(k,l){if(g(l).position().left+g(l).outerWidth()>i){g(l).css("right",0)}},this))},hideNotFitElements:function(){var k=this.$rootItems,l=this.$element.find(this.selectors.moreContainer),j=this.$itemsContainer.width(),i=this.$element.find(this.selectors.moreBtn).outerWidth()-15,m=0;k.removeClass("is-desktop-hide").each(function(o,p){var n=g(p);if(i+n.outerWidth()<=j){i+=n.outerWidth()}else{m=o-1;return false}});if(m>0){k.filter(":gt("+m+")").addClass("is-desktop-hide");l.html(k.filter(":gt("+m+")").children("a").clone());this.showMoreBtn()}else{this.hideMoreBtn()}},getWindowWidth:function(){return e.innerWidth||(b.documentElement.clientWidth||0)},hideMoreBtn:function(){this.$element.find(this.selectors.moreBtn).css("visibility","hidden")},showMoreBtn:function(){this.$element.find(this.selectors.moreBtn).css("visibility","visible")},setReady:function(){this.$element.addClass("is-ready")},setUnready:function(){this.$element.removeClass("is-ready")},toggleMenu:function(){this.$itemsContainer.toggleClass("is-open")},toggleSubmenu:function(i){g(i).parent().toggleClass("is-sub-open")},grid:function(){var i=this.$rootItems;i.children(this.selectors.submenu).each(g.proxy(this.gridSubMenu,this))},gridSubMenu:function(l,m){var p=g(m).children(this.selectors.item),k=this.createColumns(),j;p.each(g.proxy(function(q,s){var r=a(k),i=g(s),u=i.outerHeight(),t=i.outerWidth();k[r].height+=u;k[r].width=k[r].width<t?t:k[r].width;k[r].$el.append(g(s))},this));if(g(m).children(this.selectors.product).length>0){var o=k[k.length]=this.createColumn(),n=g(m).children(this.selectors.product);o.width=n.outerWidth();o.$el.append(n)}g(m).html(k.map(function(i){return i.$el.css({width:i.width})}))},createColumns:function(l){var k=[],j;l=l||this.getOption("columns");for(j=0;j<l;j++){k[j]=this.createColumn()}return k},createColumn:function(){return{height:0,width:0,$el:g("<div>").addClass(this.selectors.column.slice(1,this.selectors.column.length)).css({display:"inline-block","vertical-align":"top"})}},breakGrid:function(){var i=this.$rootItems;this.$element.find(this.selectors.column).children().unwrap();i.children(this.selectors.submenu).each(g.proxy(function(k,l){var j=g(l);j.children(this.selectors.item).sort(function(n,m){return g(n).data("index")>=g(m).data("index")?1:-1}).appendTo(j)},this))},getSelectors:function(){this.selectors={};this.selectors.itemsContainer=this.options.cssPrefix+"items";this.selectors.rootItems=this.options.cssPrefix+"root-item";this.selectors.item=this.options.cssPrefix+"item";this.selectors.moreBtn=this.options.cssPrefix+"more-btn";this.selectors.moreContainer=this.options.cssPrefix+"more-container";this.selectors.toggleButton=this.options.cssPrefix+"toggle-button";this.selectors.toggleSubmenu=this.options.cssPrefix+"toggle-submenu";this.selectors.submenu=this.options.cssPrefix+"subitems";this.selectors.column=this.options.cssPrefix+"column";this.selectors.product=this.options.cssPrefix+"product"},getElements:function(){this.$rootItems=this.$element.find(this.selectors.rootItems);this.$itemsContainer=this.$element.find(this.selectors.itemsContainer)},listenEvents:function(){var i=this;g(e).on("resize",this.debounce(this.resize,100,this));this.$element.find(this.selectors.toggleButton).on("click",g.proxy(this.toggleMenu,this));this.$element.find(this.selectors.toggleSubmenu).on("click",function(){i.toggleSubmenu(this)})},getOption:function(k){var l=this.options[k];var j=this.getWindowWidth(),i;for(i in this.options.responsive){if(i<=j&&this.options.responsive[i][k]){l=this.options.responsive[i][k]}}return l},debounce:function(j,l,i){var k;return function(){var m=arguments;i=i||this;clearTimeout(k);k=setTimeout(function(){j.apply(i,m)},l)}}});function a(j){var i=0,k=j[i].height;j.forEach(function(l,m){if(k>l.height){k=l.height;i=m}});return i}g.fn[f]=function(i){return this.each(function(){if(!g.data(this,f)){g.data(this,f,new d(this,i))}})}})(jQuery,window,document);$(document).ready(function(){$(".js-modern-menu").SlineMenu({cssPrefix:".js-mm__",columns:3,productColumnWidth:270,transfromWidth:768})});