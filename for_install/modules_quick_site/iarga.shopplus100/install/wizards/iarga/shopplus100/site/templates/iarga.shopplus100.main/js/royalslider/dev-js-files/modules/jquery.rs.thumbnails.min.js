(function(a){a.extend(a.rsProto,{_initThumbs:function(){var b=this;if(b.st.controlNavigation==="thumbnails"){b._thumbsDefaults={drag:true,touch:true,orientation:"horizontal",navigation:true,arrows:true,arrowLeft:null,arrowRight:null,spacing:4,arrowsAutoHide:false,appendSpan:false,transitionSpeed:600,autoCenter:true,fitInViewport:true,firstMargin:true};b.st.thumbs=a.extend({},b._thumbsDefaults,b.st.thumbs);b.ev.on("rsBeforeParseNode",function(f,c,d){c=a(c);d.thumbnail=c.find(".rsTmb").remove();if(!d.thumbnail.length){d.thumbnail=c.attr("data-rsTmb");if(!d.thumbnail){d.thumbnail=c.find(".rsImg").attr("data-rsTmb")}if(!d.thumbnail){d.thumbnail=""}else{d.thumbnail='<img src="'+d.thumbnail+'"/>'}}else{d.thumbnail=a(document.createElement("div")).append(d.thumbnail).html()}});b.ev.one("rsAfterPropsSetup",function(){b._createThumbs()});b.ev.on("rsOnUpdateNav",function(){var e=b.currSlideId,c,d;if(b._prevNavItem){b._prevNavItem.removeClass("rsNavSelected")}c=a(b._controlNavItems[e]);c.addClass("rsNavSelected");if(b._thumbsNavigation){b._setCurrentThumb(e)}b._prevNavItem=c});b.ev.on("rsOnAppendSlide",function(g,f,c){var d="<div"+b._thumbsMargin+' class="rsNavItem rsThumb">'+b._addThumbHTML+f.thumbnail+"</div>";if(c>=b.numSlides){b._thumbsContainer.append(d)}else{b._controlNavItems.eq(c).before(d)}b._controlNavItems=b._thumbsContainer.children();b.updateThumbsSize()});b.ev.on("rsOnRemoveSlide",function(f,c){var d=b._controlNavItems.eq(c);if(d){d.remove();b._controlNavItems=b._thumbsContainer.children();b.updateThumbsSize()}})}},_createThumbs:function(){var k=this,c="rsThumbs",e="",b,j,h=k.st.thumbs.spacing;k._controlNavEnabled=true;if(h>0){var g=h+"px ";b=' style="margin: 0 '+g+g+'0;"'}else{b=""}k._thumbsMargin=b;k._thumbsHorizontal=(k.st.thumbs.orientation==="vertical")?false:true;k._thumbsPosition=0;k._isThumbsAnimating=false;k._thumbsDrag=false;k._thumbsNavigation=false;k._thumbsArrows=(k.st.thumbs.arrows&&k.st.thumbs.navigation);var d=(k._thumbsHorizontal?"Hor":"Ver");k.slider.addClass("rsWithThumbs rsWithThumbs"+d);e+='<div class="rsNav rsThumbs rsThumbs'+d+'"><div class="'+c+'Container">';k._addThumbHTML=k.st.thumbs.appendSpan?'<span class="thumbIco"></span>':"";for(var f=0;f<k.numSlides;f++){j=k.slides[f];e+="<div"+b+' class="rsNavItem rsThumb">'+k._addThumbHTML+j.thumbnail+"</div>"}e+="</div></div>";e=a(e);k._thumbsContainer=a(e).find("."+c+"Container");if(k._thumbsArrows){c+="Arrow";if(k.st.thumbs.arrowLeft){k._thumbsArrowLeft=k.st.thumbs.arrowLeft}else{k._thumbsArrowLeft=a('<div class="'+c+" "+c+'Left"><div class="'+c+'Icn"></div></div>');e.append(k._thumbsArrowLeft)}if(k.st.thumbs.arrowRight){k._thumbsArrowRight=k.st.thumbs.arrowRight}else{k._thumbsArrowRight=a('<div class="'+c+" "+c+'Right"><div class="'+c+'Icn"></div></div>');e.append(k._thumbsArrowRight)}k._thumbsArrowLeft.click(function(){var i=Math.floor(k._thumbsViewportSize/k._thumbSize),l=Math.floor(k._thumbsPosition/k._thumbSize),m=(l+k._visibleThumbsPerView)*k._thumbSize;k._animateThumbsTo(m>k._thumbsMinPosition?k._thumbsMinPosition:m)});k._thumbsArrowRight.click(function(){var i=Math.floor(k._thumbsViewportSize/k._thumbSize),l=Math.floor(k._thumbsPosition/k._thumbSize),m=(l-k._visibleThumbsPerView)*k._thumbSize;k._animateThumbsTo(m<k._thumbsMaxPosition?k._thumbsMaxPosition:m)});if(k.st.thumbs.arrowsAutoHide&&!k.hasTouch){k._thumbsArrowLeft.css("opacity",0);k._thumbsArrowRight.css("opacity",0);e.one("mousemove.rsarrowshover",function(){if(k._thumbsNavigation){k._thumbsArrowLeft.css("opacity",1);k._thumbsArrowRight.css("opacity",1)}});e.hover(function(){if(k._thumbsNavigation){k._thumbsArrowLeft.css("opacity",1);k._thumbsArrowRight.css("opacity",1)}},function(){if(k._thumbsNavigation){k._thumbsArrowLeft.css("opacity",0);k._thumbsArrowRight.css("opacity",0)}})}}k._controlNav=e;k._controlNavItems=k._thumbsContainer.children();k.slider.append(e);k._thumbsEnabled=true;k._thumbsSpacing=h;if(k.st.thumbs.navigation){if(k._useCSS3Transitions){k._thumbsContainer.css(k._vendorPref+"transition-property",k._vendorPref+"transform")}}k._controlNav.click(function(l){if(!k._thumbsDrag){var i=a(l.target).closest(".rsNavItem");if(i.length){k.goTo(i.index())}}});k.ev.off("rsBeforeSizeSet.thumbs").on("rsBeforeSizeSet.thumbs",function(){k._realWrapSize=k._thumbsHorizontal?k._wrapHeight:k._wrapWidth;k.updateThumbsSize()})},updateThumbsSize:function(){var c=this,b=c._controlNavItems.first(),f={};var e=c._controlNavItems.length;c._thumbSize=(c._thumbsHorizontal?b.outerWidth():b.outerHeight())+c._thumbsSpacing;c._thumbsContainerSize=e*c._thumbSize-c._thumbsSpacing;f[c._thumbsHorizontal?"width":"height"]=c._thumbsContainerSize+c._thumbsSpacing;c._thumbsViewportSize=c._thumbsHorizontal?c._controlNav.width():c._controlNav.height();c._thumbsMaxPosition=-(c._thumbsContainerSize-c._thumbsViewportSize)-(c.st.thumbs.firstMargin?c._thumbsSpacing:0);c._thumbsMinPosition=c.st.thumbs.firstMargin?c._thumbsSpacing:0;c._visibleThumbsPerView=Math.floor(c._thumbsViewportSize/c._thumbSize);if(c._thumbsContainerSize<c._thumbsViewportSize){if(c.st.thumbs.autoCenter){c._setThumbsPosition((c._thumbsViewportSize-c._thumbsContainerSize)/2)}if(c.st.thumbs.arrows&&c._thumbsArrowLeft){var d="rsThumbsArrowDisabled";c._thumbsArrowLeft.addClass(d);c._thumbsArrowRight.addClass(d)}c._thumbsNavigation=false;c._thumbsDrag=false;c._controlNav.off(c._downEvent)}else{if(c.st.thumbs.navigation&&!c._thumbsNavigation){c._thumbsNavigation=true;if((!c.hasTouch&&c.st.thumbs.drag)||(c.hasTouch&&c.st.thumbs.touch)){c._thumbsDrag=true;c._controlNav.on(c._downEvent,function(g){c._onDragStart(g,true)})}}}c._thumbsContainer.css(f);if(c._thumbsEnabled&&(c.isFullscreen||c.st.thumbs.fitInViewport)){if(c._thumbsHorizontal){c._wrapHeight=c._realWrapSize-c._controlNav.outerHeight()}else{c._wrapWidth=c._realWrapSize-c._controlNav.outerWidth()}}},setThumbsOrientation:function(d,c){var b=this;if(b._thumbsEnabled){b.st.thumbs.orientation=d;b._controlNav.remove();b.slider.removeClass("rsWithThumbsHor rsWithThumbsVer");b._createThumbs();b._controlNav.off(b._downEvent);if(!c){b.updateSliderSize(true)}}},_setThumbsPosition:function(c){var b=this;b._thumbsPosition=c;if(b._useCSS3Transitions){b._thumbsContainer.css(b._xProp,b._tPref1+(b._thumbsHorizontal?(c+b._tPref2+0):(0+b._tPref2+c))+b._tPref3)}else{b._thumbsContainer.css(b._thumbsHorizontal?b._xProp:b._yProp,c)}},_animateThumbsTo:function(h,g,f,e,c){var d=this;if(!d._thumbsNavigation){return}if(!g){g=d.st.thumbs.transitionSpeed}d._thumbsPosition=h;if(d._thumbsAnimTimeout){clearTimeout(d._thumbsAnimTimeout)}if(d._isThumbsAnimating){if(!d._useCSS3Transitions){d._thumbsContainer.stop()}f=true}var b={};d._isThumbsAnimating=true;if(!d._useCSS3Transitions){b[d._thumbsHorizontal?d._xProp:d._yProp]=h+"px";d._thumbsContainer.animate(b,g,f?"easeOutCubic":d.st.easeInOut)}else{b[(d._vendorPref+"transition-duration")]=g+"ms";b[(d._vendorPref+"transition-timing-function")]=f?a.rsCSS3Easing[d.st.easeOut]:a.rsCSS3Easing[d.st.easeInOut];d._thumbsContainer.css(b);d._setThumbsPosition(h)}if(e){d._thumbsPosition=e}d._updateThumbsArrows();d._thumbsAnimTimeout=setTimeout(function(){d._isThumbsAnimating=false;if(c){d._animateThumbsTo(e,c,true);c=null}},g)},_updateThumbsArrows:function(){var b=this;if(b._thumbsArrows){var c="rsThumbsArrowDisabled";if(b._thumbsPosition===b._thumbsMinPosition){b._thumbsArrowLeft.addClass(c)}else{b._thumbsArrowLeft.removeClass(c)}if(b._thumbsPosition===b._thumbsMaxPosition){b._thumbsArrowRight.addClass(c)}else{b._thumbsArrowRight.removeClass(c)}}},_setCurrentThumb:function(i,e){var c=this,h=0,d,g=(i*c._thumbSize+c._thumbSize*2-c._thumbsSpacing+c._thumbsMinPosition),b=Math.floor(c._thumbsPosition/c._thumbSize);if(!c._thumbsNavigation){return}if(g+c._thumbsPosition>c._thumbsViewportSize){if(i===c.numSlides-1){h=1}b=-i+c._visibleThumbsPerView-2+h;d=b*c._thumbSize+(c._thumbsViewportSize%c._thumbSize)+c._thumbsSpacing-c._thumbsMinPosition}else{if(i!==0){if((i-1)*c._thumbSize<=-c._thumbsPosition+c._thumbsMinPosition&&(i-1)<=c.numSlides-c._visibleThumbsPerView){b=-i+1;d=b*c._thumbSize+c._thumbsMinPosition}}else{b=0;d=c._thumbsMinPosition}}if(d!==c._thumbsPosition){var f=(d===undefined)?c._thumbsPosition:d;if(f>c._thumbsMinPosition){c._setThumbsPosition(c._thumbsMinPosition)}else{if(f<c._thumbsMaxPosition){c._setThumbsPosition(c._thumbsMaxPosition)}else{if(d!==undefined){if(!e){c._animateThumbsTo(d)}else{c._setThumbsPosition(d)}}}}}c._updateThumbsArrows()}});a.rsModules.thumbnails=a.rsProto._initThumbs})(jQuery);