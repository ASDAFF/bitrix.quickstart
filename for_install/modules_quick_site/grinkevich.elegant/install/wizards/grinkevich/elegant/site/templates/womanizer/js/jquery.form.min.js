/*!
 * jQuery Form Plugin
 * version: 2.96 (16-FEB-2012)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *	http://www.opensource.org/licenses/mit-license.php
 *	http://www.gnu.org/licenses/gpl.html
 */
;(function(d){d.fn.ajaxSubmit=function(f){if(!this.length){c("ajaxSubmit: skipping submit process - no element selected");return this}var e,w,h,j=this;if(typeof f=="function"){f={success:f}}e=this.attr("method");w=this.attr("action");h=(typeof w==="string")?d.trim(w):"";h=h||window.location.href||"";if(h){h=(h.match(/^([^#]+)/)||[])[1]}f=d.extend(true,{url:h,success:d.ajaxSettings.success,type:e||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},f);var p={};this.trigger("form-pre-serialize",[this,f,p]);if(p.veto){c("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(f.beforeSerialize&&f.beforeSerialize(this,f)===false){c("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var i=f.traditional;if(i===undefined){i=d.ajaxSettings.traditional}var z,u,l,A=this.formToArray(f.semantic);if(f.data){f.extraData=f.data;z=d.param(f.data,i)}if(f.beforeSubmit&&f.beforeSubmit(A,this,f)===false){c("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[A,this,f,p]);if(p.veto){c("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var t=d.param(A,i);if(z){t=(t?(t+"&"+z):z)}if(f.type.toUpperCase()=="GET"){f.url+=(f.url.indexOf("?")>=0?"&":"?")+t;f.data=null}else{f.data=t}var C=[];if(f.resetForm){C.push(function(){j.resetForm()})}if(f.clearForm){C.push(function(){j.clearForm(f.includeHidden)})}if(!f.dataType&&f.target){var g=f.success||function(){};C.push(function(q){var n=f.replaceTarget?"replaceWith":"html";d(f.target)[n](q).each(g,arguments)})}else{if(f.success){C.push(f.success)}}f.success=function(E,q,F){var D=f.context||f;for(var v=0,n=C.length;v<n;v++){C[v].apply(D,[E,q,F||j,j])}};var y=d("input:file:enabled[value]",this);var k=y.length>0;var x="multipart/form-data";var s=(j.attr("enctype")==x||j.attr("encoding")==x);var r=!!(k&&y.get(0).files&&window.FormData);c("fileAPI :"+r);var m=(k||s)&&!r;if(f.iframe!==false&&(f.iframe||m)){if(f.closeKeepAlive){d.get(f.closeKeepAlive,function(){B(A)})}else{B(A)}}else{if((k||s)&&r){f.progress=f.progress||d.noop;o(A)}else{d.ajax(f)}}this.trigger("form-submit-notify",[this,f]);return this;function o(q){var n=new FormData();for(var D=0;D<q.length;D++){if(q[D].type=="file"){continue}n.append(q[D].name,q[D].value)}j.find("input:file:enabled").each(function(){var G=d(this).attr("name"),I=this.files;if(G){for(var H=0;H<I.length;H++){n.append(G,I[H])}}});if(f.extraData){for(var v in f.extraData){n.append(v,f.extraData[v])}}f.data=null;var F=d.extend(true,{},d.ajaxSettings,f,{contentType:false,processData:false,cache:false,type:"POST"});F.data=null;var E=F.beforeSend;F.beforeSend=function(H,G){G.data=n;if(H.upload){H.upload.onprogress=function(I){G.progress(I.position,I.total)}}if(E){E.call(G,H,f)}};d.ajax(F)}function B(ab){var G=j[0],F,X,R,Z,U,I,M,K,L,V,Y,P;var J=!!d.fn.prop;if(ab){if(J){for(X=0;X<ab.length;X++){F=d(G[ab[X].name]);F.prop("disabled",false)}}else{for(X=0;X<ab.length;X++){F=d(G[ab[X].name]);F.removeAttr("disabled")}}}if(d(":input[name=submit],:input[id=submit]",G).length){alert('Error: Form elements must not have name or id of "submit".');return}R=d.extend(true,{},d.ajaxSettings,f);R.context=R.context||R;U="jqFormIO"+(new Date().getTime());if(R.iframeTarget){I=d(R.iframeTarget);V=I.attr("name");if(V==null){I.attr("name",U)}else{U=V}}else{I=d('<iframe name="'+U+'" src="'+R.iframeSrc+'" />');I.css({position:"absolute",top:"-1000px",left:"-1000px"})}M=I[0];K={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var ae=(n==="timeout"?"timeout":"aborted");c("aborting upload... "+ae);this.aborted=1;I.attr("src",R.iframeSrc);K.error=ae;R.error&&R.error.call(R.context,K,ae,n);Z&&d.event.trigger("ajaxError",[K,R,ae]);R.complete&&R.complete.call(R.context,K,ae)}};Z=R.global;if(Z&&!d.active++){d.event.trigger("ajaxStart")}if(Z){d.event.trigger("ajaxSend",[K,R])}if(R.beforeSend&&R.beforeSend.call(R.context,K,R)===false){if(R.global){d.active--}return}if(K.aborted){return}L=G.clk;if(L){V=L.name;if(V&&!L.disabled){R.extraData=R.extraData||{};R.extraData[V]=L.value;if(L.type=="image"){R.extraData[V+".x"]=G.clk_x;R.extraData[V+".y"]=G.clk_y}}}var Q=1;var N=2;function O(ae){var n=ae.contentWindow?ae.contentWindow.document:ae.contentDocument?ae.contentDocument:ae.document;return n}var E=d("meta[name=csrf-token]").attr("content");var D=d("meta[name=csrf-param]").attr("content");if(D&&E){R.extraData=R.extraData||{};R.extraData[D]=E}function W(){var ag=j.attr("target"),ae=j.attr("action");G.setAttribute("target",U);if(!e){G.setAttribute("method","POST")}if(ae!=R.url){G.setAttribute("action",R.url)}if(!R.skipEncodingOverride&&(!e||/post/i.test(e))){j.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(R.timeout){P=setTimeout(function(){Y=true;T(Q)},R.timeout)}function ah(){try{var n=O(M).readyState;c("state = "+n);if(n.toLowerCase()=="uninitialized"){setTimeout(ah,50)}}catch(aj){c("Server abort: ",aj," (",aj.name,")");T(N);P&&clearTimeout(P);P=undefined}}var af=[];try{if(R.extraData){for(var ai in R.extraData){af.push(d('<input type="hidden" name="'+ai+'">').attr("value",R.extraData[ai]).appendTo(G)[0])}}if(!R.iframeTarget){I.appendTo("body");M.attachEvent?M.attachEvent("onload",T):M.addEventListener("load",T,false)}setTimeout(ah,15);G.submit()}finally{G.setAttribute("action",ae);if(ag){G.setAttribute("target",ag)}else{j.removeAttr("target")}d(af).remove()}}if(R.forceSync){W()}else{setTimeout(W,10)}var ac,ad,aa=50,H;function T(ai){if(K.aborted||H){return}try{ad=O(M)}catch(al){c("cannot access response document: ",al);ai=N}if(ai===Q&&K){K.abort("timeout");return}else{if(ai==N&&K){K.abort("server abort");return}}if(!ad||ad.location.href==R.iframeSrc){if(!Y){return}}M.detachEvent?M.detachEvent("onload",T):M.removeEventListener("load",T,false);var ag="success",ak;try{if(Y){throw"timeout"}var af=R.dataType=="xml"||ad.XMLDocument||d.isXMLDoc(ad);c("isXml="+af);if(!af&&window.opera&&(ad.body==null||ad.body.innerHTML=="")){if(--aa){c("requeing onLoad callback, DOM not available");setTimeout(T,250);return}}var am=ad.body?ad.body:ad.documentElement;K.responseText=am?am.innerHTML:null;K.responseXML=ad.XMLDocument?ad.XMLDocument:ad;if(af){R.dataType="xml"}K.getResponseHeader=function(ap){var ao={"content-type":R.dataType};return ao[ap]};if(am){K.status=Number(am.getAttribute("status"))||K.status;K.statusText=am.getAttribute("statusText")||K.statusText}var n=(R.dataType||"").toLowerCase();var aj=/(json|script|text)/.test(n);if(aj||R.textarea){var ah=ad.getElementsByTagName("textarea")[0];if(ah){K.responseText=ah.value;K.status=Number(ah.getAttribute("status"))||K.status;K.statusText=ah.getAttribute("statusText")||K.statusText}else{if(aj){var ae=ad.getElementsByTagName("pre")[0];var an=ad.getElementsByTagName("body")[0];if(ae){K.responseText=ae.textContent?ae.textContent:ae.innerText}else{if(an){K.responseText=an.textContent?an.textContent:an.innerText}}}}}else{if(n=="xml"&&!K.responseXML&&K.responseText!=null){K.responseXML=S(K.responseText)}}try{ac=q(K,n,R)}catch(ai){ag="parsererror";K.error=ak=(ai||ag)}}catch(ai){c("error caught: ",ai);ag="error";K.error=ak=(ai||ag)}if(K.aborted){c("upload aborted");ag=null}if(K.status){ag=(K.status>=200&&K.status<300||K.status===304)?"success":"error"}if(ag==="success"){R.success&&R.success.call(R.context,ac,"success",K);Z&&d.event.trigger("ajaxSuccess",[K,R])}else{if(ag){if(ak==undefined){ak=K.statusText}R.error&&R.error.call(R.context,K,ag,ak);Z&&d.event.trigger("ajaxError",[K,R,ak])}}Z&&d.event.trigger("ajaxComplete",[K,R]);if(Z&&!--d.active){d.event.trigger("ajaxStop")}R.complete&&R.complete.call(R.context,K,ag);H=true;if(R.timeout){clearTimeout(P)}setTimeout(function(){if(!R.iframeTarget){I.remove()}K.responseXML=null},100)}var S=d.parseXML||function(n,ae){if(window.ActiveXObject){ae=new ActiveXObject("Microsoft.XMLDOM");ae.async="false";ae.loadXML(n)}else{ae=(new DOMParser()).parseFromString(n,"text/xml")}return(ae&&ae.documentElement&&ae.documentElement.nodeName!="parsererror")?ae:null};var v=d.parseJSON||function(n){return window["eval"]("("+n+")")};var q=function(ai,ag,af){var ae=ai.getResponseHeader("content-type")||"",n=ag==="xml"||!ag&&ae.indexOf("xml")>=0,ah=n?ai.responseXML:ai.responseText;if(n&&ah.documentElement.nodeName==="parsererror"){d.error&&d.error("parsererror")}if(af&&af.dataFilter){ah=af.dataFilter(ah,ag)}if(typeof ah==="string"){if(ag==="json"||!ag&&ae.indexOf("json")>=0){ah=v(ah)}else{if(ag==="script"||!ag&&ae.indexOf("javascript")>=0){d.globalEval(ah)}}}return ah}}};d.fn.ajaxForm=function(e){e=e||{};e.delegation=e.delegation&&d.isFunction(d.fn.on);if(!e.delegation&&this.length===0){var f={s:this.selector,c:this.context};if(!d.isReady&&f.s){c("DOM not ready, queuing ajaxForm");d(function(){d(f.s,f.c).ajaxForm(e)});return this}c("terminating; zero elements found by selector"+(d.isReady?"":" (DOM not ready)"));return this}if(e.delegation){d(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,e,b).on("click.form-plugin",this.selector,e,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",e,b).bind("click.form-plugin",e,a)};function b(g){var f=g.data;if(!g.isDefaultPrevented()){g.preventDefault();d(this).ajaxSubmit(f)}}function a(j){var i=j.target;var g=d(i);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length==0){return}i=f[0]}var h=this;h.clk=i;if(i.type=="image"){if(j.offsetX!=undefined){h.clk_x=j.offsetX;h.clk_y=j.offsetY}else{if(typeof d.fn.offset=="function"){var k=g.offset();h.clk_x=j.pageX-k.left;h.clk_y=j.pageY-k.top}else{h.clk_x=j.pageX-i.offsetLeft;h.clk_y=j.pageY-i.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)}d.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};d.fn.formToArray=function(s){var r=[];if(this.length===0){return r}var f=this[0];var k=s?f.getElementsByTagName("*"):f.elements;if(!k){return r}var m,l,h,t,g,p,e;for(m=0,p=k.length;m<p;m++){g=k[m];h=g.name;if(!h){continue}if(s&&f.clk&&g.type=="image"){if(!g.disabled&&f.clk==g){r.push({name:h,value:d(g).val(),type:g.type});r.push({name:h+".x",value:f.clk_x},{name:h+".y",value:f.clk_y})}continue}t=d.fieldValue(g,true);if(t&&t.constructor==Array){for(l=0,e=t.length;l<e;l++){r.push({name:h,value:t[l]})}}else{if(t!==null&&typeof t!="undefined"){r.push({name:h,value:t,type:g.type})}}}if(!s&&f.clk){var o=d(f.clk),q=o[0];h=q.name;if(h&&!q.disabled&&q.type=="image"){r.push({name:h,value:o.val()});r.push({name:h+".x",value:f.clk_x},{name:h+".y",value:f.clk_y})}}return r};d.fn.formSerialize=function(e){return d.param(this.formToArray(e))};d.fn.fieldSerialize=function(f){var e=[];this.each(function(){var k=this.name;if(!k){return}var h=d.fieldValue(this,f);if(h&&h.constructor==Array){for(var j=0,g=h.length;j<g;j++){e.push({name:k,value:h[j]})}}else{if(h!==null&&typeof h!="undefined"){e.push({name:this.name,value:h})}}});return d.param(e)};d.fn.fieldValue=function(k){for(var j=[],g=0,e=this.length;g<e;g++){var h=this[g];var f=d.fieldValue(h,k);if(f===null||typeof f=="undefined"||(f.constructor==Array&&!f.length)){continue}f.constructor==Array?d.merge(j,f):j.push(f)}return j};d.fieldValue=function(e,l){var g=e.name,r=e.type,s=e.tagName.toLowerCase();if(l===undefined){l=true}if(l&&(!g||e.disabled||r=="reset"||r=="button"||(r=="checkbox"||r=="radio")&&!e.checked||(r=="submit"||r=="image")&&e.form&&e.form.clk!=e||s=="select"&&e.selectedIndex==-1)){return null}if(s=="select"){var m=e.selectedIndex;if(m<0){return null}var p=[],f=e.options;var j=(r=="select-one");var o=(j?m+1:f.length);for(var h=(j?m:0);h<o;h++){var k=f[h];if(k.selected){var q=k.value;if(!q){q=(k.attributes&&k.attributes.value&&!(k.attributes.value.specified))?k.text:k.value}if(j){return q}p.push(q)}}return p}return d(e).val()};d.fn.clearForm=function(e){return this.each(function(){d("input,select,textarea",this).clearFields(e)})};d.fn.clearFields=d.fn.clearInputs=function(e){var f=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var h=this.type,g=this.tagName.toLowerCase();if(f.test(h)||g=="textarea"||(e&&/hidden/.test(h))){this.value=""}else{if(h=="checkbox"||h=="radio"){this.checked=false}else{if(g=="select"){this.selectedIndex=-1}}}})};d.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};d.fn.enable=function(e){if(e===undefined){e=true}return this.each(function(){this.disabled=!e})};d.fn.selected=function(e){if(e===undefined){e=true}return this.each(function(){var f=this.type;if(f=="checkbox"||f=="radio"){this.checked=e}else{if(this.tagName.toLowerCase()=="option"){var g=d(this).parent("select");if(e&&g[0]&&g[0].type=="select-one"){g.find("option").selected(false)}this.selected=e}}})};d.fn.ajaxSubmit.debug=false;function c(){if(!d.fn.ajaxSubmit.debug){return}var e="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(e)}else{if(window.opera&&window.opera.postError){window.opera.postError(e)}}}})(jQuery);