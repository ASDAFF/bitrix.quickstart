var RSGoPro_DetailBuy1Click=false,RSGoPro_DetailCheaper=false,RSGoPro_AfterLoading=false;function RSGoPro_str_replace(c,b,a){return a.split(c).join(b)}function RSGoPro_OnOfferChangeDetail(a){var c=a.find(".js-add2basketpid").val();var b=a.data("elementid");if(c>0){a.find(".changeimage.imgoffer").hide().removeClass("scrollitem");a.find(".changeimage.imgofferid"+c).show().addClass("scrollitem");a.find(".changeimage.imgofferid"+c).filter(":first").trigger("click");RSGoPro_ScrollReinit(".d_jscrollpane");RSGoPro_ScrollReinit(".popd_jscrollpane");RSGoPro_ScrollReinit(".prs_jscrollpane");setTimeout(function(){a.find(".changeimage:visible:first").trigger("click")},50)}}function RSGoPro_DetailJScrollPaneReinitialize(){setTimeout(function(){var a;$(".d_jscrollpane").parents(".picslider").removeClass("jspHasScroll");$(".d_jscrollpane").each(function(b){a=$(this).data("jsp");a.reinitialise();if($(this).hasClass("jspScrollable")){$(this).parents(".picslider").addClass("jspHasScroll")}});var a;$(".popd_jscrollpane").parents(".picslider").removeClass("jspHasScroll");$(".popd_jscrollpane").each(function(b){a=$(this).data("jsp");a.reinitialise();if($(this).hasClass("jspScrollable")){$(this).parents(".picslider").addClass("jspHasScroll")}});var a;$(".prs_jscrollpane").parents(".prices").removeClass("jspHasScroll");$(".prs_jscrollpane").each(function(b){a=$(this).data("jsp");a.reinitialise();if($(this).hasClass("jspScrollable")){$(this).parents(".prices").addClass("jspHasScroll")}})},50)}function RSGoPro_FancyImagesOnUpdate(){setTimeout(function(){$(".fancygallery").find(".image .max").css("maxHeight",parseInt($(".fancygallery").parents(".fancybox-inner").height())-5);$(".fancygallery").find(".slider .max").css("height",parseInt($(".fancygallery").parents(".fancybox-inner").height())-5-60)},50)}function RSGoPro_FancyChangeImageFix(){var a=$(".fancybox-inner").find(".genimage").attr("src");$(".fancybox-inner").find(".changeimage").removeClass("selected");$(".fancybox-inner").find(".changeimage").each(function(b){if(a==$(this).find("img").data("bigimage")){$(this).addClass("selected");RSGoPro_ScrollGoToElement($(this));return false}})}function RSGoPro_ScrollToSelector(a){var b=$(a).offset().top+"px";if(!RSDevFunc_PHONETABLET){$("html,body").animate({scrollTop:b},500)}else{$("html,body").scrollTop(b)}}$(document).ready(function(){if(RSDevFunc_PHONETABLET){$(".elementdetail").find(".zoom").hide()}$(window).load(function(){setTimeout(function(){var b="/bitrix/components/bitrix/catalog.element/ajax.php";var c={AJAX:"Y",SITE_ID:SITE_ID,PARENT_ID:$(".elementdetail").data("elementid"),PRODUCT_ID:$(".elementdetail").find(".js-add2basketpid").val()};$.ajax({type:"POST",url:b,data:c}).done(function(d){console.warn("Element add to viewed")}).fail(function(){console.warn("Element can't add to viewed")})},500)});$(document).on("click","a.changeimage",function(){var c=$(this);if(c.parents(".d_jscrollpane").length>0){var d=c.parents(".d_jscrollpane")}else{var d=c.parents(".popd_jscrollpane")}d.find("a.changeimage").removeClass("selected");var b=c.addClass("selected").find("img").data("bigimage");if(b!="undefined"&&b!=""){c.parents(".changegenimage").find(".genimage").attr("src",b);RSGoPro_ScrollGoToElement(c)}return false});var a=$(".elementdetail").find(".genimage").attr("src");$(".elementdetail").find(".sliderin").find(".changeimage").removeClass("selected");$(".elementdetail").find(".sliderin").find(".changeimage").each(function(b){if(a==$(this).find("img").data("bigimage")){$(this).addClass("selected");return false}});RSGoPro_ScrollInit(".d_jscrollpane");RSGoPro_ScrollInit(".popd_jscrollpane");RSGoPro_ScrollInit(".prs_jscrollpane");$(window).resize(function(){RSGoPro_ScrollReinit(".d_jscrollpane");RSGoPro_ScrollReinit(".popd_jscrollpane");RSGoPro_ScrollReinit(".prs_jscrollpane")});if(!RSDevFunc_PHONETABLET){$(document).on("click",".glass_lupa",function(){$.fancybox.open($(".fancyimages"),{type:"inline",width:"100%",height:"100%",autoSize:false,padding:20,tpl:{closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"><i class="icon pngicons"></i></a>'},helpers:{title:{type:"inside",position:"top"}},beforeShow:function(){RSGoPro_FancyImagesOnUpdate()},afterShow:function(){RSGoPro_DetailJScrollPaneReinitialize();RSGoPro_FancyChangeImageFix()},onUpdate:function(){RSGoPro_FancyImagesOnUpdate();RSGoPro_DetailJScrollPaneReinitialize()}});return false});$(".genamount:not(.cantopen)").fancybox({maxWidth:800,maxHeight:600,minHeight:25,fitToView:false,openEffect:"none",closeEffect:"none",padding:20,tpl:{closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"><i class="icon pngicons"></i></a>'},helpers:{title:{type:"inside",position:"top"}}})}else{$(document).on("click",".genamount:not(.cantopen)",function(){var b=$(this).attr("href");$(b).toggleClass("noned").removeAttr("style");return false})}$(document).on("click",".tabs .switcher",function(){var e=$(this);var c=e.parents(".tabs");var f=e.attr("href");c.find(".switcher").removeClass("selected");c.find(".content").removeClass("selected");c.find('.switcher[href="'+f+'"]').addClass("selected");c.find(f).addClass("selected");if(RSGoPro_AfterLoading){if(RSDevFunc_PHONETABLET&&e.parent().hasClass("headers")==false){setTimeout(function(){var g=e.offset().top-8;$("html,body").scrollTop(g)},50)}$(document).trigger("detaltabchange");var b=document.body.scrollTop;var d=document.body.scrollLeft;document.location.hash=RSGoPro_str_replace("#","",f);document.body.scrollTop=b;document.body.scrollLeft=d}return false});$(document).on("click",".anchor .switcher",function(){RSGoPro_ScrollToSelector('.contents .switcher[href="'+$(this).attr("href")+'"]');$(document).trigger("detaltabchange");return false});$(window).load(function(){var b=RSDevFunc_GetUrlVars()["result"];if(b){b=b.substr(0,b.indexOf("#"))}if(window.location.hash=="#postform"||(b&&b=="reply")){$(".detailtabs.tabs").find('.switcher[href="#review"]').trigger("click")}else{if($(".detailtabs").find('.switcher[href="'+window.location.hash+'"]').length>0){$(".detailtabs.tabs").find('.switcher[href="'+window.location.hash+'"]').trigger("click")}else{$(".detailtabs.tabs").find(".switcher:first").trigger("click")}}$(".detailtabs.anchor").find(".switcher:first").addClass("selected");RSGoPro_AfterLoading=true});$(window).on("hashchange",function(){if(RSGoPro_AfterLoading){$(".detailtabs.tabs").find('.switcher[href="'+window.location.hash+'"]').trigger("click")}});$(document).on("click",".add2review",function(b){b.stopPropagation();$("#detailreviews").find(".reviewform").toggleClass("noned");return false});$(document).on("RSGoProOnOfferChange",function(c,b){RSGoPro_OnOfferChangeDetail(b);if($(".elementdetail").find(".soloprice").length>0){if($(".elementdetail").find(".soloprice").find(".discount").html()==""){$(".elementdetail").find(".soloprice").find(".hideifzero").hide()}else{$(".elementdetail").find(".soloprice").find(".hideifzero").show()}}});$(document).on("click",".buy1click.detail",function(b){RSGoPro_DetailBuy1Click=true});$(document).on("RSGoProOnFancyBeforeShow",function(){if(RSGoPro_DetailBuy1Click){var b="";b=BX.message("RSGoPro_PROD_ID")+": "+$(".elementdetail").find(".js-add2basketpid").val()+"\n"+BX.message("RSGoPro_PROD_NAME")+": "+$(".elementdetail").data("elementname")+"\n"+BX.message("RSGoPro_PROD_LINK")+": "+window.location.href+"\n-----------------------------------------------------";$(".fancybox-inner").find('textarea[name="RS_AUTHOR_ORDER_LIST"]').text(b)}RSGoPro_DetailBuy1Click=false});$(document).on("click",".cheaper.detail",function(b){RSGoPro_DetailCheaper=true});$(document).on("RSGoProOnFancyBeforeShow",function(){if(RSGoPro_DetailCheaper){var b="";b=BX.message("RSGoPro_DETAIL_CHEAPER_TITLE")+"\n"+ +"\n"+BX.message("RSGoPro_DETAIL_PROD_ID")+": "+$(".elementdetail").find(".js-add2basketpid").val()+"\n"+BX.message("RSGoPro_DETAIL_PROD_NAME")+": "+$(".elementdetail").data("elementname")+"\n"+BX.message("RSGoPro_DETAIL_PROD_LINK")+": "+window.location.href+"\n-----------------------------------------------------";$(".fancybox-inner").find('textarea[name="RS_AUTHOR_COMMENT"]').text(b)}RSGoPro_DetailCheaper=false});$(document).on("click",".go2detailfrompreview",function(){$(".detailtabs.tabs").find('.switcher[href="#detailtext"]').trigger("click");RSGoPro_ScrollToSelector('.switcher[href="#detailtext"]');return false})});