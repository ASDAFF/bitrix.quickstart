(function($,undefined){$.Slider=function(options,element){this.$el=$(element);this._init(options)};$.Slider.defaults={current:0,bgincrement:450,autoplay:true,interval:6000};$.Slider.prototype={_init:function(options){this.options=$.extend(true,{},$.Slider.defaults,options);this.$slides=this.$el.children('div.klondike-slide');this.slidesCount=this.$slides.length;this.current=this.options.current;if(this.current<0||this.current>=this.slidesCount){this.current=0}this.$slides.eq(this.current).addClass('klondike-slide-current');var $navigation=$('<nav class="klondike-dots"/>');for(var i=0;i<this.slidesCount;++i){$navigation.append('<span/>')}$navigation.appendTo(this.$el);this.$pages=this.$el.find('nav.klondike-dots > span');this.$navNext=this.$el.find('span.klondike-arrows-next');this.$navPrev=this.$el.find('span.klondike-arrows-prev');this.isAnimating=false;this.bgpositer=0;this.cssAnimations=Modernizr.cssanimations;this.cssTransitions=Modernizr.csstransitions;if(!this.cssAnimations||!this.cssAnimations){this.$el.addClass('klondike-slider-fb')}this._updatePage();this._loadEvents();if(this.options.autoplay){this._startSlideshow()}},_navigate:function(page,dir){var $current=this.$slides.eq(this.current),$next,_self=this;if(this.current===page||this.isAnimating)return false;this.isAnimating=true;var classTo,classFrom,d;if(!dir){(page>this.current)?d='next':d='prev'}else{d=dir}if(this.cssAnimations&&this.cssAnimations){if(d==='next'){classTo='klondike-slide-toleft';classFrom='klondike-slide-fromright';++this.bgpositer}else{classTo='klondike-slide-toright';classFrom='klondike-slide-fromleft';--this.bgpositer}this.$el.css('background-position',this.bgpositer*this.options.bgincrement+'% 0%')}this.current=page;$next=this.$slides.eq(this.current);if(this.cssAnimations&&this.cssAnimations){var rmClasses='klondike-slide-toleft klondike-slide-toright klondike-slide-fromleft klondike-slide-fromright';$current.removeClass(rmClasses);$next.removeClass(rmClasses);$current.addClass(classTo);$next.addClass(classFrom);$current.removeClass('klondike-slide-current');$next.addClass('klondike-slide-current')}if(!this.cssAnimations||!this.cssAnimations){$next.css('left',(d==='next')?'100%':'-100%').stop().animate({left:'0%'},1000,function(){_self.isAnimating=false});$current.stop().animate({left:(d==='next')?'-100%':'100%'},1000,function(){$current.removeClass('klondike-slide-current')})}this._updatePage()},_updatePage:function(){this.$pages.removeClass('klondike-dots-current');this.$pages.eq(this.current).addClass('klondike-dots-current')},_startSlideshow:function(){var _self=this;this.slideshow=setTimeout(function(){var page=(_self.current<_self.slidesCount-1)?page=_self.current+1:page=0;_self._navigate(page,'next');if(_self.options.autoplay){_self._startSlideshow()}},this.options.interval)},_loadEvents:function(){var _self=this;this.$pages.on('click.cslider',function(event){if(_self.options.autoplay){clearTimeout(_self.slideshow);_self.options.autoplay=false}_self._navigate($(this).index());return false});this.$navNext.on('click.cslider',function(event){if(_self.options.autoplay){clearTimeout(_self.slideshow);_self.options.autoplay=false}var page=(_self.current<_self.slidesCount-1)?page=_self.current+1:page=0;_self._navigate(page,'next');return false});this.$navPrev.on('click.cslider',function(event){if(_self.options.autoplay){clearTimeout(_self.slideshow);_self.options.autoplay=false}var page=(_self.current>0)?page=_self.current-1:page=_self.slidesCount-1;_self._navigate(page,'prev');return false});if(this.cssTransitions){this.$el.on('webkitTransitionEnd.cslider transitionend.cslider OTransitionEnd.cslider',function(event){if(event.target.id===_self.$el.attr('id'))_self.isAnimating=false})}}};var logError=function(message){if(this.console){console.error(message)}};$.fn.cslider=function(options){if(typeof options==='string'){var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,'cslider');if(!instance){logError("cannot call methods on cslider prior to initialization; "+"attempted to call method '"+options+"'");return}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for cslider instance");return}instance[options].apply(instance,args)})}else{this.each(function(){var instance=$.data(this,'cslider');if(!instance){$.data(this,'cslider',new $.Slider(options,this))}})}return this}})(jQuery);