var RSGOPRO_PopupPrefix="rsgppopup_",RSGOPRO_DivsLeft='<div class="outer"><div class="inner">',RSGOPRO_DivsRight="</div></div>",RSGOPRO_ParentsObj;function RSGoPro_OnOfferChangePopup(a){var c=a.find(".js-add2basketpid").val();var b=a.data("elementid");if(c>0){if(RSGoPro_OFFERS[b].OFFERS[c].IMAGES[0].src&&RSGoPro_OFFERS[b].OFFERS[c].IMAGES[0].src.indexOf("redsign_devfunc_nophoto")<0&&a.find(".pic img").length>0){a.find(".pic img").attr("src",RSGoPro_OFFERS[b].OFFERS[c].IMAGES[0].src)}}}function RSGoProPricesJScrollPaneReinitialize(){setTimeout(function(){var a;$(".prs_jscrollpane").parents(".prices").removeClass("jspHasScroll");$(".prs_jscrollpane").each(function(b){a=$(this).data("jsp");a.reinitialise();if($(this).hasClass("jspScrollable")){$(this).parents(".prices").addClass("jspHasScroll")}})},50)}function RSGoPro_FixPreviewText(a){var b=350;var f=18;var d=$("#"+RSGOPRO_PopupPrefix+a).find(".block.right").outerHeight(true);if(d!=null){if(d>b){var e=$("#"+RSGOPRO_PopupPrefix+a).find(".description").find(".text");var c=Math.floor((e.outerHeight(true)-(d-b))/f)*f;e.css("maxHeight",c+"px")}}}function RSGoPro_GoPopup(a,b){a=parseInt(a);RSGOPRO_ParentsObj=b;if(a>0){if($("#"+RSGOPRO_PopupPrefix+a).length>0){RSGoPro_ShowPopup(a)}else{RSGoPro_AddPopup(a)}}else{console.warn("GoPopup: element_id is empty")}}function RSGoPro_ShowPopup(a){RSGoPro_ChangePosition(a);$("#"+RSGOPRO_PopupPrefix+a).fadeIn("fast",function(){RSGoPro_FixPreviewText(a);RSGoPro_SetSet();RSGoPro_ScrollReinit(".elementpopupinner .prs_jscrollpane",1)})}function RSGoPro_HidePopup(a){$("#"+RSGOPRO_PopupPrefix+a).fadeOut("fast",function(){})}function RSGoPro_ChangePosition(b){var c;if(RSGOPRO_ParentsObj.find("td.name").outerWidth(true)>5){c=RSGOPRO_ParentsObj.find(".js-position")}else{c=RSGOPRO_ParentsObj.parents(".artables").find(".js-name"+b).find(".js-position")}var a=c.position().left+c.outerWidth(true)+20;$("#"+RSGOPRO_PopupPrefix+b).css({top:c.position().top+"px",left:a+"px"})}function RSGoPro_HideAllPopup(){$(".rsgppopup:visible").fadeOut("fast",function(){})}function RSGoPro_AddPopup(a,d){var b=SITE_DIR+SITE_CATALOG_PATH+"/?AJAX_CALL=Y&action=rsgppopup&element_id="+a+"";var c='<div id="'+RSGOPRO_PopupPrefix+a+'" class="rsgppopup" style="display:none;">'+RSGOPRO_DivsLeft+'<div class="loading"></div>'+RSGOPRO_DivsRight+"</div>";$("body").append(c);RSGoPro_ShowPopup(a);$.ajax({url:b}).done(function(e){$("#"+RSGOPRO_PopupPrefix+a).find(".inner").html(e);RSGoPro_SetSet();RSGoPro_FixPreviewText(a);if($(".elementpopupinner .prs_jscrollpane").length>0){RSGoPro_ScrollInit(".elementpopupinner .prs_jscrollpane");$(window).resize(function(){RSGoPro_ScrollReinit(".elementpopupinner .prs_jscrollpane",1)})}}).fail(function(){console.warn("Popup: wrong ajax request")})}$(document).ready(function(){$(document).on("keydown",function(a){if(a.keyCode==27){RSGoPro_HideAllPopup()}});$(document).on("click",function(a){if($(a.target).parents(".rsgppopup").length>0){}else{RSGoPro_HideAllPopup()}});$(window).resize(function(){RSGoPro_HideAllPopup()});$(document).on("RSGoProOnOfferChange",function(b,a){RSGoPro_OnOfferChangePopup(a)})});