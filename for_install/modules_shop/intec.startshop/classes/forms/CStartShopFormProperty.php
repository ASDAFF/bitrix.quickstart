<? $GLOBALS['_4057601_']=Array('def' .'i' .'n' .'e','define','def' .'i' .'n' .'e','defi' .'ne','define','d' .'e' .'fine','define','de' .'fin' .'e','i' .'n_arr' .'a' .'y','is_' .'a' .'rray','i' .'n_array','is_array','us' .'o' .'r' .'t','intv' .'al','in' .'tval','s' .'erialize','intva' .'l','' .'i' .'nt' .'val','is_ar' .'ray','intval','in' .'_' .'array','in_array','' .'is_ar' .'ray','' .'usort','intval','intval','seria' .'li' .'z' .'e','is_a' .'rray','intval','' .'in_arr' .'ay','arra' .'y_key' .'s','in_arr' .'ay','in_arr' .'ay','in' .'_a' .'r' .'ray','in' .'_' .'arra' .'y','' .'preg_re' .'p' .'la' .'ce','unse' .'riali' .'z' .'e','' .'array_ke' .'ys','in' .'tval'); ?><? function _1833599501($i){$a=Array('STARTSHOP_FORM_PROPERTY_TYPE_TEXT','STARTSHOP_FORM_PROPERTY_TYPE_TEXTAREA','STARTSHOP_FORM_PROPERTY_TYPE_RADIO','STARTSHOP_FORM_PROPERTY_TYPE_CHECKBOX','STARTSHOP_FORM_PROPERTY_TYPE_SELECT','STARTSHOP_FORM_PROPERTY_TYPE_MULTISELECT','STARTSHOP_FORM_PROPERTY_TYPE_PASSWORD','STARTSHOP_FORM_PROPERTY_TYPE_HIDDEN','LANG','TYPE','TYPE','DATA','TYPE','DATA','VALUES','DATA','VALUES','SORT','SORT','DATA','VALUES','DATA','DATA','DATA','FORM','LANG','CODE','CODE','CODE','FORM','FORM','FORM','TYPE','TYPE','TYPE','FORM','FORM','FORM','CODE','FORM','CODE','CODE','FORM','FORM','CODE','CODE','CODE','CODE','CODE','FORM','FORM','FORM','FORM','FORM','DATA','DATA','TYPE','DATA','VALUES','DATA','VALUES','SORT','SORT','DATA','VALUES','DATA','DATA','DATA','FORM','FORM','FORM','FORM','/^(>=|<=|=|!|>|<)/','','DATA','LANG','ID');return $a[$i];} ?><? $GLOBALS['_4057601_'][0](_1833599501(0),round(0));$GLOBALS['_4057601_'][1](_1833599501(1),round(0+0.33333333333333+0.33333333333333+0.33333333333333));$GLOBALS['_4057601_'][2](_1833599501(2),round(0+0.4+0.4+0.4+0.4+0.4));$GLOBALS['_4057601_'][3](_1833599501(3),round(0+0.6+0.6+0.6+0.6+0.6));$GLOBALS['_4057601_'][4](_1833599501(4),round(0+1+1+1+1));$GLOBALS['_4057601_'][5](_1833599501(5),round(0+1.6666666666667+1.6666666666667+1.6666666666667));$GLOBALS['_4057601_'][6](_1833599501(6),round(0+1.2+1.2+1.2+1.2+1.2));$GLOBALS['_4057601_'][7](_1833599501(7),round(0+1.75+1.75+1.75+1.75));class CStartShopFormProperty extends CStartShop implements CStartShopInterface{private static $arFieldsEditable=array('CODE','FORM','SORT','ACTIVE','REQUIRED','READONLY','TYPE','DATA');public static function getArFieldsEditable(){return static::$arFieldsEditable;}private static $arFieldsFiltering=array('ID','CODE','FORM','SORT','ACTIVE','READONLY','REQUIRED','TYPE','DATA');public static function getArFieldsFiltering(){return static::$arFieldsFiltering;}private static $Language;private static function Language(){if(!(static::$Language instanceof CStartShopDBTableModule)){static::$Language=new CStartShopDBTableModule('startshop_form_properties_language','PROPERTY','LID',array('NAME'));}return static::$Language;}public static function Add($_0){if(empty($_0['CODE'])|| empty($_0['FORM']))return false;$_1=(bool)CStartShopForm::GetById($_0['FORM'])->Fetch();if(!$_1)return false;$_2=$_0[_1833599501(8)];$_0=CStartShopUtil::ArrayFilter($_0,function($_3){return $GLOBALS['_4057601_'][8]($_3,CStartShopFormProperty::getArFieldsEditable());},STARTSHOP_UTIL_ARRAY_FILTER_USE_KEY);if(!$GLOBALS['_4057601_'][9]($_2))$_2=array();$_4=(bool)static::GetList(array(),array('CODE'=> $_0['CODE'],'FORM'=> $_0['FORM']))->Fetch();if($_4)return false;if($_0[_1833599501(9)]<round(0)|| $_0[_1833599501(10)]>round(0+2.3333333333333+2.3333333333333+2.3333333333333))return false;if(!empty($_0[_1833599501(11)])){if($GLOBALS['_4057601_'][10]($_0[_1833599501(12)],array(STARTSHOP_FORM_PROPERTY_TYPE_RADIO,STARTSHOP_FORM_PROPERTY_TYPE_SELECT,STARTSHOP_FORM_PROPERTY_TYPE_MULTISELECT))){if($GLOBALS['_4057601_'][11]($_0[_1833599501(13)][_1833599501(14)])){$GLOBALS['_4057601_'][12]($_0[_1833599501(15)][_1833599501(16)],function($_5,$_6){$_7=$GLOBALS['_4057601_'][13]($_5[_1833599501(17)]);$_8=$GLOBALS['_4057601_'][14]($_6[_1833599501(18)]);if($_7 == $_8)return round(0);if($_7<$_8){return-round(0+0.2+0.2+0.2+0.2+0.2);}else{return round(0+1);}});}else{$_0[_1833599501(19)][_1833599501(20)]=array();}}$_0[_1833599501(21)]=$GLOBALS['_4057601_'][15]($_0[_1833599501(22)]);}else{$_0[_1833599501(23)]=false;}$_9=CStartShopDBQueryBX::Insert()->Into('startshop_form_properties')->Values($_0)->Execute();if($_9){static::Language()->Set($_9,$_2);CStartShopForm::UpdateEventTypes($GLOBALS['_4057601_'][16]($_0[_1833599501(24)]));return $_9;}return false;}public static function Update($_10,$_0){$_10=$GLOBALS['_4057601_'][17]($_10);$_2=$_0[_1833599501(25)];$_4=false;$_11=static::GetByID($_10)->Fetch();if(empty($_11))return false;if(!$GLOBALS['_4057601_'][18]($_2))$_2=false;if(isset($_0[_1833599501(26)])&& empty($_0[_1833599501(27)]))unset($_0[_1833599501(28)]);if(isset($_0[_1833599501(29)])&& empty($_0[_1833599501(30)]))unset($_0[_1833599501(31)]);if(isset($_0[_1833599501(32)]))if($_0[_1833599501(33)]<round(0)|| $_0[_1833599501(34)]>round(0+2.3333333333333+2.3333333333333+2.3333333333333))return false;$_12=$_11[_1833599501(35)];if(isset($_0[_1833599501(36)])){$_12=$GLOBALS['_4057601_'][19]($_0[_1833599501(37)]);if(!(bool)CStartShopForm::GetByID($_0['FORM'])->Fetch())return false;}if(isset($_0[_1833599501(38)])|| isset($_0[_1833599501(39)]))if($_0[_1833599501(40)]!= $_11[_1833599501(41)]|| $_0[_1833599501(42)]!= $_11[_1833599501(43)]){$_13=array();if(isset($_0[_1833599501(44)])){$_13[_1833599501(45)]=$_0[_1833599501(46)];}else{$_13[_1833599501(47)]=$_11[_1833599501(48)];}if(isset($_0[_1833599501(49)])){$_13[_1833599501(50)]=$_0[_1833599501(51)];}else{$_13[_1833599501(52)]=$_11[_1833599501(53)];}$_4=(bool)static::GetList(array(),$_13)->Fetch();unset($_13);}if($_4)return false;$_0=CStartShopUtil::ArrayFilter($_0,function($_3){return $GLOBALS['_4057601_'][20]($_3,CStartShopFormProperty::getArFieldsEditable());},STARTSHOP_UTIL_ARRAY_FILTER_USE_KEY);if(isset($_0[_1833599501(54)]))if(!empty($_0[_1833599501(55)])){if($GLOBALS['_4057601_'][21]($_0[_1833599501(56)],array(STARTSHOP_FORM_PROPERTY_TYPE_RADIO,STARTSHOP_FORM_PROPERTY_TYPE_SELECT,STARTSHOP_FORM_PROPERTY_TYPE_MULTISELECT))){if($GLOBALS['_4057601_'][22]($_0[_1833599501(57)][_1833599501(58)])){$GLOBALS['_4057601_'][23]($_0[_1833599501(59)][_1833599501(60)],function($_5,$_6){$_7=$GLOBALS['_4057601_'][24]($_5[_1833599501(61)]);$_8=$GLOBALS['_4057601_'][25]($_6[_1833599501(62)]);if($_7 == $_8)return round(0);if($_7<$_8){return-round(0+0.25+0.25+0.25+0.25);}else{return round(0+1);}});}else{$_0[_1833599501(63)][_1833599501(64)]=array();}}$_0[_1833599501(65)]=$GLOBALS['_4057601_'][26]($_0[_1833599501(66)]);}else{$_0[_1833599501(67)]=false;}if(!empty($_0))CStartShopDBQueryBX::Update()->Tables('startshop_form_properties')->Values($_0)->Where(array('ID'=> $_10))->Execute();if($GLOBALS['_4057601_'][27]($_2))static::Language()->Set($_10,$_2);CStartShopForm::UpdateEventTypes($_12);return true;}public static function Delete($_10){$_10=$GLOBALS['_4057601_'][28]($_10);$_14=static::GetByID($_10)->Fetch();CStartShopDBQueryBX::Delete()->From('startshop_form_properties')->Where(array('ID'=> $_10))->Execute();static::Language()->Set($_10);CStartShopFormResult::DeletePropertiesByFilter(array('PROPERTY'=> $_10));if(!empty($_14))CStartShopForm::UpdateEventTypes($_14['FORM']);return true;}public static function DeleteByFilter($_15=array()){$_15=CStartShopUtil::ArrayFilter($_15,function($_3){return $GLOBALS['_4057601_'][29]($_3,CStartShopFormProperty::getArFieldsFiltering());},STARTSHOP_UTIL_ARRAY_FILTER_USE_KEY);$_16=CStartShopUtil::DBResultToArray(static::GetList(array(),$_15),'ID');$_17=$GLOBALS['_4057601_'][30]($_16);$_18=array();foreach($_16 as $_11)if(!$GLOBALS['_4057601_'][31]($_11[_1833599501(68)],$_18))$_18[]=$_11[_1833599501(69)];CStartShopDBQueryBX::Delete()->From('startshop_form_properties')->Where($_15)->Execute();if(!empty($_17)){static::Language()->Set($_17);CStartShopFormResult::DeletePropertiesByFilter(array('PROPERTY'=> $_17));return $_17;}foreach($_18 as $_12)CStartShopForm::UpdateEventTypes($_12);return false;}public static function DeleteAll(){$_16=CStartShopUtil::DBResultToArray(static::GetList(),'ID');$_18=array();foreach($_16 as $_11)if(!$GLOBALS['_4057601_'][32]($_11[_1833599501(70)],$_18))$_18[]=$_11[_1833599501(71)];CStartShopDBQueryBX::Delete()->From('startshop_form_properties')->Execute();static::Language()->Set();CStartShopFormResult::DeletePropertiesAll();foreach($_18 as $_12)CStartShopForm::UpdateEventTypes($_12);return true;}public static function GetList($_19=array(),$_15=array()){$_16=array();$_19=CStartShopUtil::ArrayFilter($_19,function($_3){return $GLOBALS['_4057601_'][33]($_3,CStartShopFormProperty::getArFieldsFiltering());},STARTSHOP_UTIL_ARRAY_FILTER_USE_KEY);$_15=CStartShopUtil::ArrayFilter($_15,function($_3){return $GLOBALS['_4057601_'][34]($GLOBALS['_4057601_'][35](_1833599501(72),_1833599501(73),$_3),CStartShopFormProperty::getArFieldsFiltering());},STARTSHOP_UTIL_ARRAY_FILTER_USE_KEY);$_20=CStartShopDBQueryBX::Select()->From('startshop_form_properties')->Where($_15)->OrderBy($_19)->Execute();while($_11=$_20->Fetch()){$_11['DATA']=$GLOBALS['_4057601_'][36]($_11[_1833599501(74)]);$_11[_1833599501(75)]=array();$_16[$_11[_1833599501(76)]]=$_11;}if(!empty($_16)){$_17=$GLOBALS['_4057601_'][37]($_16);$_21=static::Language()->Get(array('LID'=> 'ASC'),$_17);while($_22=$_21->Fetch())$_16[$_22['PROPERTY']]['LANG'][$_22['LID']]=array("NAME"=> $_22['NAME']);}return CStartShopUtil::ArrayToDBResult($_16);}public static function GetByID($_10){$_10=$GLOBALS['_4057601_'][38]($_10);return static::GetList(array(),array('ID'=> $_10));}} ?>
