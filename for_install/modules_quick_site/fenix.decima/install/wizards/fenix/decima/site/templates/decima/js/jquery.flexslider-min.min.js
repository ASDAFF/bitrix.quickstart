(function(b){b.flexslider=function(x,a){var z=b(x),p=b.extend({},b.flexslider.defaults,a),u=p.namespace,s=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch,y=(s)?"touchend":"click",t=p.direction==="vertical",r=p.reverse,o=(p.itemWidth>0),v=p.animation==="fade",q=p.asNavFor!=="",w={};b.data(x,"flexslider",z);w={init:function(){z.animating=false;z.currentSlide=p.startAt;z.animatingTo=z.currentSlide;z.atEnd=(z.currentSlide===0||z.currentSlide===z.last);z.containerSelector=p.selector.substr(0,p.selector.search(" "));z.slides=b(p.selector,z);z.container=b(z.containerSelector,z);z.count=z.slides.length;z.syncExists=b(p.sync).length>0;if(p.animation==="slide"){p.animation="swing"}z.prop=(t)?"top":"marginLeft";z.args={};z.manualPause=false;z.transitions=!p.video&&!v&&p.useCSS&&(function(){var c=document.createElement("div"),d=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var e in d){if(c.style[d[e]]!==undefined){z.pfx=d[e].replace("Perspective","").toLowerCase();z.prop="-"+z.pfx+"-transform";return true}}return false}());if(p.controlsContainer!==""){z.controlsContainer=b(p.controlsContainer).length>0&&b(p.controlsContainer)}if(p.manualControls!==""){z.manualControls=b(p.manualControls).length>0&&b(p.manualControls)}if(p.randomize){z.slides.sort(function(){return(Math.round(Math.random())-0.5)});z.container.empty().append(z.slides)}z.doMath();if(q){w.asNav.setup()}z.setup("init");if(p.controlNav){w.controlNav.setup()}if(p.directionNav){w.directionNav.setup()}if(p.keyboard&&(b(z.containerSelector).length===1||p.multipleKeyboard)){b(document).bind("keyup",function(d){var e=d.keyCode;if(!z.animating&&(e===39||e===37)){var c=(e===39)?z.getTarget("next"):(e===37)?z.getTarget("prev"):false;z.flexAnimate(c,p.pauseOnAction)}})}if(p.mousewheel){z.bind("mousewheel",function(e,c,f,g){e.preventDefault();var d=(c<0)?z.getTarget("next"):z.getTarget("prev");z.flexAnimate(d,p.pauseOnAction)})}if(p.pausePlay){w.pausePlay.setup()}if(p.slideshow){if(p.pauseOnHover){z.hover(function(){if(!z.manualPlay&&!z.manualPause){z.pause()}},function(){if(!z.manualPause&&!z.manualPlay){z.play()}})}(p.initDelay>0)?setTimeout(z.play,p.initDelay):z.play()}if(s&&p.touch){w.touch()}if(!v||(v&&p.smoothHeight)){b(window).bind("resize focus",w.resize)}setTimeout(function(){p.start(z)},200)},asNav:{setup:function(){z.asNav=true;z.animatingTo=Math.floor(z.currentSlide/z.move);z.currentItem=z.currentSlide;z.slides.removeClass(u+"active-slide").eq(z.currentItem).addClass(u+"active-slide");z.slides.click(function(c){c.preventDefault();var d=b(this),e=d.index();if(!b(p.asNavFor).data("flexslider").animating&&!d.hasClass("active")){z.direction=(z.currentItem<e)?"next":"prev";z.flexAnimate(e,p.pauseOnAction,false,true,true)}})}},controlNav:{setup:function(){if(!z.manualControls){w.controlNav.setupPaging()}else{w.controlNav.setupManual()}},setupPaging:function(){var d=(p.controlNav==="thumbnails")?"control-thumbs":"control-paging",f=1,c;z.controlNavScaffold=b('<ol class="'+u+"control-nav "+u+d+'"></ol>');if(z.pagingCount>1){for(var e=0;e<z.pagingCount;e++){c=(p.controlNav==="thumbnails")?'<img src="'+z.slides.eq(e).attr("data-thumb")+'"/>':"<a>"+f+"</a>";z.controlNavScaffold.append("<li>"+c+"</li>");f++}}(z.controlsContainer)?b(z.controlsContainer).append(z.controlNavScaffold):z.append(z.controlNavScaffold);w.controlNav.set();w.controlNav.active();z.controlNavScaffold.delegate("a, img",y,function(i){i.preventDefault();var g=b(this),h=z.controlNav.index(g);if(!g.hasClass(u+"active")){z.direction=(h>z.currentSlide)?"next":"prev";z.flexAnimate(h,p.pauseOnAction)}});if(s){z.controlNavScaffold.delegate("a","click touchstart",function(g){g.preventDefault()})}},setupManual:function(){z.controlNav=z.manualControls;w.controlNav.active();z.controlNav.live(y,function(e){e.preventDefault();var c=b(this),d=z.controlNav.index(c);if(!c.hasClass(u+"active")){(d>z.currentSlide)?z.direction="next":z.direction="prev";z.flexAnimate(d,p.pauseOnAction)}});if(s){z.controlNav.live("click touchstart",function(c){c.preventDefault()})}},set:function(){var c=(p.controlNav==="thumbnails")?"img":"a";z.controlNav=b("."+u+"control-nav li "+c,(z.controlsContainer)?z.controlsContainer:z)},active:function(){z.controlNav.removeClass(u+"active").eq(z.animatingTo).addClass(u+"active")},update:function(d,c){if(z.pagingCount>1&&d==="add"){z.controlNavScaffold.append(b("<li><a>"+z.count+"</a></li>"))}else{if(z.pagingCount===1){z.controlNavScaffold.find("li").remove()}else{z.controlNav.eq(c).closest("li").remove()}}w.controlNav.set();(z.pagingCount>1&&z.pagingCount!==z.controlNav.length)?z.update(c,d):w.controlNav.active()}},directionNav:{setup:function(){var c=b('<ul class="'+u+'direction-nav"><li><a class="'+u+'prev" href="#">'+p.prevText+'</a></li><li><a class="'+u+'next" href="#">'+p.nextText+"</a></li></ul>");if(z.controlsContainer){b(z.controlsContainer).append(c);z.directionNav=b("."+u+"direction-nav li a",z.controlsContainer)}else{z.append(c);z.directionNav=b("."+u+"direction-nav li a",z)}w.directionNav.update();z.directionNav.bind(y,function(e){e.preventDefault();var d=(b(this).hasClass(u+"next"))?z.getTarget("next"):z.getTarget("prev");z.flexAnimate(d,p.pauseOnAction)});if(s){z.directionNav.bind("click touchstart",function(d){d.preventDefault()})}},update:function(){var c=u+"disabled";if(z.pagingCount===1){z.directionNav.addClass(c)}else{if(!p.animationLoop){if(z.animatingTo===0){z.directionNav.removeClass(c).filter("."+u+"prev").addClass(c)}else{if(z.animatingTo===z.last){z.directionNav.removeClass(c).filter("."+u+"next").addClass(c)}else{z.directionNav.removeClass(c)}}}else{z.directionNav.removeClass(c)}}}},pausePlay:{setup:function(){var c=b('<div class="'+u+'pauseplay"><a></a></div>');if(z.controlsContainer){z.controlsContainer.append(c);z.pausePlay=b("."+u+"pauseplay a",z.controlsContainer)}else{z.append(c);z.pausePlay=b("."+u+"pauseplay a",z)}w.pausePlay.update((p.slideshow)?u+"pause":u+"play");z.pausePlay.bind(y,function(d){d.preventDefault();if(b(this).hasClass(u+"pause")){z.manualPause=true;z.manualPlay=false;z.pause()}else{z.manualPause=false;z.manualPlay=true;z.play()}});if(s){z.pausePlay.bind("click touchstart",function(d){d.preventDefault()})}},update:function(c){(c==="play")?z.pausePlay.removeClass(u+"pause").addClass(u+"play").text(p.playText):z.pausePlay.removeClass(u+"play").addClass(u+"pause").text(p.pauseText)}},touch:function(){var k,c,e,j,g,i,l=false;x.addEventListener("touchstart",d,false);function d(m){if(z.animating){m.preventDefault()}else{if(m.touches.length===1){z.pause();j=(t)?z.h:z.w;i=Number(new Date());e=(o&&r&&z.animatingTo===z.last)?0:(o&&r)?z.limit-(((z.itemW+p.itemMargin)*z.move)*z.animatingTo):(o&&z.currentSlide===z.last)?z.limit:(o)?((z.itemW+p.itemMargin)*z.move)*z.currentSlide:(r)?(z.last-z.currentSlide+z.cloneOffset)*j:(z.currentSlide+z.cloneOffset)*j;k=(t)?m.touches[0].pageY:m.touches[0].pageX;c=(t)?m.touches[0].pageX:m.touches[0].pageY;x.addEventListener("touchmove",f,false);x.addEventListener("touchend",h,false)}}}function f(m){g=(t)?k-m.touches[0].pageY:k-m.touches[0].pageX;l=(t)?(Math.abs(g)<Math.abs(m.touches[0].pageX-c)):(Math.abs(g)<Math.abs(m.touches[0].pageY-c));if(!l||Number(new Date())-i>500){m.preventDefault();if(!v&&z.transitions){if(!p.animationLoop){g=g/((z.currentSlide===0&&g<0||z.currentSlide===z.last&&g>0)?(Math.abs(g)/j+2):1)}z.setProps(e+g,"setTouch")}}}function h(m){x.removeEventListener("touchmove",f,false);if(z.animatingTo===z.currentSlide&&!l&&!(g===null)){var n=(r)?-g:g,B=(n>0)?z.getTarget("next"):z.getTarget("prev");if(z.canAdvance(B)&&(Number(new Date())-i<550&&Math.abs(n)>50||Math.abs(n)>j/2)){z.flexAnimate(B,p.pauseOnAction)}else{if(!v){z.flexAnimate(z.currentSlide,p.pauseOnAction,true)}}}x.removeEventListener("touchend",h,false);k=null;c=null;g=null;e=null}},resize:function(){if(!z.animating&&z.is(":visible")){if(!o){z.doMath()}if(v){w.smoothHeight()}else{if(o){z.slides.width(z.computedW);z.update(z.pagingCount);z.setProps()}else{if(t){z.viewport.height(z.h);z.setProps(z.h,"setTotal")}else{if(p.smoothHeight){w.smoothHeight()}z.newSlides.width(z.computedW);z.setProps(z.computedW,"setTotal")}}}}},smoothHeight:function(d){if(!t||v){var c=(v)?z:z.viewport;(d)?c.animate({height:z.slides.eq(z.animatingTo).height()},d):c.height(z.slides.eq(z.animatingTo).height())}},sync:function(e){var c=b(p.sync).data("flexslider"),d=z.animatingTo;switch(e){case"animate":c.flexAnimate(d,p.pauseOnAction,false,true);break;case"play":if(!c.playing&&!c.asNav){c.play()}break;case"pause":c.pause();break}}};z.flexAnimate=function(h,g,d,l,k){if(q){z.direction=(z.currentItem<h)?"next":"prev"}if(!z.animating&&(z.canAdvance(h,k)||d)&&z.is(":visible")){if(q&&l){var e=b(p.asNavFor).data("flexslider");z.atEnd=h===0||h===z.count-1;e.flexAnimate(h,true,false,true,k);z.direction=(z.currentItem<h)?"next":"prev";e.direction=z.direction;if(Math.ceil((h+1)/z.visible)-1!==z.currentSlide){z.currentItem=h;z.slides.removeClass(u+"active-slide").eq(h).addClass(u+"active-slide");h=Math.floor(h/z.visible)}else{z.currentItem=h;z.slides.removeClass(u+"active-slide").eq(h).addClass(u+"active-slide");return false}}z.animating=true;z.animatingTo=h;p.before(z);if(g){z.pause()}if(z.syncExists&&!k){w.sync("animate")}if(p.controlNav){w.controlNav.active()}if(!o){z.slides.removeClass(u+"active-slide").eq(h).addClass(u+"active-slide")}z.atEnd=h===0||h===z.last;if(p.directionNav){w.directionNav.update()}if(h===z.last){p.end(z);if(!p.animationLoop){z.pause()}}if(!v){var i=(t)?z.slides.filter(":first").height():z.computedW,j,c,f;if(o){j=(p.itemWidth>z.w)?p.itemMargin*2:p.itemMargin;f=((z.itemW+j)*z.move)*z.animatingTo;c=(f>z.limit&&z.visible!==1)?z.limit:f}else{if(z.currentSlide===0&&h===z.count-1&&p.animationLoop&&z.direction!=="next"){c=(r)?(z.count+z.cloneOffset)*i:0}else{if(z.currentSlide===z.last&&h===0&&p.animationLoop&&z.direction!=="prev"){c=(r)?0:(z.count+1)*i}else{c=(r)?((z.count-1)-h+z.cloneOffset)*i:(h+z.cloneOffset)*i}}}z.setProps(c,"",p.animationSpeed);if(z.transitions){if(!p.animationLoop||!z.atEnd){z.animating=false;z.currentSlide=z.animatingTo}z.container.unbind("webkitTransitionEnd transitionend");z.container.bind("webkitTransitionEnd transitionend",function(){z.wrapup(i)})}else{z.container.animate(z.args,p.animationSpeed,p.easing,function(){z.wrapup(i)})}}else{if(!s){z.slides.eq(z.currentSlide).fadeOut(p.animationSpeed,p.easing);z.slides.eq(h).fadeIn(p.animationSpeed,p.easing,z.wrapup)}else{z.slides.eq(z.currentSlide).css({opacity:0,zIndex:1});z.slides.eq(h).css({opacity:1,zIndex:2});z.slides.unbind("webkitTransitionEnd transitionend");z.slides.eq(z.currentSlide).bind("webkitTransitionEnd transitionend",function(){p.after(z)});z.animating=false;z.currentSlide=z.animatingTo}}if(p.smoothHeight){w.smoothHeight(p.animationSpeed)}}};z.wrapup=function(c){if(!v&&!o){if(z.currentSlide===0&&z.animatingTo===z.last&&p.animationLoop){z.setProps(c,"jumpEnd")}else{if(z.currentSlide===z.last&&z.animatingTo===0&&p.animationLoop){z.setProps(c,"jumpStart")}}}z.animating=false;z.currentSlide=z.animatingTo;p.after(z)};z.animateSlides=function(){if(!z.animating){z.flexAnimate(z.getTarget("next"))}};z.pause=function(){clearInterval(z.animatedSlides);z.playing=false;if(p.pausePlay){w.pausePlay.update("play")}if(z.syncExists){w.sync("pause")}};z.play=function(){z.animatedSlides=setInterval(z.animateSlides,p.slideshowSpeed);z.playing=true;if(p.pausePlay){w.pausePlay.update("pause")}if(z.syncExists){w.sync("play")}};z.canAdvance=function(c,e){var d=(q)?z.pagingCount-1:z.last;return(e)?true:(q&&z.currentItem===z.count-1&&c===0&&z.direction==="prev")?true:(q&&z.currentItem===0&&c===z.pagingCount-1&&z.direction!=="next")?false:(c===z.currentSlide&&!q)?false:(p.animationLoop)?true:(z.atEnd&&z.currentSlide===0&&c===d&&z.direction!=="next")?false:(z.atEnd&&z.currentSlide===d&&c===0&&z.direction==="next")?false:true};z.getTarget=function(c){z.direction=c;if(c==="next"){return(z.currentSlide===z.last)?0:z.currentSlide+1}else{return(z.currentSlide===0)?z.last:z.currentSlide-1}};z.setProps=function(c,f,e){var d=(function(){var h=(c)?c:((z.itemW+p.itemMargin)*z.move)*z.animatingTo,g=(function(){if(o){return(f==="setTouch")?c:(r&&z.animatingTo===z.last)?0:(r)?z.limit-(((z.itemW+p.itemMargin)*z.move)*z.animatingTo):(z.animatingTo===z.last)?z.limit:h}else{switch(f){case"setTotal":return(r)?((z.count-1)-z.currentSlide+z.cloneOffset)*c:(z.currentSlide+z.cloneOffset)*c;case"setTouch":return(r)?c:c;case"jumpEnd":return(r)?c:z.count*c;case"jumpStart":return(r)?z.count*c:c;default:return c}}}());return(g*-1)+"px"}());if(z.transitions){d=(t)?"translate3d(0,"+d+",0)":"translate3d("+d+",0,0)";e=(e!==undefined)?(e/1000)+"s":"0s";z.container.css("-"+z.pfx+"-transition-duration",e)}z.args[z.prop]=d;if(z.transitions||e===undefined){z.container.css(z.args)}};z.setup=function(d){if(!v){var c,e;if(d==="init"){z.viewport=b('<div class="'+u+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(z).append(z.container);z.cloneCount=0;z.cloneOffset=0;if(r){e=b.makeArray(z.slides).reverse();z.slides=b(e);z.container.empty().append(z.slides)}}if(p.animationLoop&&!o){z.cloneCount=2;z.cloneOffset=1;if(d!=="init"){z.container.find(".clone").remove()}z.container.append(z.slides.first().clone().addClass("clone")).prepend(z.slides.last().clone().addClass("clone"))}z.newSlides=b(p.selector,z);c=(r)?z.count-1-z.currentSlide+z.cloneOffset:z.currentSlide+z.cloneOffset;if(t&&!o){z.container.height((z.count+z.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){z.newSlides.css({display:"block"});z.doMath();z.viewport.height(z.h);z.setProps(c*z.h,"init")},(d==="init")?100:0)}else{z.container.width((z.count+z.cloneCount)*200+"%");z.setProps(c*z.computedW,"init");setTimeout(function(){z.doMath();z.newSlides.css({width:z.computedW,"float":"left",display:"block"});if(p.smoothHeight){w.smoothHeight()}},(d==="init")?100:0)}}else{z.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"});if(d==="init"){if(!s){z.slides.eq(z.currentSlide).fadeIn(p.animationSpeed,p.easing)}else{z.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+p.animationSpeed/1000+"s ease",zIndex:1}).eq(z.currentSlide).css({opacity:1,zIndex:2})}}if(p.smoothHeight){w.smoothHeight()}}if(!o){z.slides.removeClass(u+"active-slide").eq(z.currentSlide).addClass(u+"active-slide")}};z.doMath=function(){var f=z.slides.first(),c=p.itemMargin,e=p.minItems,d=p.maxItems;z.w=z.width();z.h=f.height();z.boxPadding=f.outerWidth()-f.width();if(o){z.itemT=p.itemWidth+c;z.minW=(e)?e*z.itemT:z.w;z.maxW=(d)?d*z.itemT:z.w;z.itemW=(z.minW>z.w)?(z.w-(c*e))/e:(z.maxW<z.w)?(z.w-(c*d))/d:(p.itemWidth>z.w)?z.w:p.itemWidth;z.visible=Math.floor(z.w/(z.itemW+c));z.move=(p.move>0&&p.move<z.visible)?p.move:z.visible;z.pagingCount=Math.ceil(((z.count-z.visible)/z.move)+1);z.last=z.pagingCount-1;z.limit=(z.pagingCount===1)?0:(p.itemWidth>z.w)?((z.itemW+(c*2))*z.count)-z.w-c:((z.itemW+c)*z.count)-z.w-c}else{z.itemW=z.w;z.pagingCount=z.count;z.last=z.count-1}z.computedW=z.itemW-z.boxPadding};z.update=function(c,d){z.doMath();if(!o){if(c<z.currentSlide){z.currentSlide+=1}else{if(c<=z.currentSlide&&c!==0){z.currentSlide-=1}}z.animatingTo=z.currentSlide}if(p.controlNav&&!z.manualControls){if((d==="add"&&!o)||z.pagingCount>z.controlNav.length){w.controlNav.update("add")}else{if((d==="remove"&&!o)||z.pagingCount<z.controlNav.length){if(o&&z.currentSlide>z.last){z.currentSlide-=1;z.animatingTo-=1}w.controlNav.update("remove",z.last)}}}if(p.directionNav){w.directionNav.update()}};z.addSlide=function(e,c){var d=b(e);z.count+=1;z.last=z.count-1;if(t&&r){(c!==undefined)?z.slides.eq(z.count-c).after(d):z.container.prepend(d)}else{(c!==undefined)?z.slides.eq(c).before(d):z.container.append(d)}z.update(c,"add");z.slides=b(p.selector+":not(.clone)",z);z.setup();p.added(z)};z.removeSlide=function(d){var c=(isNaN(d))?z.slides.index(b(d)):d;z.count-=1;z.last=z.count-1;if(isNaN(d)){b(d,z.slides).remove()}else{(t&&r)?z.slides.eq(z.last).remove():z.slides.eq(d).remove()}z.doMath();z.update(c,"remove");z.slides=b(p.selector+":not(.clone)",z);z.setup();p.removed(z)};w.init()};b.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7000,animationSpeed:600,initDelay:0,randomize:false,pauseOnAction:true,pauseOnHover:false,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};b.fn.flexslider=function(a){if(a===undefined){a={}}if(typeof a==="object"){return this.each(function(){var c=b(this),h=(a.selector)?a.selector:".slides > li",g=c.find(h);if(g.length===1){g.fadeIn(400);if(a.start){a.start(c)}}else{if(c.data("flexslider")==undefined){new b.flexslider(this,a)}}})}else{var d=b(this).data("flexslider");switch(a){case"play":d.play();break;case"pause":d.pause();break;case"next":d.flexAnimate(d.getTarget("next"),true);break;case"prev":case"previous":d.flexAnimate(d.getTarget("prev"),true);break;default:if(typeof a==="number"){d.flexAnimate(a,true)}}}}})(jQuery);