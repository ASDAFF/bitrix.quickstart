var RSEC_MODULE_IS_HERE=true,RSEC_BX_COOKIE_PREFIX="BITRIX_SM_",RSEC_flag_tension_line=false,RSEC_ec_start_coordY=0,RSEC_ec_start_height,RSEC_ec_start_height2;function RSEC_BlockTab(){if($("#rs_easycart").find(".rsec_tabs").find(".rsec_block").length<1){$("#rs_easycart").find(".rsec_tabs").css({position:"relative"}).append('<div class="rsec_block"><i class="rsec_ikonka"></i></div>')}}function RSEC_UnBlockTab(){$("#rs_easycart").find(".rsec_tabs").css({position:"static"}).find(".rsec_block").remove()}function RSEC_SetHeight(){var b=200,a=parseInt($.cookie(RSEC_BX_COOKIE_PREFIX+"RSEC_HEIGHT"));maxHeight=$("#rs_easycart").find(".rsec.rsec_headers").offset().top-window.pageYOffset-50;if(a>50){if(a<maxHeight){$("#rs_easycart").find(".rsec_content .rsec_tabs").css({height:a+"px"})}}else{$("#rs_easycart").find(".rsec_content .rsec_tabs").css({height:b+"px"})}}function RSEC_HideEasyCart(){$("#rs_easycart").find(".rsec_content").removeClass("open");$("#rs_easycart").find(".rsec_tab").removeClass("selected");$("#rs_easycart").find(".rsec_changer").removeClass("selected")}function RSEC_SwitchTab(a){var c=$("#rs_easycart").find(".rsec_content").hasClass("open");var b=$(a.attr("href")).hasClass("selected");RSEC_SetHeight();if(c&&b){RSEC_HideEasyCart()}else{if(c&&!b){$("#rs_easycart").find(".rsec_tab").removeClass("selected");$(a.attr("href")).addClass("selected");$("#rs_easycart").find(".rsec_changer").removeClass("selected");a.addClass("selected");$("#rs_easycart").find(".rsec_content").addClass("open")}else{$("#rs_easycart").find(".rsec_tab").removeClass("selected");$(a.attr("href")).addClass("selected");$("#rs_easycart").find(".rsec_changer").removeClass("selected");a.addClass("selected");$("#rs_easycart").find(".rsec_content").addClass("open")}}}function RSEC_VIEWED_Refresh(){}function RSEC_COMPARE_Refresh(){$(document).trigger("RSEC_BeforeCompareRefresh");var a=$("#rs_easycart").data("serviceurl");var b="";if(a.indexOf("?",0)>0){a=a+"&rsec_ajax_post=Y&rsec_mode=compare"}else{a=a+"?rsec_ajax_post=Y&rsec_mode=compare"}$("#rs_easycart").find("#rsec_compare").find("form").find('input[name^="DELETE_"]').each(function(){if($(this).is(":checked")){b=b+$(this).attr("name")+"="+$(this).val()+"&"}});RSEC_BlockTab();$.ajax({type:"POST",url:a,data:b}).done(function(c){$("#rs_easycart").find("#rsec_compare").html(c);setTimeout(function(){$(document).trigger("RSEC_AfterCompareRefreshDone")},50)}).fail(function(){console.warn("RSEasyCart -> Compare -> error");$(document).trigger("RSEC_AfterCompareRefreshError")}).always(function(){if($("#rs_easycart").find("#rsec_compare").find(".rsec_jsline").length>0){$("#rs_easycart").find(".rsec_headers").find(".rsec_changer.rsec_compare").removeClass("rsec_changer_hide");$("#rs_easycart").find(".rsec_headers").find(".rsec_changer.rsec_compare").find(".rsec_cnt").html($("#rs_easycart").find("#rsec_compare").find(".rsec_jsline").length)}else{$("#rs_easycart").find(".rsec_headers").find(".rsec_changer.rsec_compare").addClass("rsec_changer_hide");RSEC_HideEasyCart()}RSEC_UnBlockTab();$(document).trigger("RSEC_AfterCompareRefresh")})}function RSEC_FAVORITE_Refresh(){$(document).trigger("RSEC_BeforeFavoriteRefresh");var a=$("#rs_easycart").data("serviceurl");var b="";if(a.indexOf("?",0)>0){a=a+"&rsec_ajax_post=Y&rsec_mode=favorite"}else{a=a+"?rsec_ajax_post=Y&rsec_mode=favorite"}$("#rs_easycart").find("#rsec_favorite").find("form").find('input[name^="DELETE_"]').each(function(){if($(this).is(":checked")){b=b+$(this).attr("name")+"="+$(this).val()+"&"}});if($("#rs_easycart").find("#rsec_favorite").find("#rsec_indent").length>0){b=b+$("#rs_easycart").find("#rsec_favorite").find("#rsec_indent").attr("name")+"="+$("#rs_easycart").find("#rsec_favorite").find("#rsec_indent").val()+"&"}RSEC_BlockTab();$.ajax({type:"POST",url:a,data:b}).done(function(c){$("#rs_easycart").find("#rsec_favorite").html(c);setTimeout(function(){$(document).trigger("RSEC_AfterFavoriteRefreshDone")},50)}).fail(function(){console.warn("RSEasyCart -> Favorite -> error");$(document).trigger("RSEC_AfterFavoriteRefreshError")}).always(function(){if($("#rs_easycart").find("#rsec_favorite").find(".rsec_jsline").length>0){$("#rs_easycart").find(".rsec_headers").find(".rsec_changer.rsec_favorite").removeClass("rsec_changer_hide");$("#rs_easycart").find(".rsec_headers").find(".rsec_changer.rsec_favorite").find(".rsec_cnt").html($("#rs_easycart").find("#rsec_favorite").find(".rsec_jsline").length)}else{$("#rs_easycart").find(".rsec_headers").find(".rsec_changer.rsec_favorite").addClass("rsec_changer_hide");RSEC_HideEasyCart()}RSEC_UnBlockTab();$(document).trigger("RSEC_AfterFavoriteRefresh")})}function RSEC_BASKET_Refresh(){$(document).trigger("RSEC_BeforeBasketRefresh");if($("#rs_easycart").find("#rsec_basket").find("form").length>0){var a=$("#rs_easycart").find("#rsec_basket").find("form").attr("action");var b=$("#rs_easycart").find("#rsec_basket").find("form").serialize()}else{var a=$("#rs_easycart").data("serviceurl");var b=""}if(a.indexOf("?",0)>0){a=a+"&rsec_ajax_post=Y&rsec_mode=basket"}else{a=a+"?rsec_ajax_post=Y&rsec_mode=basket"}RSEC_BlockTab();$.ajax({type:"POST",url:a,data:b}).done(function(c){$("#rs_easycart").find("#rsec_basket").html(c);setTimeout(function(){if($("#rs_easycart").find("#rsec_basket").find(".rsec_take_normalCount").length>0){$("#rs_easycart").find(".rsec_normalCount").html($("#rs_easycart").find("#rsec_basket").find(".rsec_take_normalCount").html());$("#rs_easycart").find(".rsec_allSum_FORMATED").html($("#rs_easycart").find("#rsec_basket").find(".rsec_take_allSum_FORMATED").html())}else{$("#rs_easycart").find(".rsec_normalCount").html("0");$("#rs_easycart").find(".rsec_allSum_FORMATED").html("0")}$(document).trigger("RSEC_AfterBasketRefreshDone")},50)}).fail(function(){console.warn("RSEasyCart -> Basket -> error");$(document).trigger("RSEC_AfterBasketRefreshError")}).always(function(){RSEC_UnBlockTab();$(document).trigger("RSEC_AfterBasketRefresh")})}$(document).ready(function(){RSEC_MODULE_IS_HERE=true;if($("#rs_easycart").hasClass("addbodypadding")){$("body").css("padding-bottom","40px")}$(document).on("click","#rs_easycart .rsec_headers .rsec_changer",function(){RSEC_SwitchTab($(this));return false});$(document).on("click",function(g){if($(g.target).parents("#rs_easycart").length>0){}else{RSEC_HideEasyCart()}});$(document).on("click","#rs_easycart a.rsec_close",function(g){RSEC_HideEasyCart();return false});$(document).on("mousedown",".rsec_tyanya",function(g){RSEC_flag_tension_line=true;$("html").addClass("rsec_disableSelection");RSEC_ec_start_coordY=g.pageY;RSEC_ec_start_height=$("#rs_easycart").find(".rsec_tabs").height()});$(document).on("mouseup",function(){if(RSEC_flag_tension_line){RSEC_flag_tension_line=false;$("html").removeClass("rsec_disableSelection")}});$(document).mousemove(function(g){RSEC_ec_cur_height=$("#rs_easycart").find(".rsec_tabs").height();if(RSEC_flag_tension_line&&(RSEC_ec_start_height+RSEC_ec_start_coordY-g.pageY)>100){$.cookie(RSEC_BX_COOKIE_PREFIX+"RSEC_HEIGHT",(RSEC_ec_start_height+RSEC_ec_start_coordY-g.pageY),"/");RSEC_SetHeight()}});$(document).on("click","#rs_easycart .rsec_minus",function(){var j=$(this);var h=parseFloat(j.parent().find(".rsec_quantity").data("ratio"));var g=h.toString().split(".",2)[1];var i=0;if(g!==undefined){i=g.length}var k=parseFloat(j.parent().find(".rsec_quantity").val());if(k>h){j.parent().find(".rsec_quantity").val((k-h).toFixed(i))}return false});$(document).on("click","#rs_easycart .rsec_plus",function(){var j=$(this);var h=parseFloat(j.parent().find(".rsec_quantity").data("ratio"));var g=h.toString().split(".",2)[1];var i=0;if(g!==undefined){i=g.length}var k=parseFloat(j.parent().find(".rsec_quantity").val());j.parent().find(".rsec_quantity").val((k+h).toFixed(i));return false});$(document).on("blur","#rs_easycart .rsec_quantity",function(){var k=$(this);var h=parseFloat(k.data("ratio"));var g=h.toString().split(".",2)[1];var i=0;if(g!==undefined){i=g.length}var j=parseFloat(k.val());if(j>0){k.val((h*(Math.floor(j/h))).toFixed(i))}else{k.val(h)}});$(document).on("mouseenter","#rs_easycart .rsec_quantity",function(){$("html").addClass("rsec_disableSelection")}).on("mouseleave","#rs_easycart .rsec_quantity",function(){$("html").removeClass("rsec_disableSelection")});$(document).on("click","#rs_easycart .rsec_thistab_compare .rsec_delall",function(){$(this).parents("form").find('input[name^="DELETE_"]').attr("checked",true);RSEC_COMPARE_Refresh();return false});$(document).on("click","#rs_easycart .rsec_thistab_compare .rsec_delete",function(){$(this).parents(".rsec_jsline").find('input[name^="DELETE_"]').attr("checked",true);RSEC_COMPARE_Refresh();return false});$(document).on("click","#rs_easycart .rsec_thistab_compare .rsec_delsome",function(){RSEC_COMPARE_Refresh();return false});$(document).on("click","#rs_easycart .rsec_thistab_favorite .rsec_delall",function(){$(this).parents("form").find('input[name^="DELETE_"]').attr("checked",true);RSEC_FAVORITE_Refresh();return false});$(document).on("click","#rs_easycart .rsec_thistab_favorite .rsec_delete",function(){$(this).parents(".rsec_jsline").find('input[name^="DELETE_"]').attr("checked",true);RSEC_FAVORITE_Refresh();return false});$(document).on("click","#rs_easycart .rsec_thistab_favorite .rsec_delsome",function(){RSEC_FAVORITE_Refresh();return false});var e=0,c=1200;$(document).on("click","#rs_easycart .rsec_thistab_basket .rsec_plus, #rs_easycart .rsec_thistab_basket .rsec_minus",function(){clearTimeout(e);e=setTimeout(function(){RSEC_BASKET_Refresh()},c)});$(document).on("click","#rs_easycart .rsec_thistab_basket .rsec_delall",function(){$(this).parents("form").find('input[name^="DELETE_"]').attr("checked",true);RSEC_BASKET_Refresh();return false});$(document).on("click","#rs_easycart .rsec_thistab_basket .rsec_delete",function(){$(this).parents(".rsec_jsline").find('input[name^="DELETE_"]').attr("checked",true);RSEC_BASKET_Refresh();return false});$(document).on("click","#rs_easycart .rsec_thistab_basket .rsec_refresh, #rs_easycart .rsec_thistab_basket .rsec_delsome",function(){RSEC_BASKET_Refresh();return false});if($("#rs_easycart").find(".rsec_universalhandler").length>0){var b="",a="",d="",f="";if($("#rs_easycart").find("#rsec_compare").hasClass("rsec_universalhandler")){b=$("#rs_easycart").find("#rsec_compare").data("ajaxfinder_add")}if($("#rs_easycart").find("#rsec_compare").hasClass("rsec_universalhandler")){a=$("#rs_easycart").find("#rsec_compare").data("ajaxfinder_remove")}if($("#rs_easycart").find("#rsec_favorite").hasClass("rsec_universalhandler")){d=$("#rs_easycart").find("#rsec_favorite").data("ajaxfinder")}if($("#rs_easycart").find("#rsec_basket").hasClass("rsec_universalhandler")){f=$("#rs_easycart").find("#rsec_basket").data("ajaxfinder")}if(b!=""||a!=""||d!=""||f!=""){$(document).ajaxSuccess(function(h,i,g){if((b!=""&&g.url.indexOf(b,0)>0)||(a!=""&&g.url.indexOf(a,0)>0)){RSEC_COMPARE_Refresh()}if(d!=""&&g.url.indexOf(d,0)>0){RSEC_FAVORITE_Refresh()}if(f!=""&&g.url.indexOf(f,0)>0){RSEC_BASKET_Refresh()}})}}});