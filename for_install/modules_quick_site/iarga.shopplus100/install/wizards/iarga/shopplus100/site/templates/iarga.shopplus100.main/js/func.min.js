var keysave=0;var antiCusel=0;var get=new Array;var imagepath="bitrix/templates/iarga.shopplus100.main/images";var phoneformat="+7 (___) ___-__-___";function setcookie(a,b){$.post(SITE_DIR+"inc/ajax/setcookie.php",{name:a,val:b})}function getval(num,rnd){if(num==undefined){return 0}ret=eval(num.replace(/[^0-9\.]*/,""));if(rnd){ret=Math.round(ret)}if(ret==undefined){return 0}return ret}function round(a,b){var b=10^b;return Math.round(a*b)/b}function sklon(d,c,b,a){if(d%10==0||d%10>4||d==11||d==12||d==13||d==14){return c}else{if(d%10==1){return b}else{return a}}}function getAbs(val){return Math.abs(eval(val.replace("px","")))}function getClientWidth(){return $.browser.opera?window.innerWidth:$(window).width()}function getClientHeight(){return $.browser.opera?window.innerHeight:$(window).height()}function formatSumm(c){var b="";cost=c+"";cnt=0;var a=0;for(a=(cost.length-1);a>=0;a--){if((cnt)%3==0){b=" "+b}b=cost[a]+b;cnt++}return b}$(function(){$(".innerlink").css({cursor:"pointer"}).click(function(){if($(this).find(".innerlink").length>0){location.href=$(this).find(".innerlink").attr("href")}else{if($(this).attr("href")!=""){location.href=$(this).attr("href")}}});$(".openpopup").live("click",function(){openpopup($(this).attr("data-rel"),$(this).attr("data-alt"));return false});$(".print_it").click(function(){print()});$(".addpassw").live("focus",function(){if($(this).val()==$(this).attr("rel")){var a=$("<input type='password' name='"+this.name+"'  data-rel='"+$(this).attr("data-rel")+"' value='' class='"+this.className+"'>").insertAfter(this).focus();$(this).remove();a.blur(function(){if($(this).val()==""){var b=$("<input type='text' name='"+this.name+"'  data-rel='"+$(this).attr("data-rel")+"' value='"+$(this).attr("data-rel")+"' class='"+this.className+"'>").insertAfter(this);$(this).remove()}})}});$("input.repl, textarea.repl").focus(function(){if($(this).val()==$(this).attr("data-alt")){$(this).val("")}});$("input.repl, textarea.repl").blur(function(){if($(this).val()==""){$(this).val($(this).attr("data-alt"))}});$("input.repl, textarea.repl").keyup(function(){if($(this).val()==""||$(this).val()==$(this).attr("data-alt")){$(this).removeClass("act")}else{$(this).addClass("act")}});$("input.repl, textarea.repl").keyup();if($(".pagenavig a").length>0){$("body").keydown(function(a){if(keysave==17&&a.which==39){location.href=$(".pagenavig .next").attr("href")}else{if(keysave==17&&a.which==37){location.href=$(".pagenavig .prev").attr("href")}else{keysave=a.which}}})}initUnuform("uniform");$("input.hasDef, textarea.hasDef").each(function(){if($(this).val()!=$(this).attr("data-rel")){$(this).addClass("hasText")}$(this).blur(function(){if($(this).val()==""){$(this).val($(this).attr("data-rel"));$(this).removeClass("hasText")}});$(this).focus(function(){if($(this).val()==$(this).attr("data-rel")){$(this).val("");$(this).addClass("hasText")}})});$("form .submit").live("mouseup",function(){if($(this).attr("name")!=undefined){$("<input type='hidden' name='"+$(this).attr("name")+"'  value='1'>").appendTo($(this).parents("form"))}$(this).parents("form").submit();return false});$("form").live("submit",function(){$(this).find("input.repl,textarea.repl").each(function(){if($(this).attr("alt")==$(this).val()){$(this).val("")}})});$(".phoneformat").bind("keyup focus",function(a){var b=$(this).val();for(i=0;i<b.length;i++){if(phoneformat[i]==undefined){break}else{if(phoneformat[i]!="_"){b=repl(b,i,phoneformat[i])}else{if(!b[i].match(/[0-9]/)){b=repl(b,i,"");break}}}}if(a.keyCode!=8){if(i<phoneformat.length){for(i;i<phoneformat.length;i++){if(phoneformat[i]!="_"){b=repl(b,i,phoneformat[i])}else{break}}}}$(this).val(b.substr(0,(phoneformat.length-1)))})});function initUnuform(a){$("."+a+" input").live("keypress",function(c,b){if(c.keyCode==13){$(this).parents("form").submit()}});$("."+a).submit(function(){if(antiCusel==0){$(".uniform.active p.step").html("");$(this).addClass("active").removeClass("success");$(this).find(".element-form").removeClass("error");$(this).find("p.error").show().html("<img src='/"+imagepath+"/preloader.gif'>").removeClass("success");var b=$(this).find("input.repl, textarea.repl");for(i=0;i<b.length;i++){$("<input type='hidden' name='"+b.eq(i).attr("name")+"_default_value' value='"+b.eq(i).attr("alt")+"' class='tempadd'>").appendTo($(this))}$("#newframe").remove();var c=$('<iframe id="newframe" name="newframe" src="'+$(this).attr("action")+'"></iframe>').appendTo("body").hide();var d=$(this).attr("target","newframe").attr("method","post").attr("enctype","multipart/form-data");c.bind("load",function(){$(".tempadd").remove();var f=$(this).contents().find("body").html();if(typeof handler=="function"){handler(f)}if(f.match("step")){var e=f.match(/step ([0-9]+):([0-9]+)/);$(".uniform.active").find(".skipadr").remove();$(".uniform.active").find(".skip_adr").remove();$(".uniform.active").append($("<input type='hidden' name='skip' class='skip'>").val(e[2]));$(".uniform.active").append($("<input type='hidden' name='skip_adr' class='skip_adr'>").val(e[1]));$(".uniform.active p.step").html($(".uniform.active p.step").html()+"<br>"+f.replace("step","").replace("error",""));$(".uniform.active p.active").html("");setTimeout(function(){$(".uniform.active").removeClass("active").submit()},2000)}else{if(f.match("error")){setTimeout((function(g){return function(){var h=f.match(/errorblock:([--0-9a-zA-Z_\-]+)/);if(h){f=f.replace("errorblock:"+h[1],"");var j=$(".uniform.active input[name='"+h[1]+"']").parent().parent();var k=$(".uniform.active .error span");if(h&&j.length>0){j.addClass("error");if(k.length>0){k.html(f.replace("error ","")).fadeIn();$(".uniform.active p.error").html("").fadeIn()}else{$(".uniform.active p.error").html(f.replace("error ","")).fadeIn()}}else{$(".uniform.active p.error").html(f.replace("error ","")).fadeIn()}$(".uniform.active").removeClass("active")}else{$(".uniform.active p.error").html(f.replace("error ","")).fadeIn()}}})(f),200)}else{if(f.match("success")){setTimeout((function(g){return function(){if(f.match("refresh")){history.go(0)}else{if(f.match("redirect")){var h=f.match(/redirect:([\.0-9a-zA-Z-\-\/]+)/);if(h){location.href=(h[1])}}else{if(f.match("alert")){alert("success")}else{if(f.match("closeit")){$(".uniform.active").html("<p>"+f.replace("success ","").replace("closeit","")+"</p>");setTimeout(function(){$(".popup_bg").click()},3000)}else{if(f.match("clear")){f=f.replace("clear","");$(".uniform.active input, .uniform.active textarea").each(function(){if($(this).attr("type")=="text"){$(this).val("")}else{if($(this).is("textarea")){$(this).val("")}else{if($(this).attr("type")=="checkbox"){$(this).arrt("checked",false)}else{if($(this).attr("type")=="radio"){$(this).arrt("checked",false)}}}}})}if(f.match("nodelete")){$(".uniform.active p.error").html(f.replace("success ","").replace("nodelete","")).addClass("success")}else{$(".uniform.active").html("<p>"+f.replace("success ","")+"</p>")}}}}}$(".uniform.active").removeClass("active")}})(f),200)}else{$(".uniform.active p.error").html("").fadeIn();$(".uniform.active").removeClass("active")}}}})}});$(window).resize(function(){$(".popup").height(getClientHeight())})}$(".cusel").live("mouseup",function(){antiCusel=1});$(".cusel").live("click",function(){setTimeout(function(){antiCusel=0},100)});function offsetPosition(a){if(a!=undefined){var c=0,b=0;do{c+=a.offsetLeft;b+=a.offsetTop}while(a=a.offsetParent);return[c,b]}}$(function(){$(".popup").click(function(a){$(".popup_bg").click()})});function openpopup(a,b){$(".popup").fadeIn().css({"z-index":"301"}).html("<img src='/"+imagepath+"/preloader.gif'>");var c={position:"fixed",top:"0px",width:"100%",height:$(document).height(),"margin-bottom":"100px","z-index":"300",background:"#000",opacity:"0.5"};$("<div class='popup_bg'>").appendTo($("body")).fadeIn().css(c).click(function(){$(".popup").fadeOut();$("body").css("overflow","auto");$(this).fadeOut(function(){$(this).remove()})});$.post(SITE_DIR+"inc/popups/"+a+".php",b,function(d){$(".popup").html(d).height(getClientHeight()).css("top",$(document).scrollTop());$("body").css("overflow","hidden");initUnuform("unipopup");$(".popup div").eq(0).click(function(e){e.stopPropagation()});$(".popup .close").click(function(){$(".popup_bg").click();return false});$(".popup input.repl, .popup textarea.repl").focus(function(){if($(this).val()==$(this).attr("rel")){$(this).val("")}});$(".popup input.repl, .popup textarea.repl").blur(function(){if($(this).val()==""){$(this).val($(this).attr("rel"))}});if(typeof("popup_opened")=="function"){popup_opened()}top=$(document).scrollTop();if($(".popup").height()+top>$(document).height()){top=$(document).height()-$(".popup").height()-50}if($(".popup").height()<getClientHeight()-100){$(".popup").css({position:"fixed",top:"50px"})}else{$(".popup").css({position:"absolute",top:top})}})}function repl(c,a,b){str1=c.substr(0,a);str2=c.substr(a+1);return str1+b+str2}function preloader_start(a){if($(".iarga_preloared").length<1){$("<img src='/"+imagepath+"/preloader.gif' class='iarga_preloared'>").prependTo($(a).parents("dd"));setTimeout(function(){$(".iarga_preloared").fadeOut(function(){$(this).remove()})},3000)}}function preloader_stop(){$(".iarga_preloared").fadeOut(function(){$(this).remove()})};