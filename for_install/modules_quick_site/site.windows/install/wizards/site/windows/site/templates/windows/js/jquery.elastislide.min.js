(function(d,e,b){e.fn.touchwipe=function(f){var c={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};f&&e.extend(c,f);this.each(function(){function g(){this.removeEventListener("touchmove",m);l=null;h=!1}function m(k){c.preventDefaultEvents&&k.preventDefault();if(h){var n=l-k.touches[0].pageX;k=j-k.touches[0].pageY;Math.abs(n)>=c.min_move_x?(g(),0<n?c.wipeLeft():c.wipeRight()):Math.abs(k)>=c.min_move_y&&(g(),0<k?c.wipeDown():c.wipeUp())}}function i(k){1==k.touches.length&&(l=k.touches[0].pageX,j=k.touches[0].pageY,h=!0,this.addEventListener("touchmove",m,!1))}var l,j,h=!1;"ontouchstart" in document.documentElement&&this.addEventListener("touchstart",i,!1)});return this};e.elastislide=function(f,c){this.$el=e(c);this._init(f)};e.elastislide.defaults={speed:450,easing:"easeOutBack",imageW:190,margin:3,border:2,minItems:1,current:0,onClick:function(){return !1}};e.elastislide.prototype={_init:function(c){this.options=e.extend(!0,{},e.elastislide.defaults,c);this.$slider=this.$el.find("ul");this.$items=this.$slider.children("li");this.itemsCount=this.$items.length;this.$esCarousel=this.$slider.parent();this._validateOptions();this._configure();this._addControls();this._initEvents();this.$slider.show();this._slideToCurrent(!1)},_validateOptions:function(){0>this.options.speed&&(this.options.speed=450);0>this.options.margin&&(this.options.margin=4);0>this.options.border&&(this.options.border=1);if(1>this.options.minItems||this.options.minItems>this.itemsCount){this.options.minItems=1}this.options.current>this.itemsCount-1&&(this.options.current=0)},_configure:function(){this.current=this.options.current;this.visibleWidth=this.$esCarousel.width();this.visibleWidth<this.options.minItems*(this.options.imageW+2*this.options.border)+(this.options.minItems-1)*this.options.margin?(this._setDim((this.visibleWidth-(this.options.minItems-1)*this.options.margin)/this.options.minItems),this._setCurrentValues(),this.fitCount=this.options.minItems):(this._setDim(),this._setCurrentValues());this.$slider.css({width:this.sliderW})},_setDim:function(c){this.$items.css({marginRight:this.options.margin,width:c?c:this.options.imageW+2*this.options.border}).children("a").css({borderWidth:this.options.border})},_setCurrentValues:function(){this.itemW=this.$items.outerWidth(!0);this.sliderW=this.itemW*this.itemsCount;this.visibleWidth=this.$esCarousel.width();this.fitCount=Math.floor(this.visibleWidth/this.itemW)},_addControls:function(){this.$navNext=e('<span class="es-nav-next">Next</span>');this.$navPrev=e('<span class="es-nav-prev">Previous</span>');e('<div class="es-nav"/>').append(this.$navPrev).append(this.$navNext).appendTo(this.$el)},_toggleControls:function(f,c){f&&c?1===c?"right"===f?this.$navNext.show():this.$navPrev.show():"right"===f?this.$navNext.hide():this.$navPrev.hide():(this.current===this.itemsCount-1||this.fitCount>=this.itemsCount)&&this.$navNext.hide()},_initEvents:function(){var c=this;e(d).bind("resize.elastislide",function(){c._setCurrentValues();c.visibleWidth<c.options.minItems*(c.options.imageW+2*c.options.border)+(c.options.minItems-1)*c.options.margin?(c._setDim((c.visibleWidth-(c.options.minItems-1)*c.options.margin)/c.options.minItems),c._setCurrentValues(),c.fitCount=c.options.minItems):(c._setDim(),c._setCurrentValues());c.$slider.css({width:c.sliderW+10});clearTimeout(c.resetTimeout);c.resetTimeout=setTimeout(function(){c._slideToCurrent()},200)});this.$navNext.bind("click.elastislide",function(){c._slide("right")});this.$navPrev.bind("click.elastislide",function(){c._slide("left")});this.$items.bind("click.elastislide",function(){c.options.onClick(e(this))});c.$slider.touchwipe({wipeLeft:function(){c._slide("right")},wipeRight:function(){c._slide("left")}})},_slide:function(h,c,k,i){if(this.$slider.is(":animated")){return !1}var l=parseFloat(this.$slider.css("margin-left"));if(c===b){var n=this.fitCount*this.itemW;if(0>n){return !1}if("right"===h&&this.sliderW-(Math.abs(l)+n)<this.visibleWidth){n=this.sliderW-(Math.abs(l)+this.visibleWidth)-this.options.margin,this._toggleControls("right",-1),this._toggleControls("left",1)}else{if("left"===h&&0>Math.abs(l)-n){n=Math.abs(l),this._toggleControls("left",-1),this._toggleControls("right",1)}else{var m;"right"===h?m=Math.abs(l)+this.options.margin+Math.abs(n):m=Math.abs(l)-this.options.margin-Math.abs(n);0<m?this._toggleControls("left",1):this._toggleControls("left",-1);m<this.sliderW-this.visibleWidth?this._toggleControls("right",1):this._toggleControls("right",-1)}}"right"===h?c="-="+n:c="+="+n}else{m=Math.abs(c),Math.max(this.sliderW,this.visibleWidth)-m<this.visibleWidth&&(c=-(Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth),0!==c&&(c+=this.options.margin),this._toggleControls("right",-1),m=Math.abs(c)),0<m?this._toggleControls("left",1):this._toggleControls("left",-1),Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth>m+this.options.margin?this._toggleControls("right",1):this._toggleControls("right",-1)}e.fn.applyStyle=k===b?e.fn.animate:e.fn.css;this.$slider.applyStyle({marginLeft:c},e.extend(!0,[],{duration:this.options.speed,easing:this.options.easing,complete:function(){i&&i.call()}}))},_slideToCurrent:function(c){this._slide("",-(this.current*this.itemW),c)},add:function(f,c){this.$items=this.$items.add(f);this.itemsCount=this.$items.length;this._setDim();this._setCurrentValues();this.$slider.css({width:this.sliderW});this._slideToCurrent();c&&c.call(f)},destroy:function(c){this._destroy(c)},_destroy:function(c){this.$el.unbind(".elastislide").removeData("elastislide");e(d).unbind(".elastislide");c&&c.call()}};var a=function(c){this.console&&console.error(c)};e.fn.elastislide=function(f){if("string"===typeof f){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var h=e.data(this,"elastislide");h?!e.isFunction(h[f])||"_"===f.charAt(0)?a("no such method '"+f+"' for elastislide instance"):h[f].apply(h,c):a("cannot call methods on elastislide prior to initialization; attempted to call method '"+f+"'")})}else{this.each(function(){e.data(this,"elastislide")||e.data(this,"elastislide",new e.elastislide(f,this))})}return this}})(window,jQuery);