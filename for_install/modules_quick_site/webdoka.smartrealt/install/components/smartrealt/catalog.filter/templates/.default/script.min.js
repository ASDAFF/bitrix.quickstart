function SmartRealtFilter(){var z=$("#CatalogFilter");var A=$("#RegionAreaId");var b=$("#CityId");var w=$("#TownId");var e=$("#RoomQuantityContainer");var v=$("#EstateMarketContainer");var m=$("#LocationTypeCity");var d=$("#LocationTypeRegionArea");var q=$("#CityAreaContainer");var k=$("#CityAreaIdContainer");var f=null;var t=null;var c=null;var s=null;var p=null;var y=null;var l=null;var x=null;var a=null;var C=null;function r(){m.bind("click",function(){o()});d.bind("click",function(){o()});A.bind("change",function(){if(A.val().length>0){n(A.val(),x)}else{w.hide()}h()});b.bind("change",function(){if(b.val().length>0){g(b.val(),l);B(b.val(),"")}else{w.hide()}h()});w.bind("change",function(){h()})}function j(){var E=f.split(";");for(var D=0;D<E.length;D++){switch(E[D]){case"2":case"4":case"5":case"19":e.show();v.show();break;default:e.hide();v.hide();break}}}function h(){if(A.val().length==0){A.addClass("notSelect")}else{A.removeClass("notSelect")}if(b.val().length==0){b.addClass("notSelect")}else{b.removeClass("notSelect")}var D=w.val();if(D!=null&&D.length==0){w.addClass("notSelect")}else{w.removeClass("notSelect")}}function o(){if(m.eq(0).attr("checked")){A.hide();b.show();if(A.val().length>0){p=A.val()}if(w.val()&&w.val().length>0){x=w.val()}w.empty();A.val("");b.val(y);b.change()}else{b.hide();q.hide();A.show();if(b.val().length>0){y=b.val()}if(w.val()&&w.val().length>0){l=w.val()}w.empty();b.val("");A.val(p);A.change()}}function g(D,F){w.empty();w.append('<option class="label" value="">���������� �����</option>');if(c!=null&&c[D]!=null){w.show();for(var G in c[D]){var E=G==F?'selected="selected"':"";w.append('<option value="'+G+'" '+E+">"+c[D][G]+"</option>")}}else{w.hide()}}function B(E,D){k.empty();if(s!=null&&s[E]!=null){q.show();for(var F in s[E]){k.append('<input class="ch" value="'+F+'" id="'+F+'" name="'+a+'[CityAreaId][]" type="checkbox"><label class="ch" for="'+F+'">'+s[E][F]+"</label><br>")}}else{q.hide()}}function n(G,E){w.empty();w.append('<option class="label" value="">���������� �����</option>');if(t!=null&&t[G]!=null){w.show();for(var F in t[G]){var D=F==E?'selected="selected"':"";w.append('<option value="'+F+'" '+D+">"+t[G][F]+"</option>")}}else{w.hide()}}function u(){this.Init=function(){r();h()};this.SetTownByRegionArea=function(D){t=D};this.SetTownByCity=function(D){c=D};this.SetCityAreaByCity=function(D){s=D};this.SetDefRegionAreaId=function(D){p=D};this.SetDefCityId=function(D){y=D};this.SetDefTownId=function(D){l=D;x=D};this.SetFilterName=function(D){a=D};this.SetTypeId=function(D){f=D};this.SetFilterFormName=function(D){C=D};this.ClearFilter=function(E){var D=z.get(0).elements;for(i=0;i<D.length;i++){field_type=D[i].type.toLowerCase();switch(field_type){case"text":case"password":case"textarea":case"hidden":D[i].value="";break;case"radio":case"checkbox":if(D[i].checked){D[i].checked=false}break;case"select-one":case"select-multi":D[i].selectedIndex=-1;break;default:break}}if(E){z.submit()}}}return new u()};