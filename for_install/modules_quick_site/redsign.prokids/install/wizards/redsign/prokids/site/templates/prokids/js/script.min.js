var RSGoPro_AJAXPAGES_processing=false;function RSGoPro_PutJSon(c,b,d){if(c.TYPE=="OK"){if(d&&d==c.IDENTIFIER){if(c.HTML.catalognames){$("#"+d).find(".names > tbody > tr:last").after(c.HTML.catalognames)}if(c.HTML.catalogproducts){$("#"+d).find(".products > tbody > tr:last").after(c.HTML.catalogproducts)}if(c.HTML.showcaseview){$("#"+d).find("#showcaseview").append(c.HTML.showcaseview)}if(b&&c.HTML.catalogajaxpages){b.parents(".ajaxpages").replaceWith(c.HTML.catalogajaxpages)}else{if(b){b.parents(".ajaxpages").remove()}}}else{console.warn("PutJSon -> no ajaxpages")}if(c.HTMLBYID){for(var a in c.HTMLBYID){if($("#"+a)){$("#"+a).html(c.HTMLBYID[a])}}}}else{console.warn("PutJSon -> request return error")}}function RSGoPro_AjaxPages(b){if(b.parent().hasClass("animation")){b.parent().removeClass("animation");var a=$("#"+b.data("ajaxpagesid"));if(a.length>0&&a.find(".artables").length>0&&a.find(".artables .names > tbody > tr").length>1){var c=0;a.find(".artables .names > tbody > tr").each(function(d){c=$(this).data("elementid");if(d%2==0){$(this).addClass("even");a.find(".artables .products tr.js-elementid"+c).addClass("even")}else{$(this).removeClass("even");a.find(".artables .products tr.js-elementid"+c).removeClass("even")}})}}else{b.parent().addClass("animation")}}function RSGoPro_Area2Darken(d,c,a){var b=$.extend({progressLeft:false,progressTop:false},a);if(!d.hasClass("areadarken")){d.addClass("areadarken").css({position:"relative"}).append('<div class="area2darken"></div>');if(c=="animashka"){d.find(".area2darken").append('<i class="icon animashka"></i>');if(b.progressTop){d.find(".animashka").css({top:b.progressTop})}}}else{d.removeClass("areadarken").removeAttr("style").find(".area2darken").remove()}}function RSGoPro_SetSet(){RSGoPro_SetFavorite();RSGoPro_SetCompared();RSGoPro_SetInBasket()}function RSGoPro_SetFavorite(){$(".add2favorite").removeClass("in");for(element_id in RSGoPro_FAVORITE){if(RSGoPro_FAVORITE[element_id]=="Y"&&$(".js-elementid"+element_id).find(".add2favorite").length>0){$(".js-elementid"+element_id).find(".add2favorite").addClass("in")}}}function RSGoPro_SetCompared(){$(".add2compare").removeClass("in").html('<i class="icon pngicons"></i>'+BX.message("RSGOPRO_JS_COMPARE"));for(element_id in RSGoPro_COMPARE){if(RSGoPro_COMPARE[element_id]=="Y"&&$(".js-elementid"+element_id).find(".add2compare").length>0){$(".js-elementid"+element_id).find(".add2compare").addClass("in").html('<i class="icon pngicons"></i>'+BX.message("RSGOPRO_JS_COMPARE_IN"))}}}function RSGoPro_SetInBasket(){$(".add2basketform").removeClass("in");for(element_id in RSGoPro_INBASKET){if(RSGoPro_INBASKET[element_id]=="Y"&&$(".js-add2basketpid[value='"+element_id+"']").length>0){$('.js-add2basketpid[value="'+element_id+'"]').parents(".add2basketform").addClass("in")}if(parseInt(RSGoPro_INBASKET[element_id])>0&&$(".products").find(".js-add2basketform"+RSGoPro_INBASKET[element_id]).length>0){$(".products").find(".js-add2basketform"+RSGoPro_INBASKET[element_id]).addClass("in")}}}function RSGoPro_AJAXPAGESAuto(){$(".ajaxpages.auto").each(function(d){var a=200,c=$(this);var e=c.offset().top,b=$(window).height();if(a>(e-window.pageYOffset-b)&&!RSGoPro_AJAXPAGES_processing&&!c.hasClass("")){c.find("a").trigger("click")}})}function RSGoPro_TIMER(){var a=new Date;a=(Date.parse(a))/1000;$(".timer").each(function(e){timetimer1=$(this).find(".intimer");var d=$(this).data("datefrom");var k=$(timetimer1).data("dateto");var c=$(timetimer1).data("autoreuse");var f=k-d;var i=k-a;if(i<0&&c=="Y"){for(lim=0;lim<100;lim++){newdateTo=(lim*f+k)-a;if(newdateTo>0){i=newdateTo;break}}}if(i>0){var j=parseInt((i/(60*60))/24);if(j<10){j="0"+j}j=j.toString();var g=parseInt((i/(60*60))%24);if(g<10){g="0"+g}g=g.toString();var b=parseInt(i/(60))%60;if(b<10){b="0"+b}b=b.toString();var h=parseInt(i)%60;if(h<10){h="0"+h}h=h.toString();$(timetimer1).find(".result-day").text(j);$(timetimer1).find(".result-hour").text(g);$(timetimer1).find(".result-minute").text(b);$(timetimer1).find(".result-second").text(h)}else{$(timetimer1).parents(".timer").css("display","none");$(timetimer1).parents(".js-element").removeClass("da2 qb").find(".price").removeClass("new")}})}function RSGoPro_InitMaskPhone(){if($(".maskPhone").length>0){$(".maskPhone").mask("+7 (999) 999-9999")}}$(document).ready(function(){setInterval(function(){RSGoPro_TIMER()},1000);$(document).on("RSGoProOnOfferChange",function(h,g){if($(g).find(".timers").length>0){if($(g).find(".intimer").data("autoreuse")=="N"){var f=new Date;f=(Date.parse(f))/1000;var c=$(g).find(".timer").data("datefrom");var d=$(g).find(".intimer").data("dateto");if((d-f)<0){$(g).find(".timers").css("display","none");$(g).removeClass("da2 qb");$(g).find(".price").removeClass("new")}}}});$(document).on("click",".click_protection",function(c){c.stopImmediatePropagation();console.warn("Click protection");return false});$(document).on("click","form a.submit",function(){$(this).parents("form").find('input[type="submit"]').trigger("click");return false});$(document).on("submit",".add2basketform",function(){var e=$(this);var f=parseInt(e.find(".js-add2basketpid").val());if(f>0){var d=$(this).serialize();var c=SITE_DIR+SITE_CATALOG_PATH+"/?"+d+"&AJAX_CALL=Y&action=add2basket";RSGoPro_Area2Darken(e);RSGoPro_Area2Darken($("#header").find(".basketinhead"));$.getJSON(c,{},function(g){if(g.TYPE=="OK"){RSGoPro_INBASKET[f]="Y";RSGoPro_SetInBasket();RSGoPro_PutJSon(g)}else{console.warn("add2basket - error responsed")}}).fail(function(g){console.warn("add2basket - can't load json")}).always(function(){RSGoPro_Area2Darken(e);RSGoPro_Area2Darken($("#header").find(".basketinhead"))})}else{if(e.parents(".elementpopup").length<1){if(!RSDevFunc_PHONETABLET){RSGoPro_GoPopup(e.parents(".js-element").data("elementid"),e.parents(".js-element"))}else{if(e.parents(".js-element").find(".js-detaillink").length>0){window.location="http://"+window.location.hostname+e.parents(".js-element").find(".js-detaillink").attr("href")}else{console.warn("fail redirect - can't find link")}}}else{console.warn("add product to basket failed")}}return false});$(document).on("click",".add2compare",function(){var d=$(this);var f=parseInt(d.parents(".js-element").data("elementid"));var e="";if(f>0){RSGoPro_Area2Darken($(".add2compare"));if(RSGoPro_COMPARE[f]=="Y"){e="DELETE_FROM_COMPARE_LIST"}else{e="ADD_TO_COMPARE_LIST"}var c=SITE_DIR+SITE_CATALOG_PATH+"/?AJAX_CALL=Y&action="+e+"&id="+f;$.getJSON(c,{},function(g){if(g.TYPE=="OK"){RSGoPro_PutJSon(g);if(e=="DELETE_FROM_COMPARE_LIST"){delete RSGoPro_COMPARE[f]}else{RSGoPro_COMPARE[f]="Y"}}else{console.warn("compare - error responsed")}}).fail(function(g){console.warn("compare - fail request")}).always(function(){RSGoPro_Area2Darken($(".add2compare"));RSGoPro_SetCompared()})}return false});$(document).on("click",".add2favorite",function(){var d=$(this);var e=parseInt(d.parents(".js-element").data("elementid"));if(e>0){RSGoPro_Area2Darken($(".add2favorite"));var c=SITE_DIR+SITE_CATALOG_PATH+"/?AJAX_CALL=Y&action=add2favorite&element_id="+e;$.getJSON(c,{},function(f){if(f.TYPE=="OK"){RSGoPro_PutJSon(f);if(RSGoPro_FAVORITE[e]=="Y"){delete RSGoPro_FAVORITE[e]}else{RSGoPro_FAVORITE[e]="Y"}}else{console.warn("favorite - error responsed")}}).fail(function(f){console.warn("favorite - fail request")}).always(function(){RSGoPro_Area2Darken($(".add2favorite"));RSGoPro_SetFavorite()})}return false});$(document).on("click",".ajaxpages a",function(){var g=$(this);var j=g.data("ajaxurl");var i=g.data("ajaxpagesid");var h=g.data("navpagenomer");var c=g.data("navpagecount");var e=g.data("navnum");var d=parseInt(h)+1;var f="";if($("#"+i).length>0&&h<c&&parseInt(e)>0&&j!=""){RSGoPro_AJAXPAGES_processing=true;RSGoPro_AjaxPages(g);if(j.indexOf("?")<1){f=j+"?ajaxpages=Y&ajaxpagesid="+i+"&PAGEN_"+e+"="+d}else{f=j+"&ajaxpages=Y&ajaxpagesid="+i+"&PAGEN_"+e+"="+d}$.getJSON(f,{},function(k){RSGoPro_PutJSon(k,g,i)}).fail(function(k){console.warn("ajaxpages - error responsed")}).always(function(){setTimeout(function(){RSGoPro_AJAXPAGES_processing=false;RSGoPro_AjaxPages(g)},50)})}else{if(!($("#"+i).length>0)){console.warn("AJAXPAGES: ajaxpages -> empty DOM element")}if(!(h<c)){console.warn("AJAXPAGES: ajaxpages -> navpagenomer !< navpagecount")}if(!(parseInt(e)>0)){console.warn("AJAXPAGES: ajaxpages -> parseInt(navnum)!>0")}if(!(j!="")){console.warn("AJAXPAGES: ajaxpages -> ajaxurl is empty")}}return false});$(window).scroll(function(){RSGoPro_AJAXPAGESAuto()});$(document).on("click",".prices .arrowtop",function(){var c=$(this);if(c.parent().find("tr").length>3&&!$(this).parent().find("tr:first").is(":visible")){c.parent().find("tr").each(function(d){if(!$(this).hasClass("noned")){c.parent().find("tr:eq("+(d-1)+")").removeClass("noned");c.parent().find("tr:eq("+(d+2)+")").addClass("noned");return false}})}return false});$(document).on("click",".prices .arrowbot",function(){var c=$(this);if(c.parent().find("tr").length>3&&!$(this).parent().find("tr:last").is(":visible")){c.parent().find("tr").each(function(d){if(!$(this).hasClass("noned")){$(this).addClass("noned");c.parent().find("tr:eq("+(d+3)+")").removeClass("noned");return false}})}return false});$(document).on("mouseenter mouseleave",".prices .arrowtop, .prices .arrowbot, .js-minus, .js-plus",function(){$("html").toggleClass("disableSelection")});$(document).on("click",".js-minus",function(){var f=$(this);var d=parseFloat(f.parent().find(".js-quantity").data("ratio"));var c=d.toString().split(".",2)[1];var e=0;if(c!==undefined){e=c.length}var g=parseFloat(f.parent().find(".js-quantity").val());if(g>d){f.parent().find(".js-quantity").val((g-d).toFixed(e))}return false});$(document).on("click",".js-plus",function(){var f=$(this);var d=parseFloat(f.parent().find(".js-quantity").data("ratio"));var c=d.toString().split(".",2)[1];var e=0;if(c!==undefined){e=c.length}var g=parseFloat(f.parent().find(".js-quantity").val());f.parent().find(".js-quantity").val((g+d).toFixed(e));return false});$(document).on("blur",".js-quantity",function(){var g=$(this);var d=parseFloat(g.data("ratio"));var c=d.toString().split(".",2)[1];var e=0;if(c!==undefined){e=c.length}var f=parseFloat(g.val());if(f>0){g.val((d*(Math.floor(f/d))).toFixed(e))}else{g.val(d)}});var b={},a={};b={maxWidth:900,maxHeight:600,minWidth:250,minHeight:100,fitToView:true,autoSize:true,openEffect:"none",closeEffect:"none",padding:20,tpl:{closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"><i class="icon pngicons"></i></a>'},helpers:{title:{type:"inside",position:"top"}},beforeLoad:function(){RSGoPro_HideAllPopup()},beforeShow:function(){$(".fancybox-wrap").css({marginLeft:"-10000px"});$(document).trigger("RSGoProOnFancyBeforeShow")},afterShow:function(){setTimeout(function(){$.fancybox.toggle()},50);setTimeout(function(){$(".fancybox-wrap").css({marginLeft:"0px"});RSGoPro_InitMaskPhone()},75)}};$(".fancyajax:not(.big)").fancybox(b);a=$.extend({},b);a.width="80%";a.height="80%";a.autoSize=false;a.autoHeight=true;$(".fancyajax.big").fancybox(a);RSGoPro_InitMaskPhone();$(document).on("focus blur",".dropdown-block .bx-ui-sls-fake",function(){$(this).parents(".dropdown-block").toggleClass("focus")})});