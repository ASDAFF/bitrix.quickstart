(function(){if(!window.google||!google.gears){var a=null;if("undefined"!==typeof GearsFactory)a=new GearsFactory;else try{a=new ActiveXObject("Gears.Factory"),-1!=a.getBuildInfo().indexOf("ie_mobile")&&a.privateSetGlobalObject(this)}catch(b){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(a=document.createElement("object"),a.style.display="none",a.width=0,a.height=0,a.type="application/x-googlegears",document.documentElement.appendChild(a),a&&"undefined"==
typeof a.create&&(a=null))}a&&(window.google||(google={}),google.gears||(google.gears={factory:a}))}})();var bb_successCallback,bb_errorCallback,bb_blackberryTimeout_id=-1;function handleBlackBerryLocationTimeout(){-1!=bb_blackberryTimeout_id&&bb_errorCallback({message:"Timeout error",code:3})}
function handleBlackBerryLocation(){clearTimeout(bb_blackberryTimeout_id);bb_blackberryTimeout_id=-1;if(bb_successCallback&&bb_errorCallback){if(0==blackberry.location.latitude&&0==blackberry.location.longitude)bb_errorCallback({message:"Position unavailable",code:2});else{var a=null;blackberry.location.timestamp&&(a=new Date(blackberry.location.timestamp));bb_successCallback({timestamp:a,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}})}bb_errorCallback=bb_successCallback=
null}}
var geo_position_js=function(){var a={},b=null;a.getCurrentPosition=function(a,e,f){b.getCurrentPosition(a,e,f)};a.init=function(){try{if("undefined"!=typeof geo_position_js_simulator)b=geo_position_js_simulator;else if("undefined"!=typeof bondi&&"undefined"!=typeof bondi.geolocation)b=bondi.geolocation;else if("undefined"!=typeof navigator.geolocation)b=navigator.geolocation,a.getCurrentPosition=function(a,f,c){b.getCurrentPosition(function(b){"undefined"!=typeof b.latitude?a({timestamp:b.timestamp,coords:{latitude:b.latitude,
longitude:b.longitude}}):a(b)},f,c)};else if("undefined"!=typeof window.google&&"undefined"!=typeof google.gears)b=google.gears.factory.create("beta.geolocation");else if("undefined"!=typeof Mojo&&"Mojo.Service.Request"!=typeof Mojo.Service.Request)b=!0,a.getCurrentPosition=function(a,b,c){parameters={};c&&(c.enableHighAccuracy&&!0==c.enableHighAccuracy&&(parameters.accuracy=1),c.maximumAge&&(parameters.maximumAge=c.maximumAge),c.responseTime&&(5>c.responseTime?parameters.responseTime=1:20>c.responseTime?
parameters.responseTime=2:parameters.timeout=3));r=new Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:parameters,onSuccess:function(b){a({timestamp:b.timestamp,coords:{latitude:b.latitude,longitude:b.longitude,heading:b.heading}})},onFailure:function(a){1==a.errorCode?b({code:3,message:"Timeout"}):2==a.errorCode?b({code:2,message:"Position Unavailable"}):b({code:0,message:"Unknown Error: webOS-code"+errorCode})}})};else if("undefined"!=typeof device&&"undefined"!=
typeof device.getServiceObject)b=device.getServiceObject("Service.Location","ILocation"),a.getCurrentPosition=function(a,f,c){b.ILocation.GetLocation({LocationInformationClass:"BasicLocationInformation"},function(b,c,d){4==c?f({message:"Position unavailable",code:2}):a({timestamp:null,coords:{latitude:d.ReturnValue.Latitude,longitude:d.ReturnValue.Longitude,altitude:d.ReturnValue.Altitude,heading:d.ReturnValue.Heading}})})};else if("undefined"!=typeof window.blackberry&&blackberry.location.GPSSupported){if("undefined"==
typeof blackberry.location.setAidMode)return!1;blackberry.location.setAidMode(2);a.getCurrentPosition=function(a,b,c){bb_successCallback=a;bb_errorCallback=b;bb_blackberryTimeout_id=c.timeout?setTimeout("handleBlackBerryLocationTimeout()",c.timeout):setTimeout("handleBlackBerryLocationTimeout()",6E4);blackberry.location.onLocationUpdate("handleBlackBerryLocation()");blackberry.location.refreshLocation()};b=blackberry.location}}catch(d){return alert("error="+d),"undefined"!=typeof console&&console.log(d),
!1}return null!=b};return a}(),Collection=function(){var a=this;this.collection=[];return{add:function(b){a.collection.push(b)},get:function(b){for(var d,e=a.collection.length-1;0<=e;e--)a.collection[e].name===b&&(d=a.collection[e]);return d},first:function(){return a.collection[0]}}};