(function(a){a.fn.customScrollbar=function(f,e){var d={skin:undefined,hScroll:true,vScroll:true,updateOnWindowResize:false,animationSpeed:300,onCustomScroll:undefined,swipeSpeed:1,wheelSpeed:40,fixedThumbWidth:undefined,fixedThumbHeight:undefined};var c=function(j,i){this.$element=a(j);this.options=i;this.addScrollableClass();this.addSkinClass();this.addScrollBarComponents();if(this.options.vScroll){this.vScrollbar=new h(this,new b())}if(this.options.hScroll){this.hScrollbar=new h(this,new g())}this.$element.data("scrollable",this);this.initKeyboardScrolling();this.bindEvents()};c.prototype={addScrollableClass:function(){if(!this.$element.hasClass("scrollable")){this.scrollableAdded=true;this.$element.addClass("scrollable")}},removeScrollableClass:function(){if(this.scrollableAdded){this.$element.removeClass("scrollable")}},addSkinClass:function(){if(typeof(this.options.skin)=="string"&&!this.$element.hasClass(this.options.skin)){this.skinClassAdded=true;this.$element.addClass(this.options.skin)}},removeSkinClass:function(){if(this.skinClassAdded){this.$element.removeClass(this.options.skin)}},addScrollBarComponents:function(){this.assignViewPort();if(this.$viewPort.length==0){this.$element.wrapInner('<div class="viewport" />');this.assignViewPort();this.viewPortAdded=true}this.assignOverview();if(this.$overview.length==0){this.$viewPort.wrapInner('<div class="overview" />');this.assignOverview();this.overviewAdded=true}this.addScrollBar("vertical","prepend");this.addScrollBar("horizontal","append")},removeScrollbarComponents:function(){this.removeScrollbar("vertical");this.removeScrollbar("horizontal");if(this.overviewAdded){this.$element.unwrap()}if(this.viewPortAdded){this.$element.unwrap()}},removeScrollbar:function(i){if(this[i+"ScrollbarAdded"]){this.$element.find(".scroll-bar."+i).remove()}},assignViewPort:function(){this.$viewPort=this.$element.find(".viewport")},assignOverview:function(){this.$overview=this.$viewPort.find(".overview")},addScrollBar:function(j,i){if(this.$element.find(".scroll-bar."+j).length==0){this.$element[i]("<div class='scroll-bar "+j+"'><div class='thumb'></div></div>");this[j+"ScrollbarAdded"]=true}},resize:function(i){if(this.vScrollbar){this.vScrollbar.resize(i)}if(this.hScrollbar){this.hScrollbar.resize(i)}},scrollTo:function(i){if(this.vScrollbar){this.vScrollbar.scrollToElement(i)}if(this.hScrollbar){this.hScrollbar.scrollToElement(i)}},scrollToXY:function(i,j){this.scrollToX(i);this.scrollToY(j)},scrollToX:function(i){if(this.hScrollbar){this.hScrollbar.scrollOverviewTo(i,true)}},scrollToY:function(i){if(this.vScrollbar){this.vScrollbar.scrollOverviewTo(i,true)}},remove:function(){this.removeScrollableClass();this.removeSkinClass();this.removeScrollbarComponents();this.$element.data("scrollable",null);this.removeKeyboardScrolling();if(this.vScrollbar){this.vScrollbar.remove()}if(this.hScrollbar){this.hScrollbar.remove()}},setAnimationSpeed:function(i){this.options.animationSpeed=i},isInside:function(l,n){var j=a(l);var i=a(n);var k=j.offset();var m=i.offset();return(k.top>=m.top)&&(k.left>=m.left)&&(k.top+j.height()<=m.top+i.height())&&(k.left+j.width()<=m.left+i.width())},initKeyboardScrolling:function(){var i=this;this.elementKeydown=function(j){if(document.activeElement===i.$element[0]){if(i.vScrollbar){i.vScrollbar.keyScroll(j)}if(i.hScrollbar){i.hScrollbar.keyScroll(j)}}};this.$element.attr("tabindex","-1").keydown(this.elementKeydown)},removeKeyboardScrolling:function(){this.$element.removeAttr("tabindex").unbind("keydown",this.elementKeydown)},bindEvents:function(){if(this.options.onCustomScroll){this.$element.on("customScroll",this.options.onCustomScroll)}}};var h=function(j,i){this.scrollable=j;this.sizing=i;this.$scrollBar=this.sizing.scrollBar(this.scrollable.$element);this.$thumb=this.$scrollBar.find(".thumb");this.setScrollPosition(0,0);this.resize();this.initMouseMoveScrolling();this.initMouseWheelScrolling();this.initTouchScrolling();this.initMouseClickScrolling();this.initWindowResize()};h.prototype={resize:function(i){this.scrollable.$viewPort.height(this.scrollable.$element.height());this.sizing.size(this.scrollable.$viewPort,this.sizing.size(this.scrollable.$element));this.viewPortSize=this.sizing.size(this.scrollable.$viewPort);this.overviewSize=this.sizing.size(this.scrollable.$overview);this.ratio=this.viewPortSize/this.overviewSize;this.sizing.size(this.$scrollBar,this.viewPortSize);this.thumbSize=this.calculateThumbSize();this.sizing.size(this.$thumb,this.thumbSize);this.maxThumbPosition=this.calculateMaxThumbPosition();this.maxOverviewPosition=this.calculateMaxOverviewPosition();this.enabled=(this.overviewSize>this.viewPortSize);if(this.scrollPercent===undefined){this.scrollPercent=0}if(this.enabled){this.rescroll(i)}else{this.setScrollPosition(0,0)}this.$scrollBar.toggle(this.enabled)},calculateThumbSize:function(){var j=this.sizing.fixedThumbSize(this.scrollable.options);var i;if(j){i=j}else{i=this.ratio*this.viewPortSize}return Math.max(i,this.sizing.minSize(this.$thumb))},initMouseMoveScrolling:function(){var i=this;this.$thumb.mousedown(function(j){if(i.enabled){i.startMouseMoveScrolling(j)}});this.documentMouseup=function(j){i.stopMouseMoveScrolling(j)};a(document).mouseup(this.documentMouseup);this.documentMousemove=function(j){i.mouseMoveScroll(j)};a(document).mousemove(this.documentMousemove);this.$thumb.click(function(j){j.stopPropagation()})},removeMouseMoveScrolling:function(){this.$thumb.unbind();a(document).unbind("mouseup",this.documentMouseup);a(document).unbind("mousemove",this.documentMousemove)},initMouseWheelScrolling:function(){var i=this;this.scrollable.$element.mousewheel(function(l,m,k,j){if(i.enabled){if(i.mouseWheelScroll(k,j)){l.stopPropagation();l.preventDefault()}}})},removeMouseWheelScrolling:function(){this.scrollable.$element.unbind("mousewheel")},initTouchScrolling:function(){if(document.addEventListener){var i=this;this.elementTouchstart=function(j){if(i.enabled){i.startTouchScrolling(j)}};this.scrollable.$element[0].addEventListener("touchstart",this.elementTouchstart);this.documentTouchmove=function(j){i.touchScroll(j)};document.addEventListener("touchmove",this.documentTouchmove);this.elementTouchend=function(j){i.stopTouchScrolling(j)};this.scrollable.$element[0].addEventListener("touchend",this.elementTouchend)}},removeTouchScrolling:function(){if(document.addEventListener){this.scrollable.$element[0].removeEventListener("touchstart",this.elementTouchstart);document.removeEventListener("touchmove",this.documentTouchmove);this.scrollable.$element[0].removeEventListener("touchend",this.elementTouchend)}},initMouseClickScrolling:function(){var i=this;this.scrollBarClick=function(j){i.mouseClickScroll(j)};this.$scrollBar.click(this.scrollBarClick)},removeMouseClickScrolling:function(){this.$scrollBar.unbind("click",this.scrollBarClick)},initWindowResize:function(){if(this.scrollable.options.updateOnWindowResize){var i=this;this.windowResize=function(){i.resize()};a(window).resize(this.windowResize)}},removeWindowResize:function(){a(window).unbind("resize",this.windowResize)},isKeyScrolling:function(i){return this.keyScrollDelta(i)!=null},keyScrollDelta:function(j){for(var i in this.sizing.scrollingKeys){if(i==j){return this.sizing.scrollingKeys[j](this.viewPortSize)}}return null},startMouseMoveScrolling:function(i){this.mouseMoveScrolling=true;a("html").addClass("not-selectable");this.setUnselectable(a("html"),"on");this.setScrollEvent(i)},stopMouseMoveScrolling:function(i){this.mouseMoveScrolling=false;a("html").removeClass("not-selectable");this.setUnselectable(a("html"),null)},setUnselectable:function(i,j){if(i.attr("unselectable")!=j){i.attr("unselectable",j);i.find(":not(input)").attr("unselectable",j)}},mouseMoveScroll:function(i){if(this.mouseMoveScrolling){var j=this.sizing.mouseDelta(this.scrollEvent,i);this.scrollThumbBy(j);this.setScrollEvent(i)}},startTouchScrolling:function(i){if(i.touches&&i.touches.length==1){this.setScrollEvent(i.touches[0]);this.touchScrolling=true;i.stopPropagation()}},touchScroll:function(j){if(this.touchScrolling&&j.touches&&j.touches.length==1){var k=-this.sizing.mouseDelta(this.scrollEvent,j.touches[0])*this.scrollable.options.swipeSpeed;var i=this.scrollOverviewBy(k);if(i){j.stopPropagation();j.preventDefault();this.setScrollEvent(j.touches[0])}}},stopTouchScrolling:function(i){this.touchScrolling=false;i.stopPropagation()},mouseWheelScroll:function(j,i){var k=-this.sizing.wheelDelta(j,i)*this.scrollable.options.wheelSpeed;if(k!=0){return this.scrollOverviewBy(k)}},mouseClickScroll:function(i){var j=this.viewPortSize-20;if(i["page"+this.sizing.scrollAxis()]<this.$thumb.offset()[this.sizing.offsetComponent()]){j=-j}this.scrollOverviewBy(j)},keyScroll:function(j){var i=j.which;if(this.enabled&&this.isKeyScrolling(i)){if(this.scrollOverviewBy(this.keyScrollDelta(i))){j.preventDefault()}}},scrollThumbBy:function(l){var k=this.thumbPosition();k+=l;k=this.positionOrMax(k,this.maxThumbPosition);var j=this.scrollPercent;this.scrollPercent=k/this.maxThumbPosition;var i=(k*this.maxOverviewPosition)/this.maxThumbPosition;this.setScrollPosition(i,k);if(j!=this.scrollPercent){this.triggerCustomScroll(j);return true}else{return false}},thumbPosition:function(){return this.$thumb.position()[this.sizing.offsetComponent()]},scrollOverviewBy:function(j){var i=this.overviewPosition()+j;return this.scrollOverviewTo(i,false)},overviewPosition:function(){return -this.scrollable.$overview.position()[this.sizing.offsetComponent()]},scrollOverviewTo:function(j,k){j=this.positionOrMax(j,this.maxOverviewPosition);var i=this.scrollPercent;this.scrollPercent=j/this.maxOverviewPosition;var l=this.scrollPercent*this.maxThumbPosition;if(k){this.setScrollPositionWithAnimation(j,l)}else{this.setScrollPosition(j,l)}if(i!=this.scrollPercent){this.triggerCustomScroll(i);return true}else{return false}},positionOrMax:function(j,i){if(j<0){return 0}else{if(j>i){return i}else{return j}}},triggerCustomScroll:function(i){this.scrollable.$element.trigger("customScroll",{scrollAxis:this.sizing.scrollAxis(),direction:this.sizing.scrollDirection(i,this.scrollPercent),scrollPercent:this.scrollPercent*100})},rescroll:function(j){if(j){var i=this.positionOrMax(this.overviewPosition(),this.maxOverviewPosition);this.scrollPercent=i/this.maxOverviewPosition;var k=this.scrollPercent*this.maxThumbPosition;this.setScrollPosition(i,k)}else{var k=this.scrollPercent*this.maxThumbPosition;var i=this.scrollPercent*this.maxOverviewPosition;this.setScrollPosition(i,k)}},setScrollPosition:function(i,j){this.$thumb.css(this.sizing.offsetComponent(),j+"px");this.scrollable.$overview.css(this.sizing.offsetComponent(),-i+"px")},setScrollPositionWithAnimation:function(j,k){var l={};var i={};l[this.sizing.offsetComponent()]=k+"px";this.$thumb.animate(l,this.scrollable.options.animationSpeed);i[this.sizing.offsetComponent()]=-j+"px";this.scrollable.$overview.animate(i,this.scrollable.options.animationSpeed)},calculateMaxThumbPosition:function(){return this.sizing.size(this.$scrollBar)-this.thumbSize},calculateMaxOverviewPosition:function(){return this.sizing.size(this.scrollable.$overview)-this.sizing.size(this.scrollable.$viewPort)},setScrollEvent:function(j){var i="page"+this.sizing.scrollAxis();if(!this.scrollEvent||this.scrollEvent[i]!=j[i]){this.scrollEvent={pageX:j.pageX,pageY:j.pageY}}},scrollToElement:function(k){var i=a(k);if(this.sizing.isInside(i,this.scrollable.$overview)&&!this.sizing.isInside(i,this.scrollable.$viewPort)){var j=i.offset();var m=this.scrollable.$overview.offset();var l=this.scrollable.$viewPort.offset();this.scrollOverviewTo(j[this.sizing.offsetComponent()]-m[this.sizing.offsetComponent()],true)}},remove:function(){this.removeMouseMoveScrolling();this.removeMouseWheelScrolling();this.removeTouchScrolling();this.removeMouseClickScrolling();this.removeWindowResize()}};var g=function(){};g.prototype={size:function(j,i){if(i){return j.width(i)}else{return j.width()}},minSize:function(i){return parseInt(i.css("min-width"))||0},fixedThumbSize:function(i){return i.fixedThumbWidth},scrollBar:function(i){return i.find(".scroll-bar.horizontal")},mouseDelta:function(j,i){return i.pageX-j.pageX},offsetComponent:function(){return"left"},wheelDelta:function(j,i){return j},scrollAxis:function(){return"X"},scrollDirection:function(j,i){return j<i?"right":"left"},scrollingKeys:{37:function(i){return -10},39:function(i){return 10}},isInside:function(l,n){var j=a(l);var i=a(n);var k=j.offset();var m=i.offset();return(k.left>=m.left)&&(k.left+j.width()<=m.left+i.width())}};var b=function(){};b.prototype={size:function(j,i){if(i){return j.height(i)}else{return j.height()}},minSize:function(i){return parseInt(i.css("min-height"))||0},fixedThumbSize:function(i){return i.fixedThumbHeight},scrollBar:function(i){return i.find(".scroll-bar.vertical")},mouseDelta:function(j,i){return i.pageY-j.pageY},offsetComponent:function(){return"top"},wheelDelta:function(j,i){return i},scrollAxis:function(){return"Y"},scrollDirection:function(j,i){return j<i?"down":"up"},scrollingKeys:{38:function(i){return -10},40:function(i){return 10},33:function(i){return -(i-20)},34:function(i){return i-20}},isInside:function(l,n){var j=a(l);var i=a(n);var k=j.offset();var m=i.offset();return(k.top>=m.top)&&(k.top+j.height()<=m.top+i.height())}};return this.each(function(){if(f==undefined){f=d}if(typeof(f)=="string"){var i=a(this).data("scrollable");if(i){i[f](e)}}else{if(typeof(f)=="object"){f=a.extend(d,f);new c(a(this),f)}else{throw"Invalid type of options"}}})}})(jQuery);(function(d){var b=["DOMMouseScroll","mousewheel"];if(d.event.fixHooks){for(var a=b.length;a;){d.event.fixHooks[b[--a]]=d.event.mouseHooks}}d.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=b.length;e;){this.addEventListener(b[--e],c,false)}}else{this.onmousewheel=c}},teardown:function(){if(this.removeEventListener){for(var e=b.length;e;){this.removeEventListener(b[--e],c,false)}}else{this.onmousewheel=null}}};d.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function c(j){var h=j||window.event,g=[].slice.call(arguments,1),k=0,i=true,f=0,e=0;j=d.event.fix(h);j.type="mousewheel";if(h.wheelDelta){k=h.wheelDelta/120}if(h.detail){k=-h.detail/3}e=k;if(h.axis!==undefined&&h.axis===h.HORIZONTAL_AXIS){e=0;f=k}if(h.wheelDeltaY!==undefined){e=h.wheelDeltaY/120}if(h.wheelDeltaX!==undefined){f=h.wheelDeltaX/120}g.unshift(j,k,f,e);return(d.event.dispatch||d.event.handle).apply(this,g)}})(jQuery);