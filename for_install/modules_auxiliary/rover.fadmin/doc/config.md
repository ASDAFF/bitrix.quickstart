# Конфигурация
Чтобы подключить модуль Битрикс к «Конструктору», необходимо:
* в папке `lib` подключаемого модуля создать файл с классом настроек и унаследовать его от `\Rover\Fadmin\Options`. Этот класс должен реализовывать публичный метод `getConfig()`. 
В решении есть демо-файл `lib/testoptions.php` с примером такого класса. Страницу настроек, получаемую на основе конфигурации, возвращаемой `getConfig()` демо-класса, можно найти в административной части в разделе «Настройки» -> «Настройки продукта» -> «Настройки модулей» -> «Констуктор администативной части».
* в файле `options.php` подключаемого модуля вызвать метод подключения «Конструктора административной части». Примерную структуру этого файла можно взять из файла `options.php` самого «Конструктора».

## Структура массива настроек, возвращаемого `getConfig()`
	
    public function getConfig()
	{
	    return [
            'tabs' => [
                ...
			],
			'settings' => [
				...
			]
		];	
    }	
`getConfig()` возвращает ассоциативный массив с 2мя ключами. В `'tabs'` находится массивы с конфигурацией вкладок и полей страницы настроек модуля, в `'settings'` – другие общие настройки. 

Если ключ `'tabs'` пуст, то табы с настройками модуля не выводятся. Если ключ `'settings'` пуст, то берутся настройки по умолчанию. 
### Структура `'settings'`
На данный момент в `'settings'` может находиться лишь один параметр `\Rover\Fadmin\Options::SETTINGS__CHECKBOX_BOOLEAN`. Он отвечает за то, как будет возвращаться значение опции типа `Input::TYPE__CHECKBOX` (чекбокс). Если параметр не указан, либо равен `false`, то возвращаемое значение опции будет `'Y'` или `'N'`, а если параметр равен `true`, то, соответственно, – `true` или `false`.
### Структура `'tabs'`
Для примера возьмём структуру, которая находится в демо-классе `Rover\Fadmin\TestOptions`:

	'tabs' => [
		[
            'name'          => 'test_tab',
            'label'         => 'test tab',
            'description'   => 'test tab description',
            'siteId'        => 's1',
            'inputs'        => [
            ...
			] 
		]
		...	
    ],
Каждый массив, находящийся в `'tabs'` описывает одну вкладку либо шаблон вкладки для пресета. Массив содержит следующие ключи:
* `name` – уникальное имя вкладки в системе, обязательное;
* `label` – название вкладки, обязательное;
* `description` – описание вкладки, не обязательное;
* `siteId` – идентификатор сайта, к которому относятся настройки на вкладке, не обязательное, если не указан, то настройки используются для всех сайтов;
* `preset` – если указан и равен true, то это говорит о том, что данная вкладка является шаблоном пресета.
* `inputs` – массив с конфигурацией инпутов вкладки;

Инпуты могут быть различных типов (`namespace Rover\Fadmin\Inputs\Input`). Простые типы:
* `Input::TYPE__CHECKBOX` – чекбокс;
* `Input::TYPE__CLOCK` – выбор времени;
* `Input::TYPE__COLOR` – выбор цвета;
* `Input::TYPE__FILE` – загрузка файла (в т.ч. изображения);
* `Input::TYPE__HEADER` – заголовок, не может иметь значение;
* `Input::TYPE__HIDDEN` – скрытое поле;
* `Input::TYPE__IBLOCK` – выбор инфоблока;
* `Input::TYPE__LABEL` – вывод текста, не может иметь значение;
* `Input::TYPE__NUMBER` – строка для ввода числа;
* `Input::TYPE__SELECTBOX` – выпадающий список;
* `Input::TYPE__SUBMIT` – отправка формы;
* `Input::TYPE__TEXT` – строка для ввода текста;
* `Input::TYPE__TEXTAREA` – поле для ввода текста;
* `Input::TYPE__DATE` – дата;
* `Input::TYPE__DATETIME` – дата и время;
* `Input::TYPE__SCHEDULE` – расписание;

Специальные типы:
* `Input::TYPE__ADD_PRESET` – добавление пресета;
* `Input::TYPE__REMOVE_PRESET` – удаление пресета;
* `Input::TYPE__CUSTOM` – пользовательский элемент.
* `Input::TYPE__PRESETNAME` – имя текущего пресета.

### Конфигурация инпутов на вкладке

	'inputs' => [
		[
			'type'      => Input::TYPE__HEADER,
			'name'      => 'input_header',
			'label'     => 'First tab header',
		],
		[
			'type'      => Input::TYPE__TEXT,
			'name'      => 'text',
			'label'     => 'text input (maxlength 50)',
			'default'   => 'default text',
			'maxLength' => 50
		],
		...	
	],
Конфигурация каждого инпута имеет обязательные и не обязательные параметры.  Обязательные:
* `type` – тип инпута 
* `name` – уникальное имя инпута в системе, не обязательное для элементов, которые не могут иметь значение (`Input::TYPE__HEADER` и `Input::TYPE__LABEL`)
* `label` – название инпута, которое будет отображено рядом с ним на вкладке.

Необязательные параметры зависят от типа инпута и если они не указаны явно, то для них берется значение по умолчанию. Общими необязательными параметрами являются:
* `id` – id инпута, если не указан, то берется из параметра name;
* `default` – значение по умолчанию;
* `multiple` – множественное значение или нет;
* `help` – подпись под инпутом со справочной информацией.

Со всеми параметрами вы можете ознакомиться в разделе [api, посвященному инпутам]('./api.md'), либо самостоятельно, изучив классы инпутов в «Конструкторе».
