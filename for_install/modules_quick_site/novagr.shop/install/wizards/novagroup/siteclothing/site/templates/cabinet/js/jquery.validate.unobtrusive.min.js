/*!
** Unobtrusive validation support library for jQuery and jQuery Validate
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(g){var m=g.validator,n,d="unobtrusiveValidation";function l(o,q,p){o.rules[q]=p;if(o.message){o.messages[q]=o.message}}function e(o){return o.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function i(o){return o.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function f(o){return o.substr(0,o.lastIndexOf(".")+1)}function c(p,o){if(p.indexOf("*.")===0){p=p.replace("*.",o)}return p}function h(p,r){var o=g(this).find("[data-valmsg-for='"+i(r[0].name)+"']"),q=g.parseJSON(o.attr("data-valmsg-replace"))!==false;o.removeClass("field-validation-valid").addClass("field-validation-error");p.data("unobtrusiveContainer",o);if(q){o.empty();p.removeClass("input-validation-error").appendTo(o)}else{p.hide()}}function k(q,p){var o=g(this).find("[data-valmsg-summary=true]"),r=o.find("ul");if(r&&r.length&&p.errorList.length){r.empty();o.addClass("validation-summary-errors").removeClass("validation-summary-valid");g.each(p.errorList,function(){g("<li />").html(this.message).appendTo(r)})}}function j(p){var o=p.data("unobtrusiveContainer"),q=g.parseJSON(o.attr("data-valmsg-replace"));if(o){o.addClass("field-validation-valid").removeClass("field-validation-error");p.removeData("unobtrusiveContainer");if(q){o.empty()}}}function b(p){var o=g(this);o.data("validator").resetForm();o.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors");o.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}function a(r){var q=g(r),o=q.data(d),p=g.proxy(b,r);if(!o){o={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:g.proxy(h,r),invalidHandler:g.proxy(k,r),messages:{},rules:{},success:g.proxy(j,r)},attachValidation:function(){q.unbind("reset."+d,p).bind("reset."+d,p).validate(this.options)},validate:function(){q.validate();return q.valid()}};q.data(d,o)}return o}m.unobtrusive={adapters:[],parseElement:function(r,o){var q=g(r),t=q.parents("form")[0],p,u,s;if(!t){return}p=a(t);p.options.rules[r.name]=u={};p.options.messages[r.name]=s={};g.each(this.adapters,function(){var w="data-val-"+this.name,v=q.attr(w),x={};if(v!==undefined){w+="-";g.each(this.params,function(){x[this]=q.attr(w+this)});this.adapt({element:r,form:t,message:v,params:x,rules:u,messages:s})}});g.extend(u,{__dummy__:true});if(!o){p.attachValidation()}},parse:function(o){var p=g(o).parents("form").andSelf().add(g(o).find("form")).filter("form");g(o).find(":input[data-val=true]").each(function(){m.unobtrusive.parseElement(this,true)});p.each(function(){var q=a(this);if(q){q.attachValidation()}})}};n=m.unobtrusive.adapters;n.add=function(q,p,o){if(!o){o=p;p=[]}this.push({name:q,params:p,adapt:o});return this};n.addBool=function(p,o){return this.add(p,function(q){l(q,o||p,true)})};n.addMinMax=function(t,s,q,p,o,r){return this.add(t,[o||"min",r||"max"],function(v){var w=v.params.min,u=v.params.max;if(w&&u){l(v,p,[w,u])}else{if(w){l(v,s,w)}else{if(u){l(v,q,u)}}}})};n.addSingleVal=function(q,o,p){return this.add(q,[o||"val"],function(r){l(r,p||q,r.params[o])})};m.addMethod("__dummy__",function(p,o,q){return true});m.addMethod("regex",function(q,p,r){var o;if(this.optional(p)){return true}o=new RegExp(r).exec(q);return(o&&(o.index===0)&&(o[0].length===q.length))});n.addSingleVal("accept","exts").addSingleVal("regex","pattern");n.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");n.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");n.add("equalto",["other"],function(p){var r=f(p.element.name),o=p.params.other,s=c(o,r),q=g(p.form).find(":input[name='"+i(s)+"']")[0];l(p,"equalTo",q)});n.add("required",function(o){if(o.element.tagName.toUpperCase()!=="INPUT"||o.element.type.toUpperCase()!=="CHECKBOX"){l(o,"required",true)}});n.add("remote",["url","type","additionalfields"],function(o){var q={url:o.params.url,type:o.params.type||"GET",data:{}},p=f(o.element.name);g.each(e(o.params.additionalfields||o.element.name),function(r,t){var s=c(t,p);q.data[s]=function(){return g(o.form).find(":input[name='"+i(s)+"']").val()}});l(o,"remote",q)});g(function(){m.unobtrusive.parse(document)})}(jQuery));