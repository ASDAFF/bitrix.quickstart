(function(e){var g="countdown";var b=0;var f=1;var c=2;var a=3;var i=4;var h=5;var d=6;e.JQPlugin.createPlugin({name:g,defaultOptions:{until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:false,padZeroes:false,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:false,onExpiry:null,onTick:null,tickInterval:1},regionalOptions:{"":{labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:false}},_getters:["getTimes"],_rtlClass:g+"-rtl",_sectionClass:g+"-section",_amountClass:g+"-amount",_periodClass:g+"-period",_rowClass:g+"-row",_holdingClass:g+"-holding",_showClass:g+"-show",_descrClass:g+"-descr",_timerElems:[],_init:function(){var k=this;this._super();this._serverSyncs=[];var l=(typeof Date.now=="function"?Date.now:function(){return new Date().getTime()});var j=(window.performance&&typeof window.performance.now=="function");function n(p){var q=(p<1000000000000?(j?(performance.now()+performance.timing.navigationStart):l()):p||l());if(q-m>=1000){k._updateElems();m=q}o(n)}var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;var m=0;if(!o||e.noRequestAnimationFrame){e.noRequestAnimationFrame=null;setInterval(function(){k._updateElems()},980)}else{m=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||l();o(n)}},UTCDate:function(l,p,n,q,r,k,m,j){if(typeof p=="object"&&p.constructor==Date){j=p.getMilliseconds();m=p.getSeconds();k=p.getMinutes();r=p.getHours();q=p.getDate();n=p.getMonth();p=p.getFullYear()}var o=new Date();o.setUTCFullYear(p);o.setUTCDate(1);o.setUTCMonth(n||0);o.setUTCDate(q||1);o.setUTCHours(r||0);o.setUTCMinutes((k||0)-(Math.abs(l)<30?l*60:l));o.setUTCSeconds(m||0);o.setUTCMilliseconds(j||0);return o},periodsToSeconds:function(j){return j[0]*31557600+j[1]*2629800+j[2]*604800+j[3]*86400+j[4]*3600+j[5]*60+j[6]},_instSettings:function(k,j){return{_periods:[0,0,0,0,0,0,0]}},_addElem:function(j){if(!this._hasElem(j)){this._timerElems.push(j)}},_hasElem:function(j){return(e.inArray(j,this._timerElems)>-1)},_removeElem:function(j){this._timerElems=e.map(this._timerElems,function(k){return(k==j?null:k)})},_updateElems:function(){for(var j=this._timerElems.length-1;j>=0;j--){this._updateCountdown(this._timerElems[j])}},_optionsChanged:function(m,n,k){if(k.layout){k.layout=k.layout.replace(/&lt;/g,"<").replace(/&gt;/g,">")}this._resetExtraLabels(n.options,k);var l=(n.options.timezone!=k.timezone);e.extend(n.options,k);this._adjustSettings(m,n,k.until!=null||k.since!=null||l);var j=new Date();if((n._since&&n._since<j)||(n._until&&n._until>j)){this._addElem(m[0])}this._updateCountdown(m,n)},_updateCountdown:function(m,n){m=m.jquery?m:e(m);n=n||this._getInst(m);if(!n){return}m.html(this._generateHTML(n)).toggleClass(this._rtlClass,n.options.isRTL);if(e.isFunction(n.options.onTick)){var l=n._hold!="lap"?n._periods:this._calculatePeriods(n,n._show,n.options.significant,new Date());if(n.options.tickInterval==1||this.periodsToSeconds(l)%n.options.tickInterval==0){n.options.onTick.apply(m[0],[l])}}var j=n._hold!="pause"&&(n._since?n._now.getTime()<n._since.getTime():n._now.getTime()>=n._until.getTime());if(j&&!n._expiring){n._expiring=true;if(this._hasElem(m[0])||n.options.alwaysExpire){this._removeElem(m[0]);if(e.isFunction(n.options.onExpiry)){n.options.onExpiry.apply(m[0],[])}if(n.options.expiryText){var k=n.options.layout;n.options.layout=n.options.expiryText;this._updateCountdown(m[0],n);n.options.layout=k}if(n.options.expiryUrl){window.location=n.options.expiryUrl}}n._expiring=false}else{if(n._hold=="pause"){this._removeElem(m[0])}}},_resetExtraLabels:function(k,j){for(var l in j){if(l.match(/[Ll]abels[02-9]|compactLabels1/)){k[l]=j[l]}}for(var l in k){if(l.match(/[Ll]abels[02-9]|compactLabels1/)&&typeof j[l]==="undefined"){k[l]=null}}},_adjustSettings:function(l,o,q){var k;var n=0;var r=null;for(var m=0;m<this._serverSyncs.length;m++){if(this._serverSyncs[m][0]==o.options.serverSync){r=this._serverSyncs[m][1];break}}if(r!=null){n=(o.options.serverSync?r:0);k=new Date()}else{var j=(e.isFunction(o.options.serverSync)?o.options.serverSync.apply(l[0],[]):null);k=new Date();n=(j?k.getTime()-j.getTime():0);this._serverSyncs.push([o.options.serverSync,n])}var p=o.options.timezone;p=(p==null?-k.getTimezoneOffset():p);if(q||(!q&&o._until==null&&o._since==null)){o._since=o.options.since;if(o._since!=null){o._since=this.UTCDate(p,this._determineTime(o._since,null));if(o._since&&n){o._since.setMilliseconds(o._since.getMilliseconds()+n)}}o._until=this.UTCDate(p,this._determineTime(o.options.until,k));if(n){o._until.setMilliseconds(o._until.getMilliseconds()+n)}}o._show=this._determineShow(o)},_preDestroy:function(j,k){this._removeElem(j[0]);j.empty()},pause:function(j){this._hold(j,"pause")},lap:function(j){this._hold(j,"lap")},resume:function(j){this._hold(j,null)},toggle:function(j){var k=e.data(j,this.name)||{};this[!k._hold?"pause":"resume"](j)},toggleLap:function(j){var k=e.data(j,this.name)||{};this[!k._hold?"lap":"resume"](j)},_hold:function(k,m){var l=e.data(k,this.name);if(l){if(l._hold=="pause"&&!m){l._periods=l._savePeriods;var j=(l._since?"-":"+");l[l._since?"_since":"_until"]=this._determineTime(j+l._periods[0]+"y"+j+l._periods[1]+"o"+j+l._periods[2]+"w"+j+l._periods[3]+"d"+j+l._periods[4]+"h"+j+l._periods[5]+"m"+j+l._periods[6]+"s");this._addElem(k)}l._hold=m;l._savePeriods=(m=="pause"?l._periods:null);e.data(k,this.name,l);this._updateCountdown(k,l)}},getTimes:function(j){var k=e.data(j,this.name);return(!k?null:(k._hold=="pause"?k._savePeriods:(!k._hold?k._periods:this._calculatePeriods(k,k._show,k.options.significant,new Date()))))},_determineTime:function(n,k){var j=this;var m=function(q){var p=new Date();p.setTime(p.getTime()+q*1000);return p};var l=function(t){t=t.toLowerCase();var q=new Date();var x=q.getFullYear();var v=q.getMonth();var y=q.getDate();var s=q.getHours();var r=q.getMinutes();var p=q.getSeconds();var w=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var u=w.exec(t);while(u){switch(u[2]||"s"){case"s":p+=parseInt(u[1],10);break;case"m":r+=parseInt(u[1],10);break;case"h":s+=parseInt(u[1],10);break;case"d":y+=parseInt(u[1],10);break;case"w":y+=parseInt(u[1],10)*7;break;case"o":v+=parseInt(u[1],10);y=Math.min(y,j._getDaysInMonth(x,v));break;case"y":x+=parseInt(u[1],10);y=Math.min(y,j._getDaysInMonth(x,v));break}u=w.exec(t)}return new Date(x,v,y,s,r,p,0)};var o=(n==null?k:(typeof n=="string"?l(n):(typeof n=="number"?m(n):n)));if(o){o.setMilliseconds(0)}return o},_getDaysInMonth:function(j,k){return 32-new Date(j,k,32).getDate()},_normalLabels:function(j){return j},_generateHTML:function(o){var v=this;o._periods=(o._hold?o._periods:this._calculatePeriods(o,o._show,o.options.significant,new Date()));var s=false;var l=0;var n=o.options.significant;var u=e.extend({},o._show);for(var r=b;r<=d;r++){s|=(o._show[r]=="?"&&o._periods[r]>0);u[r]=(o._show[r]=="?"&&!s?null:o._show[r]);l+=(u[r]?1:0);n-=(o._periods[r]>0?1:0)}var t=[false,false,false,false,false,false,false];for(var r=d;r>=b;r--){if(o._show[r]){if(o._periods[r]){t[r]=true}else{t[r]=n>0;n--}}}var p=(o.options.compact?o.options.compactLabels:o.options.labels);var k=o.options.whichLabels||this._normalLabels;var q=function(x){var w=o.options["compactLabels"+k(o._periods[x])];return(u[x]?v._translateDigits(o,o._periods[x])+(w?w[x]:p[x])+" ":"")};var j=(o.options.padZeroes?2:1);var m=function(x){var w=o.options["labels"+k(o._periods[x])];return((!o.options.significant&&u[x])||(o.options.significant&&t[x])?'<span class="'+v._sectionClass+'"><span class="'+v._amountClass+'">'+v._minDigits(o,o._periods[x],j)+'</span><span class="'+v._periodClass+'">'+(w?w[x]:p[x])+"</span></span>":"")};return(o.options.layout?this._buildLayout(o,u,o.options.layout,o.options.compact,o.options.significant,t):((o.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(o._hold?" "+this._holdingClass:"")+'">'+q(b)+q(f)+q(c)+q(a)+(u[i]?this._minDigits(o,o._periods[i],2):"")+(u[h]?(u[i]?o.options.timeSeparator:"")+this._minDigits(o,o._periods[h],2):"")+(u[d]?(u[i]||u[h]?o.options.timeSeparator:"")+this._minDigits(o,o._periods[d],2):""):'<span class="'+this._rowClass+" "+this._showClass+(o.options.significant||l)+(o._hold?" "+this._holdingClass:"")+'">'+m(b)+m(f)+m(c)+m(a)+m(i)+m(h)+m(d))+"</span>"+(o.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+o.options.description+"</span>":"")))},_buildLayout:function(o,v,q,s,w,u){var p=o.options[s?"compactLabels":"labels"];var k=o.options.whichLabels||this._normalLabels;var j=function(y){return(o.options[(s?"compactLabels":"labels")+k(o._periods[y])]||p)[y]};var t=function(z,y){return o.options.digits[Math.floor(z/y)%10]};var l={desc:o.options.description,sep:o.options.timeSeparator,yl:j(b),yn:this._minDigits(o,o._periods[b],1),ynn:this._minDigits(o,o._periods[b],2),ynnn:this._minDigits(o,o._periods[b],3),y1:t(o._periods[b],1),y10:t(o._periods[b],10),y100:t(o._periods[b],100),y1000:t(o._periods[b],1000),ol:j(f),on:this._minDigits(o,o._periods[f],1),onn:this._minDigits(o,o._periods[f],2),onnn:this._minDigits(o,o._periods[f],3),o1:t(o._periods[f],1),o10:t(o._periods[f],10),o100:t(o._periods[f],100),o1000:t(o._periods[f],1000),wl:j(c),wn:this._minDigits(o,o._periods[c],1),wnn:this._minDigits(o,o._periods[c],2),wnnn:this._minDigits(o,o._periods[c],3),w1:t(o._periods[c],1),w10:t(o._periods[c],10),w100:t(o._periods[c],100),w1000:t(o._periods[c],1000),dl:j(a),dn:this._minDigits(o,o._periods[a],1),dnn:this._minDigits(o,o._periods[a],2),dnnn:this._minDigits(o,o._periods[a],3),d1:t(o._periods[a],1),d10:t(o._periods[a],10),d100:t(o._periods[a],100),d1000:t(o._periods[a],1000),hl:j(i),hn:this._minDigits(o,o._periods[i],1),hnn:this._minDigits(o,o._periods[i],2),hnnn:this._minDigits(o,o._periods[i],3),h1:t(o._periods[i],1),h10:t(o._periods[i],10),h100:t(o._periods[i],100),h1000:t(o._periods[i],1000),ml:j(h),mn:this._minDigits(o,o._periods[h],1),mnn:this._minDigits(o,o._periods[h],2),mnnn:this._minDigits(o,o._periods[h],3),m1:t(o._periods[h],1),m10:t(o._periods[h],10),m100:t(o._periods[h],100),m1000:t(o._periods[h],1000),sl:j(d),sn:this._minDigits(o,o._periods[d],1),snn:this._minDigits(o,o._periods[d],2),snnn:this._minDigits(o,o._periods[d],3),s1:t(o._periods[d],1),s10:t(o._periods[d],10),s100:t(o._periods[d],100),s1000:t(o._periods[d],1000)};var n=q;for(var m=b;m<=d;m++){var r="yowdhms".charAt(m);var x=new RegExp("\\{"+r+"<\\}([\\s\\S]*)\\{"+r+">\\}","g");n=n.replace(x,((!w&&v[m])||(w&&u[m])?"$1":""))}e.each(l,function(A,y){var z=new RegExp("\\{"+A+"\\}","g");n=n.replace(z,y)});return n},_minDigits:function(l,k,j){k=""+k;if(k.length>=j){return this._translateDigits(l,k)}k="0000000000"+k;return this._translateDigits(l,k.substr(k.length-j))},_translateDigits:function(k,j){return(""+j).replace(/[0-9]/g,function(l){return k.options.digits[l]})},_determineShow:function(k){var l=k.options.format;var j=[];j[b]=(l.match("y")?"?":(l.match("Y")?"!":null));j[f]=(l.match("o")?"?":(l.match("O")?"!":null));j[c]=(l.match("w")?"?":(l.match("W")?"!":null));j[a]=(l.match("d")?"?":(l.match("D")?"!":null));j[i]=(l.match("h")?"?":(l.match("H")?"!":null));j[h]=(l.match("m")?"?":(l.match("M")?"!":null));j[d]=(l.match("s")?"?":(l.match("S")?"!":null));return j},_calculatePeriods:function(m,A,q,k){m._now=k;m._now.setMilliseconds(0);var o=new Date(m._now.getTime());if(m._since){if(k.getTime()<m._since.getTime()){m._now=k=o}else{k=m._since}}else{o.setTime(m._until.getTime());if(k.getTime()>m._until.getTime()){m._now=k=o}}var j=[0,0,0,0,0,0,0];if(A[b]||A[f]){var v=this._getDaysInMonth(k.getFullYear(),k.getMonth());var w=this._getDaysInMonth(o.getFullYear(),o.getMonth());var p=(o.getDate()==k.getDate()||(o.getDate()>=Math.min(v,w)&&k.getDate()>=Math.min(v,w)));var z=function(C){return(C.getHours()*60+C.getMinutes())*60+C.getSeconds()};var r=Math.max(0,(o.getFullYear()-k.getFullYear())*12+o.getMonth()-k.getMonth()+((o.getDate()<k.getDate()&&!p)||(p&&z(o)<z(k))?-1:0));j[b]=(A[b]?Math.floor(r/12):0);j[f]=(A[f]?r-j[b]*12:0);k=new Date(k.getTime());var B=(k.getDate()==v);var n=this._getDaysInMonth(k.getFullYear()+j[b],k.getMonth()+j[f]);if(k.getDate()>n){k.setDate(n)}k.setFullYear(k.getFullYear()+j[b]);k.setMonth(k.getMonth()+j[f]);if(B){k.setDate(n)}}var u=Math.floor((o.getTime()-k.getTime())/1000);var l=function(D,C){j[D]=(A[D]?Math.floor(u/C):0);u-=j[D]*C};l(c,604800);l(a,86400);l(i,3600);l(h,60);l(d,1);if(u>0&&!m._since){var s=[1,12,4.3482,7,24,60,60];var t=d;var x=1;for(var y=d;y>=b;y--){if(A[y]){if(j[t]>=x){j[t]=0;u=1}if(u>0){j[y]++;u=0;t=y;x=1}}x*=s[y]}}if(q){for(var y=b;y<=d;y++){if(q&&j[y]){q--}else{if(!q){j[y]=0}}}}return j}})})(jQuery);