<?require_once($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/main/include/prolog_admin_before.php");IncludeModuleLangFile(__FILE__);CModule::IncludeModule('redsign.grupper');if($_REQUEST["tabControl_active_tab"]=="grupper_edit"){	$arFields = array(		"NAME" => trim(htmlspecialchars($_REQUEST["name"])),		"CODE" => trim(htmlspecialchars($_REQUEST["code"])),		"SORT" => trim(htmlspecialchars($_REQUEST["sort"])),		"ICON_PATH" => trim($_REQUEST["icon_path"]),	);	if($arFields["NAME"]!="")	{		if(IntVal($_REQUEST["ID"])>0)		{			$ID = CRSGGroups::Update($_REQUEST["ID"], $arFields);		} else {			$ID = CRSGGroups::Add($arFields);		}		if(IntVal($ID)<1)		{			$arErrors[] = GetMessage("GRUPPER_ERROR_ADD");		} elseif(IntVal($ID)>0 && isset($_REQUEST["apply"]))		{			LocalRedirect( "redsign_grupper_edit.php?lang=".LANG."&ID=".$ID );		}		 elseif(IntVal($ID)>0 && isset($_REQUEST["save"]))		{			LocalRedirect( "redsign_grupper.php?lang=".LANG );		}	} else {		$arErrors[] = GetMessage("GRUPPER_ERROR_ADD");	}}// tabs list$aTabs = array(	array(		"DIV" => "grupper_edit",		"TAB" => GetMessage("GRUPPER_TAB1_NAME"),		"ICON" => "main_user_edit",		"TITLE" => GetMessage("GRUPPER_POPUPADV_TAB1_DESCRIPTION")	),);$tabControl = new CAdminTabControl("tabControl", $aTabs);// context menu$aContext = array(	array(		"TEXT" => GetMessage("GRUPPER_CONTEXT_MENU_LIST"),		"LINK" => "redsign_grupper.php?lang=".LANG,		"TITLE" => "",		"ICON" => "btn_list",	),);$oMenu = new CAdminContextMenu($aContext);// set page title$APPLICATION->SetTitle( GetMessage("GRUPPER_POPUPADV_PAGE_TITLE") );// include prologrequire($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/main/include/prolog_admin_after.php");// show errorsif(count($arErrors)>0){	CAdminMessage::ShowMessage( implode('<br />', $arErrors) );}// show context menu$oMenu->Show();// show form?><form id="redsign_grupper" method="POST" action="<?=$APPLICATION->GetCurPage()?>" ENCTYPE="multipart/form-data" name="redsign_grupper"><?// sessid_id checkerecho bitrix_sessid_post();// tabs header$tabControl->Begin();//___________________________________________________________________________________________// tab//___________________________________________________________________________________________if(IntVal($_REQUEST["ID"])>0){	$dbRes = CRSGGroups::GetByID(IntVal($_REQUEST["ID"]));	$arGroup = $dbRes->Fetch();}$tabControl->BeginNextTab();if($arGroup["ID"]>0){	?><input type="hidden" name="ID" value="<?=$arGroup["ID"]?>" /><?}	?><tr>		<td width="40%" valign="top" align="right"><span class="required">*</span><?=GetMessage("GRUPPER_GROUP_NAME")?>:</td>		<td width="60%"><input type="text" name="name" value="<?=$arGroup["NAME"]?>" /></td>	</tr>	<tr>		<td width="40%" valign="top" align="right"><?=GetMessage("GRUPPER_GROUP_CODE")?>:</td>		<td width="60%"><input type="text" name="code" value="<?=$arGroup["CODE"]?>" /></td>	</tr>	<tr>		<td width="40%" valign="top" align="right"><?=GetMessage("GRUPPER_SORT")?>:</td>		<td width="60%"><input type="text" name="sort" value="<?=($arGroup["SORT"]>0 ? $arGroup["SORT"] : 500)?>" /></td>	</tr>	<tr>		<td width="40%" valign="top" align="right"><?=GetMessage("GRUPPER_ICON_PATH")?>:</td>		<td width="60%"><input type="text" name="icon_path" value="<?=$arGroup["ICON_PATH"]?>" /> 			<input type="button" value="<?=GetMessage("IMYIE_BTN_FILEDIALOG")?>" OnClick="BtnFileDialogOpenIconPath()"><?			CAdminFileDialog::ShowScript(				Array(					"event" => "BtnFileDialogOpenIconPath",					"arResultDest" => array("FORM_NAME" => "redsign_grupper", "FORM_ELEMENT_NAME" => "icon_path"),					"arPath" => array("SITE" => SITE_ID, "PATH" => ""),					"select" => 'F',// F - file only, D - folder only					"operation" => 'O',// O - open, S - save					"showUploadTab" => true,					"showAddToMenuTab" => false,					"fileFilter" => 'jpg,png,jpeg,gif',					"allowAllFiles" => true,					"SaveConfig" => true,				)			);?></td>	</tr>		<input type="hidden" name="lang" value="<?=LANG?>"><?// tab bottons$tabControl->Buttons(	array(		"back_url" => "redsign_grupper.php?lang=".LANG,	));// tab footer$tabControl->End();// include epilogrequire($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/main/include/epilog_admin.php");?>