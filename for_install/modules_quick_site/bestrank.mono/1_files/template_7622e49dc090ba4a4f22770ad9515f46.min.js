var SliderBanner;if(typeof wo_opacity!="undefined"){SliderBanner=function(e){this.reposition=function(){f=920;c.style.left=-1*a*f+"px";for(var s=0;s<b.length;s++){b[s].style.width=f+"px"}};this.slide_move_left=function(s){n=true;BX.PreventDefault(s);if(a==(b.length-1)){a=0}else{a=a+1}if(!m&&a<b.length){return this.view_slide(a)}else{a=a-1;return false}};this.slide_move_right=function(s){n=true;BX.PreventDefault(s);if(a==0){a=b.length-1}else{a=a-1}if(!m&&a>=0){this.view_slide(a)}else{a=a+1;return false}};this.view_slide=function(t){var v=parseInt(c.style.left.replace("px",""),10);var u=-1*t*f;var s;if(m){return false}m=true;if(v<=g&&v>=l){s=t;if(t==b.length-1){a=1}else{if(t==0){a=b.length-2}}this.addCurentClass(a);p=u;var w=this;(new BX.easing({duration:2000,start:{left:v},finish:{left:u},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function(x){c.style.left=x.left+"px"},complete:function(){m=false;c.style.left=-1*a*f+"px"}})).animate();return true}return false};this.pageClick=function(s,t){return function(u){BX.PreventDefault(u);if(!m){a=s;this.view_slide(s);n=true}}};this.autoSlider=function(){if(n){clearInterval(q);return}if(!m){if(a==(b.length-1)){a=0}else{a=a+1}this.view_slide(a)}};this.removeCurrentClass=function(){for(var s=0;s<d.length;s++){BX.removeClass(d[s],"current")}};this.addCurentClass=function(s){this.removeCurrentClass();BX.addClass(d[s-1],"current")};var a=1;var f=920;var c=BX(e);var b=BX.findChildren(c,{tagName:"DIV"});var g=f;var l=-1*(b.length+1)*f;var k=false;var n=false;var p=0;var m=false;var d=[];for(var h=0;h<b.length;h++){el=BX.create("LI",{children:[BX.create("A",{props:{href:""},events:{click:BX.delegate(this.pageClick(h+1),this)}})]});BX(e+"_pages").appendChild(el);d[h]=el}var o=b[0];var r=b[b.length-1];c.innerHTML=r.outerHTML+c.innerHTML+o.outerHTML;var b=BX.findChildren(c,{tagName:"DIV"});this.reposition();BX.addClass(d[0],"current");BX.bind(BX("sl_prev_slide"),"click",BX.delegate(this.slide_move_right,this));BX.bind(BX("sl_next_slide"),"click",BX.delegate(this.slide_move_left,this));BX.bind(window,"resize",this.reposition);var q=setInterval(BX.delegate(this.autoSlider,this),7000)}}else{SliderBanner=function(e){this.reposition=function(){f=920;c.style.left=-1*a*f+"px";for(var s=0;s<b.length;s++){b[s].style.width=f+"px";b[s].style.opacity=0}b[a].style.opacity=1};this.slide_move_left=function(s){n=true;BX.PreventDefault(s);if(a==(b.length-1)){a=0}else{a=a+1}if(!m&&a<b.length){return this.view_slide(a)}else{a=a-1;return false}};this.slide_move_right=function(s){n=true;BX.PreventDefault(s);if(a==0){a=b.length-1}else{a=a-1}if(!m&&a>=0){this.view_slide(a)}else{a=a+1;return false}};this.view_slide=function(t){var v=parseInt(c.style.left.replace("px",""),10);var u=-1*t*f;var s;if(m){return false}m=true;if(v<=g&&v>=l){s=t;if(t==b.length-1){a=1}else{if(t==0){a=b.length-2}}this.addCurentClass(a);p=u;var w=this;(new BX.easing({duration:2000,start:{left:v,opacity:0},finish:{left:u,opacity:100},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function(x){c.style.left=x.left+"px";b[t].style.opacity=x.opacity/100},complete:function(){m=false;if(s!=undefined){b[s].style.opacity=0;b[a].style.opacity=1}c.style.left=-1*a*f+"px"}})).animate();(new BX.easing({duration:1400,start:{opacity:100},finish:{opacity:0},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function(y){for(var x=0;x<b.length;x++){if(x==t){continue}b[x].style.opacity=y.opacity/100}}})).animate();return true}return false};this.pageClick=function(s,t){return function(v){BX.PreventDefault(v);if(!m){for(var u=0;u<b.length;u++){b[u].style.opacity=1}a=s;this.view_slide(s);n=true}}};this.autoSlider=function(){if(n){clearInterval(q);return}if(!m){if(a==(b.length-1)){a=0}else{a=a+1}this.view_slide(a)}};this.removeCurrentClass=function(){for(var s=0;s<d.length;s++){BX.removeClass(d[s],"current")}};this.addCurentClass=function(s){this.removeCurrentClass();BX.addClass(d[s-1],"current")};var a=1;var f=920;var c=BX(e);var b=BX.findChildren(c,{tagName:"DIV"});var g=f;var l=-1*(b.length+1)*f;var k=false;var n=false;var p=0;var m=false;var d=[];for(var h=0;h<b.length;h++){el=BX.create("LI",{children:[BX.create("A",{props:{href:""},events:{click:BX.delegate(this.pageClick(h+1),this)}})]});BX(e+"_pages").appendChild(el);d[h]=el}var o=b[0];o.style.opacity=0;var r=b[b.length-1];r.style.opacity=0;c.innerHTML=r.outerHTML+c.innerHTML+o.outerHTML;var b=BX.findChildren(c,{tagName:"DIV"});this.reposition();BX.addClass(d[0],"current");BX.bind(BX("sl_prev_slide"),"click",BX.delegate(this.slide_move_right,this));BX.bind(BX("sl_next_slide"),"click",BX.delegate(this.slide_move_left,this));BX.bind(window,"resize",this.reposition);var q=setInterval(BX.delegate(this.autoSlider,this),7000)}}var jsPublicTabController={SetTabCookieId:function(b,a){document.cookie="BxTabs["+b+"]="+a+"; path=/;"},SetTabCookieIdUnload:function(){for(i=0;i<2;i++){var a=document.getElementById("tab-list-id"+i);if(a){tab_li=a.getElementsByTagName("LI");for(j=0;j<tab_li.length;j++){if(tab_li[j].className=="active"){tab_a=tab_li[j].getElementsByTagName("A");tab_a[0].onclick()}}}else{break}}},TabToTabAnchor:function(a){tab=BX(a);if(tab){tab_a=tab.getElementsByTagName("A");tab_a[0].onclick();SetActiveTab(tab_a[0],true)}}};if(window.jsAjaxUtil){jsAjaxUtil.ShowLocalWaitWindow=function(m,o,c){if(typeof o=="string"||typeof o=="object"&&o.constructor==String){var l=document.getElementById(o)}else{var l=o}if(l.getBoundingClientRect){var k=l.getBoundingClientRect();var n=jsAjaxUtil.GetWindowSize();var h={left:k.left+n.scrollLeft,top:k.top+n.scrollTop,right:k.right+n.scrollLeft,bottom:k.bottom+n.scrollTop}}else{var h=jsAjaxUtil.GetRealPos(l)}var f=l.id;if(!h){return}if(null==c){c=true}if(c){var g=document.body.appendChild(document.createElement("DIV"));g.id="waitshadow_"+f+"_"+m;g.className="waitwindowlocalshadow";g.style.top=(h.top-5)+"px";g.style.left=(h.left-5)+"px";g.style.height=(h.bottom-h.top+10)+"px";g.style.width=(h.right-h.left+10)+"px"}var d=document.body.appendChild(document.createElement("DIV"));d.id="wait_"+f+"_"+m;d.className="waitwindow";var a=h.top+5;if(a<document.body.scrollTop){a=document.body.scrollTop+5}d.style.top=a+"px";d.style.left=(h.left+5)+"px";d.innerHTML="��������...";if(jsAjaxUtil.IsIE()){var b=document.createElement("IFRAME");b.src="javascript:''";b.id="waitframe_"+f+"_"+m;b.className="waitwindow";b.style.width=d.offsetWidth+"px";b.style.height=d.offsetHeight+"px";b.style.left=d.style.left;b.style.top=d.style.top;document.body.appendChild(b)}function e(p){if(!p){p=window.event}if(!p){return}if(p.keyCode==27){jsAjaxUtil.CloseLocalWaitWindow(m,o);jsEvent.removeEvent(document,"keypress",e)}}jsEvent.addEvent(document,"keypress",e)}}if(document.location.hash.indexOf("#tab-")!=-1){var selectedTabRaw=document.location.hash.substr(5,document.location.hash.length);var SubAnchor=false;var selectedTabID=false;if(selectedTabRaw.indexOf("!")!=-1){SubAnchor=selectedTabRaw.substr(selectedTabRaw.indexOf("!")+1);selectedTabID=selectedTabRaw.substr(0,selectedTabRaw.indexOf("!")-5)}else{if(selectedTabRaw.indexOf("@")!=-1){SubAnchor=document.location.hash.substr(1,document.location.hash.length);selectedTabID=selectedTabRaw.substr(0,selectedTabRaw.indexOf("@")-5)}else{selectedTabID=selectedTabRaw.substr(0,selectedTabRaw.length-5)}}window.onload=function(){var a=document.getElementById("tab-"+selectedTabID);if(a&&a.childNodes[0]){SetActiveTab(a.childNodes[0],true)}if(SubAnchor){window.location=String(window.location).replace(/\#.*$/,"")+"#"+SubAnchor}else{window.location=String(window.location).replace(/\#.*$/,"")+"#tab-"+selectedTabRaw}}}function systemAuthFormComponent_openBlock(){var a=BX("hd_loginform_container");if(a.style.display=="block"){BX.hide(a)}else{BX.show(a);BX.focus(BX("USER_LOGIN_INPUT"));BX.bind(document,"keyup",function(b){if(a.style.display=="block"){b=b||window.event;switch(b.keyCode){case 27:systemAuthFormComponent_closeBlock();break}}})}return false}function systemAuthFormComponent_closeBlock(){BX.hide(BX("hd_loginform_container"))}function systemAuthFormComponent_logout(){BX("auth-logout-form").submit();return false}BX.foreach=function(a,b){if(BX.type.isElementNode(a)){b(a)}if(BX.type.isArray(a)){for(key in a){b(a[key])}}};BX.getElementsByClass=function(g,e,a){var d=new Array();if(e==null){e=document}if(a==null){a="*"}var c=e.getElementsByTagName(a);var b=c.length;var f=new RegExp("(^|\\s)"+g+"(\\s|$)");for(i=0,j=0;i<b;i++){if(f.test(c[i].className)){d[j]=c[i];j++}}return d};window.BXSite=function(b,a){return null};BXSite.Fix=function(a,b){if(!a.BXFIXER){a.BXFIXER=new BXSite.CFixer(a,b)}a.BXFIXER.Start()};BXSite.UnFix=function(a){if(!!a&&!!a.BXFIXER){a.BXFIXER.Stop()}};BXSite.CFixer=function(a,b){this.node=a;this.params=b||{type:"top"};this.pos={};this.limit=-1;this.position_top=null;this.position_bottom=null;this.position_right=null;this.bStarted=false;this.bFixed=false;this.gutter=null};BXSite.CFixer.prototype.Start=function(){if(this.bStarted){return}this.pos=BX.pos(this.node);BX.bind(window,"scroll",BX.proxy(this._scroll_listener,this));BX.bind(window,"resize",BX.proxy(this._scroll_listener,this));BX.bind(window,"resize",BX.proxy(this._recalc_pos,this));this._scroll_listener();this.bStarted=true};BXSite.CFixer.prototype.Stop=function(){if(!this.bStarted){return}this._UnFix();BX.unbind(window,"scroll",BX.proxy(this._scroll_listener,this));BX.unbind(window,"resize",BX.proxy(this._scroll_listener,this));BX.unbind(window,"resize",BX.proxy(this._recalc_pos,this));this.bStarted=false};BXSite.CFixer.prototype._recalc_pos=function(){this.pos=BX.pos(this.gutter||this.node);var a=BX.pos(this.node);if(this.bFixed){if(this.params.type=="top"||this.params.type=="bottom"){if(this.params.paddingWidth>0){this.pos.width-=this.params.paddingWidth}this.node.style.width=this.pos.width+"px"}}this._scroll_listener()};BXSite.CFixer.prototype._Fix=function(){if(!this.bFixed){this.pos=BX.pos(this.gutter||this.node);if(!this.gutter){this.gutter=this.node.parentNode.insertBefore(BX.create(this.node.tagName,{style:{display:"block",height:this.pos.height+"px"},props:{className:this.node.className}}),this.node)}if(this.params.paddingWidth>0){this.pos.width-=this.params.paddingWidth}this._w=this.node.style.width;this.node.style.width=this.pos.width+"px";BX.addClass(this.node,"bxsite-fixed-"+this.params.type);if(this["position_"+this.params.type]!==null){this.node.style[this.params.type]=this["position_"+this.params.type]+"px"}this.bFixed=true}};BXSite.CFixer.prototype._UnFix=function(a){if(this.bFixed){this.node.style.width=this._w;BX.removeClass(this.node,"bxsite-fixed-"+this.params.type);this.node.style[this.params.type]=null;this.bFixed=false;if(!a){if(this.gutter&&this.gutter.parentNode){this.gutter.parentNode.removeChild(this.gutter)}this.gutter=null;this._check_scroll(this.pos.left,this.pos.top)}}};BXSite.CFixer.prototype._ReFix=function(){if(this.bFixed){this._UnFix(true);BX.defer(this._Fix,this)()}};BXSite.CFixer.prototype._scroll_listener=function(){var c=BX.GetWindowScrollPos(),b=this.bFixed;if(!BX.isNodeInDom(this.node)){return this.Stop()}var e=b?this.pos:BX.pos(this.node);if(this.params.limit_node){var d=BX.pos(this.params.limit_node);switch(this.params.type){case"top":this.limit=d.bottom-this.pos.height;break;case"bottom":this.limit=d.top+this.pos.height;break;case"right":this.limit=d.right+this.node.offsetWidth;break}}if(!BX.isNodeHidden(this.node)){switch(this.params.type){case"top":this.position_top=0;if(this.limit>0&&c.scrollTop+this.position_top>this.limit){this._UnFix()}else{if(!this.bFixed&&c.scrollTop+this.position_top>=e.top){this._Fix()}else{if(this.bFixed&&c.scrollTop+this.position_top<e.top){this._UnFix()}}}break;case"bottom":var a=BX.GetWindowInnerSize();c.scrollBottom=c.scrollTop+a.innerHeight;if(this.limit>0&&c.scrollBottom<this.limit){this._UnFix()}else{if(!this.bFixed&&c.scrollBottom<e.bottom){this._Fix()}else{if(this.bFixed&&c.scrollBottom>=e.bottom){this._UnFix()}}}break;case"right":var a=BX.GetWindowInnerSize();c.scrollRight=c.scrollLeft+a.innerWidth-15;if(this.limit>0&&c.scrollRight<this.limit){this._UnFix()}else{if(!this.bFixed&&c.scrollRight<e.right){this._Fix()}else{if(this.bFixed&&c.scrollRight>=e.right){this._UnFix()}}}break}}else{if(this.bFixed){this._UnFix()}}if(this.bFixed){this._check_scroll(c.scrollLeft,c.scrollTop)}else{this._check_scroll(this.pos.left,this.pos.top)}if(b!=this.bFixed){BX.onCustomEvent(this.node,"onFixedNodeChangeState",[this.bFixed])}};BXSite.CFixer.prototype._check_scroll=function(b,a){if(this.params.type=="top"||this.params.type=="bottom"){this.node.style.left=(this.pos.left-b)+"px"}else{this.node.style.top=(this.pos.top-a)+"px"}if(this.bFixed&&this["position_"+this.params.type]!==null){this.node.style[this.params.type]=this["position_"+this.params.type]+"px"}};BX.ready(function(){var a=BX("tab-list-id0");if(a){BXSite.Fix(a,{paddingWidth:"25",type:"top",limit_node:BX.nextSibling(a)})}else{var a=BX("tab-list-id1");if(a){BXSite.Fix(a,{paddingWidth:"25",type:"top",limit_node:BX.nextSibling(a)})}}});function SetActiveTab(d,g){var c=d.parentNode.parentNode;BX.foreach(BX.findChildren(c,{tag:"li"}),function(k){k.className="";var h=BX(k.id+"-body");if(h){BX.hide(h)}});var b=BX(d.parentNode.id+"-body");if(b){d.parentNode.className="active";d.blur();BX.show(b);if(!g){tabsBlock=BX("tab-list-id0");if(BX.hasClass(tabsBlock,"bxsite-fixed-top")){var f=BX.pos(d.parentNode.parentNode.parentNode),a=BX.GetWindowScrollPos();window.scrollTo(a.scrollLeft,f.top-tabsBlock.offsetHeight-parseInt(tabsBlock.style.top))}resizeWorkArea(true);var e=new BX.easing({duration:500,start:{opacity:0},finish:{opacity:100},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function(h){b.style.opacity=h.opacity/100},complete:function(){b.style.height="auto";b.style.overflowY="visible"}});e.animate()}}}function resizeWorkArea(d){var f=BX("bx-all-page-content");var e=BX.findChild(f,{className:"sidebar"},true,false);var b=BX.findChild(f,{className:"workarea"},true,false);if(b&&e&&e.clientHeight>=b.clientHeight){var a=0;var g=0;var c=BX.findChild(f,{className:"breadcrumbs"},true,false);if(c){a=c.clientHeight+15}var c=BX.findChild(f,{className:"wa_banners"},true,false);if(c){g=c.clientHeight+60}var c=BX.findChild(f,{className:"wa_page"},true,false);if(c){c.style.minHeight=(e.clientHeight-g-a-66-25)+"px"}}else{if(d){var c=BX.findChild(f,{className:"wa_page"},true,false);if(c!=null&&!isNaN(parseInt(c.style.minHeight))&&b.clientHeight>parseInt(c.style.minHeight)){c.style.minHeight=""}}}}var aditCSS="";if(BX.browser.IsIOS()){aditCSS="ios"}else{if(BX.browser.IsAndroid()){aditCSS="andr"}else{if(/MSIE 6/.test(navigator.userAgent)||/MSIE 6/.test(navigator.userAgent)||/MSIE 8/.test(navigator.userAgent)){aditCSS="ie7"}else{if(/MSIE 9/.test(navigator.userAgent)){aditCSS="ie9"}else{if(/Opera/.test(navigator.userAgent)){aditCSS="op"}}}}}if(aditCSS.length>0){BX.loadCSS("/bitrix/templates/1c-bitrix-new/css/styles_"+aditCSS+".css")}var authFormWindow={form_window:null,overlay:null,form_window_id:"login-form-window",login_field_id:"auth-user-login",menuFocus:false,UserMenuDisplay:function(){var b=BX("top-menu");if(b){b.style.zIndex=5}var a=BX("top-site-menu");if(a){if(a.className=="top-site-menu"){a.className="top-site-menu-active";a.style.zIndex=100;BX.unbindAll(a);BX.bind(a,"mouseover",function(){a.className="top-site-menu-active";window.clearTimeout(authFormWindow.menuFocus)});BX.bind(a,"mouseout",function(){authFormWindow.menuFocus=window.setTimeout(function(){BX.unbindAll(a);a.className="top-site-menu";a.style.zIndex=0;if(b){b.style.zIndex=15}},200)})}}},UserMenuShow:function(c,d){var a=c.parentNode.parentNode.parentNode;var b="";if(d==1){b="user-auth-block"}else{if(d==2){b="user-auth-block-small"}}if(b!=""){a.className=b;BX.unbindAll(a);BX.bind(a,"mouseover",function(){a.className=b;window.clearTimeout(authFormWindow.menuFocus)});BX.bind(a,"mouseout",function(){authFormWindow.menuFocus=window.setTimeout(function(){BX.unbindAll(a);a.className=""},200)})}},ShowLoginForm:function(){if(!this.form_window){this.form_window=document.getElementById(this.form_window_id);if(!this.form_window){return false}try{document.body.appendChild(this.form_window)}catch(b){}}this.form_window.style.display="block";if(this.GetOpacityProperty()){this.CreateOverlay()}var a=document.getElementById(this.login_field_id);if(a){a.focus();a.select()}return false},CloseLoginForm:function(){if(this.form_window){this.form_window.style.display="none"}if(this.overlay){this.overlay.style.display="none"}return false},CreateOverlay:function(){if(!this.overlay){this.overlay=document.body.appendChild(document.createElement("DIV"));this.overlay.className="login-form-overlay";var b=this;this.overlay.onclick=function(){b.CloseLoginForm()}}var a=this.GetWindowScrollSize();this.overlay.style.width=a.scrollWidth+"px";this.overlay.style.height=a.scrollHeight+"px";this.overlay.style.display="block"},GetOpacityProperty:function(){if(typeof document.body.style.opacity=="string"){return"opacity"}else{if(typeof document.body.style.MozOpacity=="string"){return"MozOpacity"}else{if(typeof document.body.style.KhtmlOpacity=="string"){return"KhtmlOpacity"}else{if(document.body.filters&&navigator.appVersion.match(/MSIE ([\d.]+);/)[1]>=5.5){return"filter"}}}}return false},GetWindowScrollSize:function(c){var b,a;if(!c){c=document}if((c.compatMode&&c.compatMode=="CSS1Compat")){b=c.documentElement.scrollWidth;a=c.documentElement.scrollHeight}else{if(c.body.scrollHeight>c.body.offsetHeight){a=c.body.scrollHeight}else{a=c.body.offsetHeight}if(c.body.scrollWidth>c.body.offsetWidth||(c.compatMode&&c.compatMode=="BackCompat")||(c.documentElement&&!c.documentElement.clientWidth)){b=c.body.scrollWidth}else{b=c.body.offsetWidth}}return{scrollWidth:b,scrollHeight:a}}};function systemAuthFormComponent_logout(){BX("auth-logout-form").submit();return false}function systemAuthFormComponent_openBlock(){var a=BX("hd_loginform_container");if(a.style.display=="block"){BX.hide(a)}else{BX.show(a);BX.focus(BX("USER_LOGIN_INPUT"));BX.bind(document,"keyup",function(b){if(a.style.display=="block"){b=b||window.event;switch(b.keyCode){case 27:systemAuthFormComponent_closeBlock();break}}})}return false}function systemAuthFormComponent_closeBlock(){BX.hide(BX("hd_loginform_container"))}var authPreloadImages=["rt_round_menu.png","rb_round_menu.png","lt_round_menu.png","lb_round_menu.png","l_menu.png","t_menu.png","r_menu.png","b_menu.png","close.gif","auth-form-bg.gif","avatar.png","exit_hover.gif","exit.gif"];for(var imageIndex=0;imageIndex<authPreloadImages.length;imageIndex++){var imageObj=new Image();imageObj.src="/bitrix/templates/.default/components/bitrix/system.auth.form/drop_auth/images/"+authPreloadImages[imageIndex]}authPreloadImages=null;BX.ready(function(){BX.bind(BX("authlogin"),"mouseover",function(){BX.show(BX("authlogin_menu"))});BX.bind(BX("authlogin"),"mouseout",function(){BX.hide(BX("authlogin_menu"))})});function JCTitleSearch(a){var b=this;this.arParams={AJAX_PAGE:a.AJAX_PAGE,CONTAINER_ID:a.CONTAINER_ID,INPUT_ID:a.INPUT_ID,MIN_QUERY_LEN:parseInt(a.MIN_QUERY_LEN)};if(a.WAIT_IMAGE){this.arParams.WAIT_IMAGE=a.WAIT_IMAGE}if(a.MIN_QUERY_LEN<=0){a.MIN_QUERY_LEN=1}this.cache=[];this.cache_key=null;this.startText="";this.running=false;this.currentRow=-1;this.RESULT=null;this.CONTAINER=null;this.INPUT=null;this.WAIT=null;this.ShowResult=function(f){if(BX.type.isString(f)){b.RESULT.innerHTML=f}b.RESULT.style.display=b.RESULT.innerHTML!==""?"block":"none";var g=b.adjustResultNode();var e;var h;var m=BX.findChild(b.RESULT,{tag:"table","class":"title-search-result"},true);if(m){h=BX.findChild(m,{tag:"th"},true)}if(h){var d=BX.pos(m);d.width=d.right-d.left;var c=BX.pos(h);c.width=c.right-c.left;h.style.width=c.width+"px";b.RESULT.style.width=g.width+c.width+"px";b.RESULT.style.left=g.left-c.width-1+"px";if(d.width-c.width>g.width){b.RESULT.style.width=g.width+c.width-1+"px"}d=BX.pos(m);e=BX.pos(b.RESULT);if(e.right>d.right){b.RESULT.style.width=d.right-d.left+"px"}}var k;if(m){k=BX.findChild(b.RESULT,{"class":"title-search-fader"},true)}if(k&&h){e=BX.pos(b.RESULT);k.style.left=e.right-e.left-18+"px";k.style.width=18+"px";k.style.top=0+"px";k.style.height=e.bottom-e.top+"px";k.style.display="block"}};this.onKeyPress=function(f){var g=BX.findChild(b.RESULT,{tag:"table","class":"title-search-result"},true);if(!g){return false}var e;var h=g.rows.length;switch(f){case 27:b.RESULT.style.display="none";b.currentRow=-1;b.UnSelectAll();return true;case 40:if(b.RESULT.style.display=="none"){b.RESULT.style.display="block"}var k=-1;for(e=0;e<h;e++){if(!BX.findChild(g.rows[e],{"class":"title-search-separator"},true)){if(k==-1){k=e}if(b.currentRow<e){b.currentRow=e;break}else{if(g.rows[e].className=="title-search-selected"){g.rows[e].className=""}}}}if(e==h&&b.currentRow!=e){b.currentRow=k}g.rows[b.currentRow].className="title-search-selected";return true;case 38:if(b.RESULT.style.display=="none"){b.RESULT.style.display="block"}var d=-1;for(e=h-1;e>=0;e--){if(!BX.findChild(g.rows[e],{"class":"title-search-separator"},true)){if(d==-1){d=e}if(b.currentRow>e){b.currentRow=e;break}else{if(g.rows[e].className=="title-search-selected"){g.rows[e].className=""}}}}if(e<0&&b.currentRow!=e){b.currentRow=d}g.rows[b.currentRow].className="title-search-selected";return true;case 13:if(b.RESULT.style.display=="block"){for(e=0;e<h;e++){if(b.currentRow==e){if(!BX.findChild(g.rows[e],{"class":"title-search-separator"},true)){var c=BX.findChild(g.rows[e],{tag:"a"},true);if(c){window.location=c.href;return true}}}}}return false}return false};this.onTimeout=function(){b.onChange(function(){setTimeout(b.onTimeout,500)})};this.onChange=function(d){if(b.running){return}b.running=true;if(b.INPUT.value!=b.oldValue&&b.INPUT.value!=b.startText){b.oldValue=b.INPUT.value;if(b.INPUT.value.length>=b.arParams.MIN_QUERY_LEN){b.cache_key=b.arParams.INPUT_ID+"|"+b.INPUT.value;if(b.cache[b.cache_key]==null){if(b.WAIT){var e=BX.pos(b.INPUT);var c=e.bottom-e.top-2;b.WAIT.style.top=e.top+1+"px";b.WAIT.style.height=c+"px";b.WAIT.style.width=c+"px";b.WAIT.style.left=e.right-c+2+"px";b.WAIT.style.display="block"}BX.ajax.post(b.arParams.AJAX_PAGE,{ajax_call:"y",INPUT_ID:b.arParams.INPUT_ID,q:b.INPUT.value,l:b.arParams.MIN_QUERY_LEN},function(f){b.cache[b.cache_key]=f;b.ShowResult(f);b.currentRow=-1;b.EnableMouseEvents();if(b.WAIT){b.WAIT.style.display="none"}if(!!d){d()}b.running=false});return}else{b.ShowResult(b.cache[b.cache_key]);b.currentRow=-1;b.EnableMouseEvents()}}else{b.RESULT.style.display="none";b.currentRow=-1;b.UnSelectAll()}}if(!!d){d()}b.running=false};this.UnSelectAll=function(){var d=BX.findChild(b.RESULT,{tag:"table","class":"title-search-result"},true);if(d){var e=d.rows.length;for(var c=0;c<e;c++){d.rows[c].className=""}}};this.EnableMouseEvents=function(){var d=BX.findChild(b.RESULT,{tag:"table","class":"title-search-result"},true);if(d){var e=d.rows.length;for(var c=0;c<e;c++){if(!BX.findChild(d.rows[c],{"class":"title-search-separator"},true)){d.rows[c].id="row_"+c;d.rows[c].onmouseover=function(f){if(b.currentRow!=this.id.substr(4)){b.UnSelectAll();this.className="title-search-selected";b.currentRow=this.id.substr(4)}};d.rows[c].onmouseout=function(f){this.className="";b.currentRow=-1}}}}};this.onFocusLost=function(c){setTimeout(function(){b.RESULT.style.display="none"},250)};this.onFocusGain=function(){if(b.RESULT.innerHTML.length){b.ShowResult()}};this.onKeyDown=function(c){if(!c){c=window.event}if(b.RESULT.style.display=="block"){if(b.onKeyPress(c.keyCode)){return BX.PreventDefault(c)}}};this.adjustResultNode=function(){var c;var d=BX.findParent(b.CONTAINER,BX.is_fixed);if(!!d){b.RESULT.style.position="fixed";b.RESULT.style.zIndex=BX.style(d,"z-index")+2;c=BX.pos(b.CONTAINER,true)}else{b.RESULT.style.position="absolute";c=BX.pos(b.CONTAINER)}c.width=c.right-c.left;b.RESULT.style.top=c.bottom+2+"px";b.RESULT.style.left=c.left+"px";b.RESULT.style.width=c.width+"px";return c};this._onContainerLayoutChange=function(){if(b.RESULT.style.display!=="none"&&b.RESULT.innerHTML!==""){b.adjustResultNode()}};this.Init=function(){this.CONTAINER=document.getElementById(this.arParams.CONTAINER_ID);BX.addCustomEvent(this.CONTAINER,"OnNodeLayoutChange",this._onContainerLayoutChange);this.RESULT=document.body.appendChild(document.createElement("DIV"));this.RESULT.className="title-search-result";this.INPUT=document.getElementById(this.arParams.INPUT_ID);this.startText=this.oldValue=this.INPUT.value;BX.bind(this.INPUT,"focus",function(){b.onFocusGain()});BX.bind(this.INPUT,"blur",function(){b.onFocusLost()});if(BX.browser.IsSafari()||BX.browser.IsIE()){this.INPUT.onkeydown=this.onKeyDown}else{this.INPUT.onkeypress=this.onKeyDown}if(this.arParams.WAIT_IMAGE){this.WAIT=document.body.appendChild(document.createElement("DIV"));this.WAIT.style.backgroundImage="url('"+this.arParams.WAIT_IMAGE+"')";if(!BX.browser.IsIE()){this.WAIT.style.backgroundRepeat="none"}this.WAIT.style.display="none";this.WAIT.style.position="absolute";this.WAIT.style.zIndex="1100"}BX.bind(this.INPUT,"bxchange",function(){b.onChange()})};BX.ready(function(){b.Init(a)})};