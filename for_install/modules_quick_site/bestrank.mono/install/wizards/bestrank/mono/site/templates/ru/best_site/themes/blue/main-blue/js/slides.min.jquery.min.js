(function(a){a.fn.slides=function(b){b=a.extend({},a.fn.slides.option,b);return this.each(function(){a("."+b.container,a(this)).children().wrapAll('<div class="slides_control"/>');var t=a(this),j=a(".slides_control",t),x=j.children().size(),p=j.children().outerWidth(),l=j.children().outerHeight(),d=b.start-1,k=b.effect.indexOf(",")<0?b.effect:b.effect.replace(" ","").split(",")[0],r=b.effect.indexOf(",")<0?k:b.effect.replace(" ","").split(",")[1],n=0,m=0,c=0,o=0,s,g,h,v,u;if(x<2){return}if(d<0){d=0}if(d>x){d=x-1}if(b.start){o=d}if(b.randomize){j.randomize()}a("."+b.container,t).css({overflow:"hidden",position:"relative"});j.css({position:"relative",width:(p*3),height:l,left:-p});j.children().css({position:"absolute",top:0,left:p,zIndex:0,display:"none"});if(b.autoHeight){j.animate({height:j.children(":eq("+d+")").outerHeight()},b.autoHeightSpeed)}if(b.preload&&j.children()[0].tagName=="IMG"){t.css({background:"url("+b.preloadImage+") no-repeat 50% 50%"});var w=a("img:eq("+d+")",t).attr("src")+"?"+(new Date()).getTime();a("img:eq("+d+")",t).attr("src",w).load(function(){a(this).fadeIn(b.fadeSpeed,function(){a(this).css({zIndex:5});t.css({background:""});s=true})})}else{j.children(":eq("+d+")").fadeIn(b.fadeSpeed,function(){s=true})}if(b.bigTarget){j.children().css({cursor:"pointer"});j.children().click(function(){e("next",k);return false})}if(b.hoverPause&&b.play){j.children().bind("mouseover",function(){q()});j.children().bind("mouseleave",function(){f()})}if(b.generateNextPrev){a("."+b.container,t).after('<a href="#" class="'+b.prev+'">Prev</a>');a("."+b.prev,t).after('<a href="#" class="'+b.next+'">Next</a>')}a("."+b.next,t).click(function(y){y.preventDefault();if(b.play){f()}e("next",k)});a("."+b.prev,t).click(function(y){y.preventDefault();if(b.play){f()}e("prev",k)});if(b.generatePagination){t.append("<ul class="+b.paginationClass+"></ul>");j.children().each(function(){a("."+b.paginationClass,t).append('<li><a href="#'+c+'">'+(c+1)+"</a></li>");c++})}else{a("."+b.paginationClass+" li a",t).each(function(){a(this).attr("href","#"+c);c++})}a("."+b.paginationClass+" li:eq("+d+")",t).addClass("current");a("."+b.paginationClass+" li a",t).click(function(){if(b.play){f()}h=a(this).attr("href").match("[^#/]+$");if(o!=h){e("pagination",r,h)}return false});a("a.link",t).click(function(){if(b.play){f()}h=a(this).attr("href").match("[^#/]+$")-1;if(o!=h){e("pagination",r,h)}return false});if(b.play){playInterval=setInterval(function(){e("next",k)},b.play);t.data("interval",playInterval)}function q(){clearInterval(t.data("interval"))}function f(){if(b.pause){clearTimeout(t.data("pause"));clearInterval(t.data("interval"));pauseTimeout=setTimeout(function(){clearTimeout(t.data("pause"));playInterval=setInterval(function(){e("next",k)},b.play);t.data("interval",playInterval)},b.pause);t.data("pause",pauseTimeout)}else{q()}}function e(A,z,y){if(!g&&s){g=true;switch(A){case"next":m=o;n=o+1;n=x===n?0:n;v=p*2;A=-p*2;o=n;break;case"prev":m=o;n=o-1;n=n===-1?x-1:n;v=0;A=0;o=n;break;case"pagination":n=parseInt(y,10);m=a("."+b.paginationClass+" li.current a",t).attr("href").match("[^#/]+$");if(n>m){v=p*2;A=-p*2}else{v=0;A=0}o=n;break}if(z==="fade"){b.animationStart();if(b.crossfade){j.children(":eq("+n+")",t).css({zIndex:10}).fadeIn(b.fadeSpeed,function(){j.children(":eq("+m+")",t).css({display:"none",zIndex:0});a(this).css({zIndex:0});b.animationComplete(n+1);g=false})}else{b.animationStart();j.children(":eq("+m+")",t).fadeOut(b.fadeSpeed,function(){if(b.autoHeight){j.animate({height:j.children(":eq("+n+")",t).outerHeight()},b.autoHeightSpeed,function(){j.children(":eq("+n+")",t).fadeIn(b.fadeSpeed)})}else{j.children(":eq("+n+")",t).fadeIn(b.fadeSpeed,function(){if(a.browser.msie){a(this).get(0).style.removeAttribute("filter")}})}b.animationComplete(n+1);g=false})}}else{j.children(":eq("+n+")").css({left:v,display:"block"});if(b.autoHeight){b.animationStart();j.animate({left:A,height:j.children(":eq("+n+")").outerHeight()},b.slideSpeed,function(){j.css({left:-p});j.children(":eq("+n+")").css({left:p,zIndex:5});j.children(":eq("+m+")").css({left:p,display:"none",zIndex:0});b.animationComplete(n+1);g=false})}else{b.animationStart();j.animate({left:A},b.slideSpeed,function(){j.css({left:-p});j.children(":eq("+n+")").css({left:p,zIndex:5});j.children(":eq("+m+")").css({left:p,display:"none",zIndex:0});b.animationComplete(n+1);g=false})}}if(b.pagination){a("."+b.paginationClass+" li.current",t).removeClass("current");a("."+b.paginationClass+" li:eq("+n+")",t).addClass("current")}}}})};a.fn.slides.option={preload:false,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:false,next:"next",prev:"prev",pagination:true,generatePagination:true,paginationClass:"pagination",fadeSpeed:350,slideSpeed:350,start:1,effect:"slide",crossfade:false,randomize:false,play:0,pause:0,hoverPause:false,autoHeight:false,autoHeightSpeed:350,bigTarget:false,animationStart:function(){},animationComplete:function(){}};a.fn.randomize=function(c){function b(){return(Math.round(Math.random())-0.5)}return(a(this).each(function(){var f=a(this);var e=f.children();var d=e.length;if(d>1){e.hide();var g=[];for(i=0;i<d;i++){g[g.length]=i}g=g.sort(b);a.each(g,function(l,h){var n=e.eq(h);var m=n.clone(true);m.show().appendTo(f);if(c!==undefined){c(n,m)}n.remove()})}}))}})(jQuery);