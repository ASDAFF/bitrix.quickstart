var formAjax={fn:function(a,c,e,d){BX.closeWait(e);c.find('input:not([type="submit"]):not([type="button"]), textarea, select').css({border:"1px solid #CCC"});c.find(".it-error").empty();var f=a.responseJSON&&a.responseJSON.errors?a.responseJSON.errors:false;if(f){for(var b in f){c.find('[name="'+b+'"]').css({border:"1px solid red"}).closest(".it-block").find(".it-error").html(f[b])}}else{c.find('input:not([type="submit"]):not([type="button"]), textarea').val("");c.find('input[type="checkbox"]').prop("checked",false);this.executeFunctionByName(d.FORM_SUCCESS_FUNCTION,window,d.FORM_SUCCESS_FUNCTION_CORRECT_JSON!="Y")}},init:function(a){var b=this;$("."+a.FORM_CLASS.replace(/\s+/g,".")).off("submit").on("submit",function(j){j.preventDefault();var g=$(this),h=new FormData(g[0]),k=g.find('[type="submit"]').get(0),c=$(g.find(".checkbox-152-fz"));if(c&&!c.is(":checked")){var f=0,d=setInterval(function(){c.closest(".it-block").css({border:(f%2===0?"1px solid transparent":"1px solid red")});if(++f===7){clearInterval(d);return}},500);return false}BX.showWait(k);h.append("arParams",JSON.stringify(a));$.ajax({method:g.attr("method"),url:g.attr("action"),dataType:"json",data:h,async:false,cache:false,processData:false,contentType:false,complete:function(e){b.fn(e,g,k,a)}});return false})},executeFunctionByName:function(h,d,b){h=BX.util.htmlspecialcharsback(h);var a=h.substring(h.indexOf("(")+1);a=a.substr(0,a.length-1);if(b){a=a.replace(/([{,\s^]+)(\b[a-z0-9]*?\b)(?=:)/gi,function(e,k,i){return k+'"'+i+'"'})}try{a=[JSON.parse(a)]}catch(j){a=[]}h=h.substring(0,h.indexOf("("));var g=h.split(".");var f=g.pop();for(var c=0;c<g.length;++c){d=d[g[c]]}return d[f].apply(d,a)}};