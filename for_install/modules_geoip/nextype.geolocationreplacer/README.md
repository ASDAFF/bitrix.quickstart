# Контент с привязкой к местоположению по IP
https://marketplace.1c-bitrix.ru/solutions/nextype.geolocationreplacer/

**Описание** 

Данный модуль позволяет выводить на экран контент привязанный к местоположению пользователя сайта, определяемый по IP.

Какие типовые задачи позволяет решает данный модуль:
Выводить различные телефонные номера для разных городов для отслеживания статистики звонков из разных городов
Отображать на странице ближайший для посетителя офис вашей компании
Возможность выводить результат работы в переменную, для кастомизации собственных компонентов или нестандартной логики отображения
Особенности модуля:
Использует для своей работы базу SypexGeo
Для легкого заполнения городов и регионов используется КЛАДР

Установка модуля
Установка модуля производится стандартно, через Marketplace.

Настройка компонента
1. Добавьте компонент на страницу через визуальный редактор, либо используя следующий код:
<?$APPLICATION->IncludeComponent(
   "nextype:geolocation.replacer",
   ".default",
   Array(
      "COMPONENT_TEMPLATE" => ".default",
      "RETURN" => "N"
   )
);?>
 
2. Откройте параметры компонента, где укажите требуемые настройки.
Выводить результат в переменную - необходимо отметить, когда требуется вывести результат работы компонента не в шаблон, а в переменную. Пример кода:
$arResult = $APPLICATION->IncludeComponent(...);

Город, Регион, Текст - табличная часть, ответственная за вывод различных результатов для местоположений пользователя.
В качестве города или региона можно указывать *, которая говорит компоненту, что нужно отработать это правило для всех городов или регионов.
Примеры типовых правил:
Выводим текст для всех городов
* | * | Все города
Выводим текст для всех городов Челябинской области
* | Челябинская Область | Вся Челябинская область
Выводим текст только для Челябинска
Челябинск | Челябинская Область | Только Челябинск
Особенности работы и советы по использованию
Некоторые города и регионы имеют отличное название в КЛАДР и базе соответствий IP и Городов (sypexgeo), т.о. УБЕДИТЕЛЬНО ПРОСИМ не ориентироваться на подсказки КЛДАР, а проверять каждый город (регион) через сайт https://sypexgeo.net/
В теории, поле Текст может принимать любое значение, в т.ч и HTML код, но мы советуем сложные html конструкции обрабатывать в своем собственном шаблоне компонента, используя переменную $arResult