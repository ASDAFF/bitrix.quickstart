var product={CHANGE_URL:0,currentColorId:0,currentSizeId:0,currentPrice:0,currentSet:[],productUrl:"",curPhotosSmall:[],curPhotosBig:[],curPhotosMiddle:[],curPhotosBigHeight:[],ajaxUrl:"",productId:"",messages:{},siteID:0,offersSubsribed:[],isAuthorized:0,userEmail:"",subscribesFlag:false,tooltipSelector:"",tooltipText:"",detailCardView:1,getClassNotify:function(){var a="";if(product.userEmail!=""){a="authNotifySize2"}else{a="notify2"}return a},changeRealSizes:function(a){$("#myTab li").removeClass("active");$("#li_"+a).addClass("active");$("#myTabContent div.tab-pane").removeClass("active").removeClass("in");$("#myTabContent div#tab"+a).addClass("active in")},changeSize:function(a){$("#quickView").hide();product.currentSizeId=a;if(product.CHANGE_URL){window.history.replaceState(null,null,product.productUrl+"?cs="+product.currentSizeId+"&#color-"+product.currentColorId+"-"+product.productId)}for(var b in product.currentSet){if(product.currentSet[b].color==product.currentColorId&&product.currentSet[b].size==product.currentSizeId){$("#notify_elem_id").attr("value",b);product.changePrice(product.currentSet[b].price,b);product.curPhotosBig=product.currentSet[b].curPhotosBig;product.curPhotosSmall=product.currentSet[b].curPhotosSmall;product.curPhotosMiddle=product.currentSet[b].curPhotosMiddle;product.changePhotos();$("#quickView").show();product.changeRealSizes(a);return}}$("#quickView").show();product.changeRealSizes(a)},checkSize:function(a){for(var b in product.currentSet){if(product.currentSet[b].color==product.currentColorId&&product.currentSet[b].size==a){return true}}return false},changeColor:function(h,g){$("#quickView").hide();product.currentColorId=h;if(product.CHANGE_URL){window.history.replaceState(null,null,product.productUrl+"?cs="+product.currentSizeId+"&#color-"+product.currentColorId+"-"+product.productId)}var e="";var c=[];for(var d in product.currentSet){var b=$("#li_"+product.currentSet[d].size);if(product.currentSet[d].color==h){b.show();if(jQuery.inArray(product.currentSet[d].size,c)==-1){c.push(product.currentSet[d].size)}}}var a=false;for(var d in product.currentSet){var b=$("#li_"+product.currentSet[d].size);if(jQuery.inArray(product.currentSet[d].size,c)==-1){b.removeAttr("class").html('<span class="none-gt">'+product.currentSet[d].sizeName+"</span>");b.hide()}else{if(product.currentSet[d].color==h){if(product.subscribesFlag==true&&product.currentSet[d].quantity<=0){b.removeAttr("class").attr("data-placement","top").attr("rel","tooltip2").attr("data-original-title",product.messages.SUBSCR_MESSAGE).html('<span class="none-gt"><a data-size="'+product.currentSet[d].size+'"  href="#tab'+product.currentSet[d].size+'" class="'+product.getClassNotify()+'" data-elem-id="'+d+'" >'+product.currentSet[d].sizeName+"</a></span>")}else{b.removeAttr("class").removeAttr("data-placement").removeAttr("rel").removeAttr("data-original-title").html('<a data-size="'+product.currentSet[d].size+'"  href="#tab'+product.currentSet[d].size+'">'+product.currentSet[d].sizeName+"</a>")}if(g){var f=parseInt(product.currentSet[d].price);if(f==product.currentPrice&&product.currentSet[d].color==h){if(product.currentSet[d].quantity>0){if(product.currentSet[d].sizeSort>0&&e==""){e=d}else{if(e>0&&product.currentSet[d].sizeSort<product.currentSet[e].sizeSort){e=d}}}}}else{if(product.currentSet[d].size==product.currentSizeId&&product.currentSet[d].color==h){e=d}}}}}$("[rel=tooltip]").tooltip({});if(e!=""){product.changePrice(product.currentSet[e].price,e);product.curPhotosBig=product.currentSet[e].curPhotosBig;product.curPhotosSmall=product.currentSet[e].curPhotosSmall;product.curPhotosMiddle=product.currentSet[e].curPhotosMiddle;product.changePhotos();product.currentSizeId=product.currentSet[e].size;$("#li_"+product.currentSizeId).attr("class","active");$("#myTabContent div.tab-pane").removeClass("active").removeClass("in");$("#myTabContent div#tab"+product.currentSizeId).addClass("active in");a=true}if(a==false){product.chooseFirstSize();$("#myTabContent div.tab-pane").removeClass("active").removeClass("in");$("#myTabContent div#tab"+product.currentSizeId).addClass("active in")}$("#quickView").show()},chooseFirstSize:function(){if(window.SET_PRODUCT_FIRST_SIZE===false){return false}var b=$("#myTab li").find("a").first();product.currentSizeId=b.data("size");var a=b.data("size");product.changeSize(a)},addToSet:function(k,g,f,h,n,i,m,d,a,e,l,c,j,b){if(!l){l=0}product.currentSet[k]={price:g,color:f,size:h,colorName:n,colorPicture:i,curPhotosSmall:m,curPhotosBig:d,curPhotosBigHeight:a,sizeName:e,sizeSort:l,quantity:c,oldPrice:j,curPhotosMiddle:b}},formatPrice:function(c){var b=c.replace(".00","");b+="";x=b.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var a=/(\d+)(\d{3})/;while(a.test(x1)){x1=x1.replace(a,"$1 $2")}newPrice=x1+x2;return newPrice},checkCommentForm:function(){var c=$("#REVIEW_TEXT").val();var b=[];if($("#REVIEW_AUTHOR").length){var a=$("#REVIEW_AUTHOR").val();if(a==""){b.push(product.messages.ALERT_NAME);$("#controlGroupName").attr("class","control-group error")}else{$("#controlGroupName").attr("class","control-group")}}if(c==""){b.push(product.messages.ALERT_MESSAGE);$("#controlGroupText").attr("class","control-group error")}else{$("#controlGroupText").attr("class","control-group")}var d=b.join("<br>");if(d!=""){$("#alert").attr("class","alert alert-error").html(d);return false}product.showAjaxLoader();return true},setSiteID:function(a){this.siteID=a},showHideArrows:function(a,b){if(a==1){$("#left-arr").hide()}else{$("#left-arr").show()}if(a==b){$("#right-arr").hide()}else{$("#right-arr").show()}},getComments:function(b){if(!b){b=1}var a={AJAX_REFRESH:1,ELEMENT_ID:this.productId,iNumPage:b,siteID:this.siteID};$.ajax({type:"POST",url:this.ajaxUrl,data:a,dataType:"json",beforeSend:function(){product.showAjaxLoader()},success:function(c,d){product.hideAjaxLoader();if(c&&c.result){if(c.result=="OK"){$("#comments-list").html(c.commentsText);if(c.count>0){}else{$(".comm").hide()}}}}})},changePrice:function(b,e){var a=product.currentSet[e].oldPrice;oldPriceFloat=a.replace(/ /gi,"");oldPriceFloat=parseFloat(oldPriceFloat);priceFloat=b.replace(/ /gi,"");priceFloat=parseFloat(priceFloat);var c="default-value";if(product.currentSet[e].quantity<1){$("#notifyme").show();$("#fields").hide();$("#sum").text(product.messages.NO_IN_STOCK);$("#old-price").text("");$("#buy-btn-span").hide();c="discount"}else{$("#notifyme").hide();var f=product.formatPrice(b);$("#sum").text(f);if(oldPriceFloat>priceFloat){c="discount";var d=product.formatPrice(a);$("#old-price").text(d)}else{$("#old-price").text("")}if(f==""&&product.isOpt==1){c="discount";$("#sum").text(product.messages.NO_IN_STOCK);$("#buy-btn-span").hide();$("#fields").hide()}else{$("#buy-btn-span").show();$("#fields").show()}}$("#sum").attr("class",c)},changePhotos:function(e){var e=e||0;var h="",g="";var a="";var c=1;var b="";if(product.detailCardView==3){if(e!==0){b=e.big;var f="";h+='<a class="detailLink fancybox" rel="gallery" href="'+e.big+'" '+f+'><img id="detailImg'+c+'" src="'+e.middle+'" width="450" height="373" alt="" /></a>';g+='<img data-big-pic="'+e.big+'" class="previewImg" src="'+e.small+'" width="90" height="120" alt="" href="'+e.middle+'"  />';c=2}for(var d in product.curPhotosBig){if(b==product.curPhotosBig[d]){continue}if(c==1){var f=""}else{var f='style="display:none;"'}h+='<a class="detailLink fancybox" rel="gallery" href="'+product.curPhotosBig[d]+'" '+f+'><img id="detailImg'+c+'" src="'+product.curPhotosMiddle[d]+'" width="450" height="373" alt="" /></a>';g+='<img data-big-pic="'+product.curPhotosBig[d]+'" class="previewImg" src="'+product.curPhotosSmall[d]+'" width="90" height="120" alt="" href="'+product.curPhotosMiddle[d]+'"  />';c++}}else{for(var d in product.curPhotosBig){if(c==1){a=product.curPhotosBig[d];h+='<a class="detailLink" id="fLinkPic" href="#myModal" role="button" ><img data-big-pic="'+product.curPhotosBig[d]+'" id="detailImg'+c+'" src="'+product.curPhotosMiddle[d]+'" data-height="'+product.curPhotosBigHeight[d]+'" width="450" height="580" alt="'+product.messages.PRODUCT_NAME+'" /></a>'}g+='<img data-big-pic="'+product.curPhotosBig[d]+'" class="previewImg" src="'+product.curPhotosSmall[d]+'" width="86" height="114" alt="'+product.messages.PRODUCT_NAME+'" href="'+product.curPhotosMiddle[d]+'"  />';c++}}$("#photos").html(h);if(b==""){$("#thumbs").html(g)}if(product.detailCardView==2){$("#photos").zoom({url:a})}else{if(product.detailCardView==3){product.setFancyBox()}}},buyClick:function(d){var e=$(d).attr("data-elem-id");if(e>0){var b={ADD2BASKET:"1",elemId:e};var c=$(d).attr("data-action");if(c=="addToShelve"){b.act="addToShelve";product.tooltipSelector="#box-shelve";var a=product.messages.ADDED_TO_SHELVES}else{product.tooltipSelector="#buy-popup";var a=product.messages.PRODUCT_ADDED_TO_CART}$.ajax({type:"POST",url:this.ajaxUrl,data:b,dataType:"json",success:function(f,g){product.currentSet[e].quantity=1;if(f.status=="ERROR"&&f.type=="PRODUCT_EXCEEDED_LIMIT"){product.tooltipText=product.messages.PRODUCT_ALREADY_IN_CART}else{if(f.status=="ERROR"&&f.type=="PRODUCT_NOT_AVAILABLE"){product.currentSet[e].quantity=0;product.changeColor(product.currentColorId);$("#li_"+product.currentSizeId+" a").click();return}else{if(f.status=="OK"){product.tooltipText=a;$("#cart_line_1").html($(f.html).html()).addClass("basket-active");UpdateBasketAfterLoadOrderList();setTimeout(product.stopCartLight,2500)}}}$(product.tooltipSelector+" div").text(product.tooltipText);$(product.tooltipSelector).show();setTimeout(product.closeTooltip,2500)}})}},closeTooltip:function(){$(product.tooltipSelector).hide()},stopCartLight:function(){$("#cart_line_1").removeClass("basket-active")},enableSmiles:function(){var a=new JCommentsEditor("REVIEW_TEXT",true);a.initSmiles(JAVASCRIPT_SITE_DIR+"include/images/smiles");a.addSmile(":D","laugh.gif");a.addSmile(":lol:","lol.gif");a.addSmile(":-)","smile.gif");a.addSmile(";-)","wink.gif");a.addSmile("8)","cool.gif");a.addSmile(":-|","normal.gif");a.addSmile(":oops:","redface.gif");a.addSmile(":sad:","sad.gif");a.addSmile(":roll:","rolleyes.gif")},chooseFirstColor:function(){if(window.SET_PRODUCT_FIRST_PHOTO==false){}else{var a=location.hash;if(a!=""&&$(".color-ch "+a+"-set-by-hash").is("button")){$(window).ready(function(){$(a+"-set-by-hash").click()})}else{$(".color-ch button:first").click()}product.chooseFirstSize()}},getSubscribed:function(){},setFancyBox:function(){$(".fancybox").fancybox({helpers:{title:null}});return false},showAjaxLoader:function(){var a=$(".page-container").height();var b='<div class="centerbg1" id="preloaderbg" style="display: block;height: '+a+'px">           <div class="centerbg2">             <div id="preloader"></div>           </div>         </div>';$(b).prependTo("body")},hideAjaxLoader:function(){$("#preloaderbg").remove()},init:function(j,o,q,n,s,f,w,p,i,d,a,g,l,v,m,t,h,u,b,c,r,e){if(!a){a=0}var k=this;k.isOpt=e.is_opt;k.messages=t;k.ajaxUrl=v;k.productId=m;k.subscribesFlag=b;k.currentPrice=parseInt(o);k.productUrl=u;k.currentColorId=q;k.currentSizeId=n;k.currentSet=[];k.currentSet[j]={price:o,color:q,size:n,colorName:s,colorPicture:f,curPhotosSmall:w,curPhotosBig:p,curPhotosBigHeight:i,sizeName:d,sizeSort:a,quantity:g,oldPrice:l,curPhotosMiddle:c};k.curPhotosBig=p;k.curPhotosSmall=w;k.curPhotosBigHeight=i;k.curPhotosMiddle=c;k.detailCardView=r;if(h==1){k.getComments()}$("#color-ch button").live("click",function(){var y=$(this).data("color");product.changeColor(y)});$("#shelve-product").on("click",function(){product.buyClick(this);return false});if(k.detailCardView==1){$("#zoom").on("click",function(){$("#fLinkPic").trigger("click");return false});$("#fLinkPic").die("click");$("#fLinkPic").live("click",function(){product.showAjaxLoader();var E="";var I=[];var y=$(this).find("img").attr("data-big-pic");var F=$("#thumbs img").length;var G=$("#product-name").html();$("#thumbs img").each(function(J,K){I[J]=$(this).data("big-pic")});var B=1;var D=1;for(var C in I){var z="";if(I[C]==y){z="active ";D=B}E+='<div class="'+z+'item"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h3>'+G+' </h3></div><div class="modal-body"><img alt="" src="'+I[C]+'"></div><div class="modal-footer">'+product.messages.CAROUSEL_LABEL1+' <span class="curImg">'+B+"</span> "+product.messages.CAROUSEL_LABEL2+' <span class="totalImg">'+F+"</span></div></div>";++B}product.showHideArrows(D,F);$("#carousel-inner").html(E);var A=$("#myCarousel").carousel({interval:false});A.on("slid",function(){var J=$("#carousel-inner .active .curImg").html();product.showHideArrows(J,F);product.showAjaxLoader();var K=new Image();K.onload=function(){product.hideAjaxLoader();var L=((K.width+30)/2);$("#myModal").css("marginLeft","-"+L+"px")};K.src=$("#myModal .carousel-inner .active .modal-body img").attr("src")});var H=new Image();H.onload=function(){product.hideAjaxLoader();var J=((H.width+30)/2);$("#myModal").modal({marginLeft:J})};H.src=y;return false});$("#thumbs img").live("mouseenter",function(){$("#detailImg1").attr("src",$(this).attr("href")).attr("data-big-pic",$(this).data("big-pic"))});$("#thumbs img").die("click");$("#thumbs img").live("click",function(){$("#detailImg1").trigger("click");return false})}else{if(k.detailCardView==2){$("#thumbs img").die("mouseenter");$("#thumbs img").live("mouseenter",function(){$("#detailImg1").attr("src",$(this).attr("href")).attr("data-big-pic",$(this).data("big-pic"));$("img.zoomImg").remove();$("#photos").zoom({url:$(this).data("big-pic")})})}else{if(k.detailCardView==3){$("#thumbs img").die("mouseenter");$("#thumbs img").live("mouseenter",function(){var y=[];y.small=$(this).attr("src");y.middle=$(this).attr("href");y.big=$(this).data("big-pic");product.changePhotos(y)});$("#thumbs img").die("click");$("#thumbs img").live("click",function(){$("#detailImg1").trigger("click");return false})}}}}};