(function(a){if(a.rsSline){return}a.rsSline=function(){var b=this;this.offers={};this.cartList={};this.favoriteList={};this.compareList={};this.stocks={};this.fancyTimeout=1000;this.ajaxTimeout=0;this.ajaxTimeoutTime=1000;this.ajaxExec=false;this.grid={0:0,xs:480,sm:768,md:992,lg:1220};this.pageWidth=this.getPageWidth();this.pageHeight=this.getPageHeight();this.fancyOptions={autoSize:true,openEffect:"fade",closeEffect:"fade",closeClick:false,width:"80%",minWidth:300,maxWidth:1263,height:"auto",maxHeight:"100%",fitToView:true,scrolling:"visible",padding:[25,30,25,30],beforeLoad:function(){if(!!this.ajax.data){this.ajax.data.rs_ajax__page="Y"}var c;if(!!this.element){var c=this.element.data("insert_data")}if(a.appSLine.getPageWidth()<=a.appSLine.grid.xs){if(c!=undefined){BX.localStorage.set("ajax_data",c)}a.location=this.element.data("realurl")?this.element.data("realurl"):this.href;return false}else{if(c!=undefined){this.ajax.data.ajax_data=c}}},afterLoad:function(){var e=this.element,c=this.inner,d=this.ajax.data!=undefined&&this.ajax.data.ajax_data!=undefined?BX.parseJSON(this.ajax.data.ajax_data):undefined;if(d!=undefined&&(typeof(d)=="object")){setTimeout(function(){for(var f in d){c.find('[name="'+f+'"]').val(BX.util.htmlspecialcharsback(d[f]))}},50)}},beforeShow:function(){},afterClose:function(){if(RSAL_FancyReloadPageAfterClose){a.location.reload()}},afterShow:function(){console.log("afterShow");appSLine.ready(this.inner)},tpl:{closeBtn:'<svg class="fancybox-item fancybox-close icon-close icon-svg" href="javascript:;" title="Close"><use xlink:href="#svg-close"></use></svg>',loading:'<div id="fancybox-loading" class="loading">          <div class="loading__in loading__1"></div>          <div class="loading__in loading__2"></div>          <div class="loading__in loading__3"></div>          <div class="loading__in loading__4"></div>          <div class="loading__in loading__5"></div>          <div class="loading__in loading__6"></div>          <div class="loading__in loading__7"></div>          <div class="loading__in loading__8"></div>        </div>'},helpers:{title:{type:"inside",position:"top"}}};this.owlOptions={loop:true,nav:true,navClass:["owl-nav__prev js-click","owl-nav__next js-click"],navText:['<svg class="icon-left icon-svg"><use xlink:href="#svg-left"></use></svg>','<svg class="icon-right icon-svg"><use xlink:href="#svg-right"></use></svg>'],responsive:{0:{items:2}},onInitialize:function(){if(this.$element.hasClass("grid-wrap")||this.$element.hasClass("js-grid")){this._breakpoint=0}},onInitialized:function(){this.$element.addClass("owl-carousel");if(this.$element.closest(".fancybox-inner").length){$.fancybox.update()}},onChanged:function(){this.settings.loop=(this._items.length<=this.settings.items)?false:this.options.loop}};this.owlOptions.responsive[this.grid.xs]={items:2};this.owlOptions.responsive[this.grid.sm]={items:3};this.owlOptions.responsive[this.grid.md]={items:3};this.owlOptions.responsive[this.grid.lg]={items:5}};sec=-1;rsSline.prototype.timer=function(){var b=BX.message("SERVER_TIME");sec++;b=parseInt(b)+sec;$(".js_timer").each(function(l){var d=$(this),h=BX.parseJSON(d.data("timer")),r=h.DATE_TO-h.DATE_FROM,i=h.DATE_TO-b;if(i<1&&h.AUTO_RENEWAL=="Y"){for(lim=0;lim<200;lim++){newdateTo=(lim*r+h.DATE_TO)-b;if(newdateTo>0){i=newdateTo;break}}}if(i>0){var q=parseInt((i/(60*60))/24);if(q<10){q="0"+q}q=q.toString();var f=parseInt(i/(60*60));var o=parseInt((i/(60*60))%24);if(o<10){o="0"+o}o=o.toString();var g=parseInt(i/(60))%60;if(g<10){g="0"+g}g=g.toString();var p=parseInt(i)%60;if(p<10){p="0"+p}p=p.toString();var e=false;if(!!h.DINAMICA_DATA){if(h.DINAMICA_DATA=="evenly"){e=Math.floor(100-((i/r)*100))}else{var m=false;var k=false;for(var c in h.DINAMICA_DATA){if(!m){m=c;k=c}if(m<f&&f<c){e=h.DINAMICA_DATA[c];break}m=c}if(!e){if(f>m){e=h.DINAMICA_DATA[m]}else{if(f<m){e=h.DINAMICA_DATA[k]}}}}if(e){d.find(".js_timer-progress").text(e+"%")}}var n=d.find(".js_timer-d");var j=d.find(".js_timer-s");if(q<1){if(n.is(":visible")){n.parent().hide().next(".timer__cell").hide()}j.text(p);if(j.is(":hidden")){j.parent().show().prev(".timer__cell").show()}}else{if(q>0){n.text(q);if(j.is(":hidden")){n.parent().show().next(".timer__cell").show()}if(j.is(":visible")){j.parent().hide().prev(".timer__cell").hide()}}}d.find(".js_timer-H").text(o);d.find(".js_timer-i").text(g)}else{d.css("display","none").closest(".js-element").removeClass("da2 qb")}})};rsSline.prototype.setProductCart=function(c){var b=parseInt(c.find(".js-product_id").val());if(!!this.cartList){if(!!this.cartList[b]){c.addClass("is-incart")}else{c.removeClass("is-incart")}}};rsSline.prototype.setProductCompare=function(c){var b=parseInt(c.find(".js-product_id").val());if(!!this.compareList){if(!!this.compareList[b]){c.find(".js-compare").addClass("checked")}else{c.find(".js-compare").removeClass("checked")}}};rsSline.prototype.setProductFavorite=function(b){var c=b.data("product-id");if(!!this.favoriteList){if(!!this.favoriteList[c]){b.find(".js-favorite").addClass("checked")}else{b.find(".js-favorite").removeClass("checked")}}};rsSline.prototype.setProductItems=function(c){var d=$.extend({wrap:"",items:""},c),e=this;if(d.items==""){if(d.wrap==""){var b=$(".js-product")}else{var b=$(d.wrap).find(".js-product")}}else{var b=d.items}b.each(function(){var f=$(this);if(!!e.cartList){e.setProductCart(f)}if(!!e.compareList){e.setProductCompare(f)}if(!!e.favoriteList){e.setProductFavorite(f)}})};rsSline.prototype.mobilePoppup=function(){if($(document).width()<780){$(".js-popup-ajax").removeClass("js-popup-ajax").addClass("fancymobilelink");$(document).on("click.fancymobilelink","a.fancymobilelink",function(){var b=$(this).data("insert_data");BX.localStorage.set("ajax_data",b)})}else{$(document).off("click.fancymobilelink")}};rsSline.prototype.gridInit=function(b){var e=this,c=$.extend({wrap:"",items:""},b);var d=".js-catalog_slider";if(1024>this.pageWidth){d+=", .js-grid"}if(1024>=this.pageWidth){d+=", .rs_set-default"}else{$(".rs_set-default.owl-carousel").trigger("destroy.owl.carousel").removeClass("owl-carousel").removeAttr("style")}$(d).each(function(){var g=$(this);if(!g.hasClass("owl-carousel")){var f={dots:false,responsive:{}};f.responsive[0]={items:2};f.responsive[e.grid.xs]={items:2};f.responsive[e.grid.sm]={items:3};f.responsive[e.grid.md]={items:4};f.responsive[e.grid.lg]={items:5};g.width(g.parent().width()-1).owlCarousel($.extend(true,{},e.owlOptions,f))}else{g.find(".owl-stage").hide();g.removeAttr("style").width(g.parent().width()-1).find(".owl-stage").show()}})};rsSline.prototype.ready=function(b){var c=this;this.setup();this.setProductItems();this.mobilePoppup();setInterval(function(){c.timer()},1000);$(a).resize(function(){c.onResize()})};rsSline.prototype.onResize=function(){this.setup();this.mobilePoppup();console.log("RESIZE")};rsSline.prototype.setup=function(b){this.pageWidth=this.getPageWidth();this.pageHeight=this.getPageHeight();var c=$("#webpage");c.children(".l-main").css("height","auto");if(c.height()<this.pageHeight){c.children(".l-main").css("min-height",this.pageHeight-c.children(".l-header").height()-c.children(".l-footer").height())}this.gridInit();console.log("this.pageWidth",this.pageWidth)};rsSline.prototype.getPageWidth=function(b){return(a.innerWidth)?a.innerWidth:(document.documentElement&&document.documentElement.clientWidth)?document.documentElement.clientWidth:0};rsSline.prototype.getPageHeight=function(b){return(a.innerHeight)?a.innerHeight:(document.documentElement&&document.documentElement.clientHeight)?document.documentElement.clientHeight:0};rsSline.prototype.encodeURI=function(c){var b=c.split(/(:\/\/|:\\d+\/|\/|\?|=|&)/),e="";if(b.length>0){for(var d in b){e+=(d%2)?b[d]:encodeURIComponent(b[d])}}return e};a.rsSline=rsSline})(window);var appSLine=new rsSline();(function(a){appSLine.gridInit()})(jQuery);(function(a){a.fn.onImageLoad=function(c){function b(d){if(!d.complete){return false}if(typeof d.naturalWidth!=="undefined"&&d.naturalWidth===0){return false}return true}return this.each(function(){var d=a(this);if(d.is("img")&&a.isFunction(c)){d.one("load",c);if(b(this)){d.trigger("load")}}})}})(jQuery);(function(a){a.fn.setHtmlByUrl=function(b){var c=a.extend({url:""},b);return this.each(function(){if(""!=c.url){var d=a(this);a.ajax({type:"GET",dataType:"html",url:c.url,beforeSend:function(){if("localStorage" in window&&window.localStorage!==null){data=localStorage.getItem(c.url);if(data){localStorage.setItem(c.url,data);d.html(data);return false}return true}},success:function(e){localStorage.setItem(c.url,e);d.html(e)}})}})}})(jQuery);(function(a){a.fn.rsToggleDark=function(b){b=a.extend(a.fn.rsToggleDark.defaults,b);return this.each(function(){var c=a(this);var d=c.children(".overlay__back");if(b.progress&&d.length){$status=d.find(".load__status").html(b.message)}else{if(!c.hasClass("overlay")){c.addClass("overlay");d=a('<div class="overlay__back vcenter"><div class="overlay__progress vcenter__in"><div class="load"><div class="load__ball load__1"><div class="load__inner"></div></div><div class="load__ball load__2"><div class="load__inner"></div></div><div class="load__ball load__3"><div class="load__inner"></div></div><div class="load__ball load__4"><div class="load__inner"></div></div><div class="load__ball load__5"><div class="load__inner"></div></div></div></div></div>');d.appendTo(c)}else{c.removeClass("overlay").children(".overlay__back").remove()}}});a.fn.rsToggleDark.defaults={progress:false,progressLeft:false,progressTop:false,text:false}}})(jQuery);var RSAL_FancyCloseDelay=1200,RSAL_FancyReloadPageAfterClose=false;RSAL_PHONETABLET="N";if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){RSAL_PHONETABLET="Y"}function RSAL_FancyCloseAfterRequest(a){if(a<1){a=RSAL_FancyCloseDelay}setTimeout(function(){$.fancybox.close()},a)}if(window.frameCacheVars!==undefined){BX.addCustomEvent("onFrameDataReceived",function(a){appSLine.ready()})}else{BX.ready(function(){appSLine.ready()})}$(document).on("click",".js-ajax_link, .fancybox-skin .js-ajax_fancy",function(a){a.preventDefault();if(this.form==undefined){$.fancybox(this,$.extend({},appSLine.fancyOptions,{type:"ajax",ajax:{type:"POST",data:{backurl:window.location.href}}}))}else{}});$(document).on("submit",".fancybox-inner .js-ajax_form",function(d){var b=$(this),a="frame"+Math.round(Math.random()*1000),f=$("<input>",{type:"hidden",name:"rs_ajax__page",value:"Y"}),c=$("<iframe></iframe>",{id:a,name:a,style:"display:none",load:function(){$.fancybox($(this).contents().find("body").html(),$.extend({},appSLine.fancyOptions,{title:b.data("fancybox-title")||b.attr("title")||"",afterShow:function(){c.remove()}}))}});b.append(f).attr("target",a);$("body").append(c);BX.onCustomEvent("onAjaxSuccess");$.fancybox.showLoading()});$(document).on("mouseenter",".js-basket-minus, .js-basket-plus",function(){$("html").addClass("disableSelection")});$(document).on("mouseleave",".js-basket-minus, .js-basket-plus",function(){$("html").removeClass("disableSelection")});$(document).on("click",".js-basket-plus",function(){clearTimeout(rsSline.ajaxTimeout);var e=$(this).siblings(".js-quantity"),c=parseFloat(e.val()),a=parseFloat(e.attr("step")),d=a.toString().split(".",2)[1],b=0;if(d!==undefined){b=d.length}e.val((c+a).toFixed(b));rsSline.ajaxTimeout=setTimeout(function(){e.trigger("change")},appSLine.ajaxTimeoutTime)});$(document).on("click",".js-basket-minus",function(){clearTimeout(rsSline.ajaxTimeout);var e=$(this).siblings(".js-quantity"),c=parseFloat(e.val()),a=parseFloat(e.attr("step")),d=a.toString().split(".",2)[1],b=0;if(d!==undefined){b=d.length}if(c>a){e.val((c-a).toFixed(b));rsSline.ajaxTimeout=setTimeout(function(){e.trigger("change")},appSLine.ajaxTimeoutTime)}});$(document).on("blur",".js-quantity",function(){var e=$(this),c=parseFloat(e.val()),a=parseFloat(e.attr("step")),d=a.toString().split(".",2)[1],b=0;if(d!==undefined){b=d.length}if(0<c){e.val((a*Math.floor(c/a)).toFixed(b))}else{e.val(a)}});$(document).on("click",".rs_gallery-thumb",function(c){var a=$(this),b=a.closest(".rs_gallery-thumbs");b.find(".rs_gallery-thumb").removeClass("checked");a.addClass("checked").closest(".rs_gallery").find(".rs_gallery-detal").attr("src",$(this).attr("href"));return false});$(document).on("click",".rs_gallery-prev, .rs_gallery-next",function(){var d=$(this),a=$(this).parents(".rs_gallery"),b=a.find(".rs_gallery-thumb.checked");if(d.hasClass("rs_gallery-prev")){var c=b.prev(".rs_gallery-thumb");if(c.length>0){c.trigger("click")}else{a.find(".rs_gallery-thumb:last").trigger("click")}}else{var c=b.next(".rs_gallery-thumb");if(c.length>0){c.trigger("click")}else{a.find(".rs_gallery-thumb:first").trigger("click")}}return false});$(document).on("mouseenter mouseleave",".rs_gallery-prev, .rs_gallery-next",function(){$("html").toggleClass("disableSelection")});$(document).on("click",".rs_gallery-pic",function(){$(this).find(".rs_gallery-next").trigger("click")});$(document).on("click",".js-product .js-add2cart",function(d){var h=$(this),j=$(this.form),c=parseInt(j.find(".js-product_id").val());if(c>0){var f=j.closest(".js-product"),a=f.children(".catalog_item__inner"),b=h.attr("href"),g={type:"POST",dataType:"html",success:function(e){e=BX.parseJSON(e);if((e.STATUS==="OK")){BX.onCustomEvent("OnBasketChange");appSLine.cartList[c]=true;appSLine.setProductCart(f)}},error:function(){console.warn("add2cart - error responsed?")},complete:function(){a.rsToggleDark()}};if(!b){g.data=$(this.form).serialize()+"&ajax_basket=Y"}else{g.url=b;g.data="ajax_basket=Y"}var i=f.find(".product_props").find("input");if(i.length>0){g.data+="&"+f.find(".product_props").find("input").serialize()}else{g.data+="&prop[0]"}if(a.length<1){a=f}a.rsToggleDark({progress:true});$.ajax(g)}else{console.warn("add product to basket failed")}return false});$(document).on("click",".js-product .js-compare",function(h){h.preventDefault();var i=$(this),f=$(this).closest(".js-product"),d=f.data();if(d!=undefined){var a=d.offerId?d.offerId:d.productId,b=i.attr("href").replace("#ID#",a),g=f.children(".rs_product-inner"),c={type:"POST",data:{ajax_action:"Y"},url:b,success:function(j){j=BX.parseJSON(j);if(j.STATUS==="OK"){if(!!appSLine.compareList[a]){delete appSLine.compareList[a]}else{appSLine.compareList[a]=true}if(!j.COUNT){j.COUNT=0;for(var e in appSLine.compareList){j.COUNT++}}}appSLine.setProductCompare(f);BX.onCustomEvent("OnCompareChange")},error:function(){console.warn("add2cmp - error responsed?")},complete:function(){g.rsToggleDark()}};if(g.length<1){g=f}if(!!appSLine.compareList[a]){c.url=c.url.replace("ADD_TO_COMPARE_LIST","DELETE_FROM_COMPARE_LIST")}g.rsToggleDark({progress:true});$.ajax(c)}else{console.warn("add product to compare failed")}return false});$(document).on("click",".js-product .js-product__unsubscribe",function(i){i.preventDefault();var b=$(this),g=$(this).closest(".js-product"),f=g.data();if(f!=undefined){var a=f.offerId?f.offerId:f.productId,c="/bitrix/components/bitrix/catalog.product.subscribe.list/ajax.php",h=g.children(".rs_product-inner"),d={type:"POST",data:{sessid:BX.bitrix_sessid(),deleteSubscribe:"Y",itemId:a,listSubscribeId:b.data("subscribe-id").length>0?BX.parseJSON(b.data("subscribe-id")):[]},url:c,success:function(e){e=BX.parseJSON(e);if(e.success){location.reload()}else{}},error:function(){console.warn("deleteSubscribe - error responsed?")},complete:function(){h.rsToggleDark()}};if(h.length<1){h=g}h.rsToggleDark({progress:true});console.log(d);$.ajax(d)}else{console.warn("Product ID undefined")}return false});