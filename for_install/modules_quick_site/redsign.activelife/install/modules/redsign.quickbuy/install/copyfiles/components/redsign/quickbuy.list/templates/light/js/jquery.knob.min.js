$(function(){var a=function(e,d){var k=null,m=e[0].getContext("2d"),i=2*Math.PI,j,h,g,f,l=this;this.onChange=function(){};this.onCancel=function(){};this.onRelease=function(){};this.val=function(o){if(null!=o){d.stopper&&(o=Math.max(Math.min(o,d.max),d.min));k=o;this.onChange(o);this.draw(o)}else{var c,n;c=n=Math.atan2(j-g,-(h-f-d.width/2))-d.angleOffset;(n<0)&&(c=n+i);o=Math.round(c*(d.max-d.min)/i)+d.min;return(o>d.max)?d.max:o}};this.change=function(c){d.stopper&&(c=Math.max(Math.min(c,d.max),d.min));this.onChange(c);this.draw(c)};this.angle=function(c){return(c-d.min)*i/(d.max-d.min)};this.draw=function(t){var w=this.angle(t),x=1.5*Math.PI+d.angleOffset,p=x,u=x+this.angle(k),o=p+w,c=d.width/2,q=c*d.thickness,v=a.getCgColor(d.cgColor),s;m.clearRect(0,0,d.width,d.width);m.lineWidth=q;if(d.draw(w,k,d,m)){return}for(s=0;s<d.ticks;s++){m.beginPath();if(w>(((2*Math.PI)/d.ticks)*s)&&d.tickColorizeValues){m.strokeStyle=d.fgColor}else{m.strokeStyle=d.tickColor}var n=(((2*Math.PI)/d.ticks)*s)-(0.5*Math.PI);m.arc(c,c,c-q-d.tickLength,n,n+d.tickWidth,false);m.stroke()}d.cursor&&(x=u-0.3)&&(u=u+0.3)&&(p=o-0.3)&&(o=o+0.3);switch(d.skin){case"default":m.beginPath();m.strokeStyle=d.bgColor;m.arc(c,c,c-q/2,0,i,true);m.stroke();if(d.displayPrevious){m.beginPath();m.strokeStyle=(k==t)?d.fgColor:v;m.arc(c,c,c-q/2,x,u,false);m.stroke()}m.beginPath();m.strokeStyle=d.fgColor;m.arc(c,c,c-q/2,p,o,false);m.stroke();break;case"tron":if(d.displayPrevious){m.beginPath();m.strokeStyle=(k==t)?d.fgColor:v;m.arc(c,c,c-q,x,u,false);m.stroke()}m.beginPath();m.strokeStyle=d.fgColor;m.arc(c,c,c-q,p,o,false);m.stroke();m.lineWidth=2;m.beginPath();m.strokeStyle=d.fgColor;m.arc(c,c,c-q+1+q*2/3,0,2*Math.PI,false);m.stroke();break}};this.capture=function(c){switch(c.type){case"mousemove":case"mousedown":j=c.pageX;h=c.pageY;break;case"touchmove":case"touchstart":j=c.originalEvent.touches[0].pageX;h=c.originalEvent.touches[0].pageY;break}this.change(this.val())};this.cancel=function(){l.val(k);l.onCancel()};this.startDrag=function(n){var c=e.offset(),o=$(document);g=c.left+(d.width/2);f=c.top;this.capture(n);o.bind("mousemove.dial touchmove.dial",function(p){l.capture(p)}).bind("keyup.dial",function(p){if(p.keyCode===27){o.unbind("mouseup.dial mousemove.dial keyup.dial");l.cancel()}}).bind("mouseup.dial touchend.dial",function(p){o.unbind("mousemove.dial touchmove.dial mouseup.dial touchend.dial keyup.dial");l.val(l.val());l.onRelease(k)})}};a.getCgColor=function(d){d=d.substring(1,7);var c=[parseInt(d.substring(0,2),16),parseInt(d.substring(2,4),16),parseInt(d.substring(4,6),16)];return"rgba("+c[0]+","+c[1]+","+c[2]+",.5)"};$.fn.knob=$.fn.dial=function(c){return this.each(function(){var o=$(this),d;if(o.data("dialed")){return o}o.data("dialed",true);d=$.extend({min:o.data("min")||0,max:o.data("max")||100,stopper:true,readOnly:o.data("readonly"),cursor:o.data("cursor"),thickness:o.data("thickness")||0.35,width:o.data("width")||200,displayInput:o.data("displayinput")==null||o.data("displayinput"),displayPrevious:o.data("displayprevious"),fgColor:o.data("fgcolor")||"#87CEEB",cgColor:o.data("cgcolor")||o.data("fgcolor")||"#87CEEB",bgColor:o.data("bgcolor")||"#EEEEEE",tickColor:o.data("tickColor")||o.data("fgcolor")||"#DDDDDD",ticks:o.data("ticks")||0,tickLength:o.data("tickLength")||0,tickWidth:o.data("tickWidth")||0.02,tickColorizeValues:o.data("tickColorizeValues")||true,skin:o.data("skin")||"default",angleOffset:b(o.data("angleoffset")),draw:function(m,r,s,k){},change:function(k){},release:function(k,m){}},c);var n=$('<canvas width="'+d.width+'" height="'+d.width+'"></canvas>'),h=$("<div style=width:"+d.width+'px;display:inline;"></div>'),j,g=o.val(),q=function(){d.displayInput&&o.css({width:d.width+"px",position:"absolute","margin-top":(d.width*5/14)+"px","margin-left":"-"+(d.width*0.98)+"px","font-size":30+"px",border:"none",background:"none","text-align":"center",color:d.fgColor,padding:"0px","-webkit-appearance":"none"})||o.css({width:"0px",visibility:"hidden"})};o.wrap(h).before(n);q();j=new a(n,d);g||(g=d.min);o.val(g);j.val(g);j.onRelease=function(k){d.release(k,o)};j.onChange=function(k){o.val(k);d.change(k)};e=$(this).attr("value");$(this).attr("value",e+"%");o.bind("change",function(k){j.val(o.val())});if(!d.readOnly){n.bind("mousedown touchstart",function(k){k.preventDefault();j.startDrag(k)}).bind("mousewheel DOMMouseScroll",mw=function(s){s.preventDefault();var r=s.originalEvent,m=r.detail||r.wheelDeltaX,k=r.detail||r.wheelDeltaY,t=parseInt(o.val())+(m>0||k>0?1:m<0||k<0?-1:0);j.val(t)});var i,e,p,f=1,l={37:-1,38:1,39:1,40:-1};o.bind("configure",function(r,k){var m;for(m in k){d[m]=k[m]}q();j.val(o.val())}).bind("keydown",function(m){var k=m.keyCode;if(k>=96&&k<=105){k-=48}i=parseInt(String.fromCharCode(k));if(isNaN(i)){(k!==13)&&(k!==8)&&(k!==9)&&(k!==189)&&m.preventDefault();if($.inArray(k,[37,38,39,40])>-1){j.change(parseInt(o.val())+l[k]*f);p=window.setTimeout(function(){f<20&&f++},50);m.preventDefault()}}}).bind("keyup",function(k){if(isNaN(i)){if(p){window.clearTimeout(p);p=null;f=1;j.val(o.val());j.onRelease(o.val(),o)}else{(k.keyCode===13)&&j.onRelease(o.val(),o)}}else{(o.val()>d.max&&o.val(d.max))||(o.val()<d.min&&o.val(d.min))}}).bind("mousewheel DOMMouseScroll",mw)}else{o.attr("readonly","readonly")}}).parent()};function b(c){return $.isNumeric(c)?c*Math.PI/180:0}});