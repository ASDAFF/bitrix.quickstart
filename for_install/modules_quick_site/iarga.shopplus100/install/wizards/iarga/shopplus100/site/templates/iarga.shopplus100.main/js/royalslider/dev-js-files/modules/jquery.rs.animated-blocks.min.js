(function(a){a.extend(a.rsProto,{_initAnimatedBlocks:function(){var b=this,c;b._blockDefaults={fadeEffect:true,moveEffect:"top",moveOffset:20,speed:400,easing:"easeOutSine",delay:200};b.st.block=a.extend({},b._blockDefaults,b.st.block);b._blockAnimProps=[];b._animatedBlockTimeouts=[];b.ev.on("rsAfterInit",function(){d()});b.ev.on("rsBeforeParseNode",function(h,f,g){f=a(f);g.animBlocks=f.find(".rsABlock").css("display","none");if(!g.animBlocks.length){if(f.hasClass("rsABlock")){g.animBlocks=f.css("display","none")}else{g.animBlocks=false}}});b.ev.on("rsAfterContentSet",function(f,g){if(g.id===b.currSlideId){setTimeout(function(){d()},b.st.fadeinLoadedSlide?300:0)}});b.ev.on("rsAfterSlideChange",function(){d()});function d(){var e=b.currSlide;if(!b.currSlide||!b.currSlide.isLoaded){return}if(b._slideWithBlocks!==e){if(b._animatedBlockTimeouts.length>0){for(c=0;c<b._animatedBlockTimeouts.length;c++){clearTimeout(b._animatedBlockTimeouts[c])}b._animatedBlockTimeouts=[]}if(b._blockAnimProps.length>0){var f;for(c=0;c<b._blockAnimProps.length;c++){f=b._blockAnimProps[c];if(f){if(!b._useCSS3Transitions){if(f.running){f.block.stop(true,true)}else{f.block.css(f.css)}}else{f.block.css(b._vendorPref+b._TD,"0s");f.block.css(f.css)}b._slideWithBlocks=null;e.animBlocksDisplayed=false}}b._blockAnimProps=[]}if(e.animBlocks){e.animBlocksDisplayed=true;b._slideWithBlocks=e;b._animateBlocks(e.animBlocks)}}}},_updateAnimBlockProps:function(c,b){setTimeout(function(){c.css(b)},6)},_animateBlocks:function(f){var l=this,s,b,e,m;var g,r,v,d,h,q,j,k,c,t,p,n,u,o;l._animatedBlockTimeouts=[];f.each(function(y){s=a(this);b={};e={};m=null;var i=s.data("move-offset");if(isNaN(i)){i=l.st.block.moveOffset}if(i>0){var A=s.data("move-effect");if(A){A=A.toLowerCase();if(A==="none"){A=false}else{if(A!=="left"&&A!=="top"&&A!=="bottom"&&A!=="right"){A=l.st.block.moveEffect;if(A==="none"){A=false}}}}else{A=l.st.block.moveEffect}if(A){var D;if(A==="right"||A==="left"){D=true}else{D=false}var B,x,z;isOppositeProp=false;if(l._useCSS3Transitions){B=0;x=l._xProp}else{if(D){if(!isNaN(parseInt(s.css("right"),10))){x="right";isOppositeProp=true}else{x="left"}}else{if(!isNaN(parseInt(s.css("bottom"),10))){x="bottom";isOppositeProp=true}else{x="top"}}x="margin-"+x;if(isOppositeProp){i=-i}B=parseInt(s.css(x),10)}if(A==="top"||A==="left"){z=B-i}else{z=B+i}e[x]=l._getCSS3Prop(z,D);b[x]=l._getCSS3Prop(B,D)}}var C=s.attr("data-fade-effect");if(!C){C=l.st.block.fadeEffect}else{if(C.toLowerCase()==="none"||C.toLowerCase()==="false"){C=false}}if(C){e.opacity=0;b.opacity=1}if(C||A){m={};m.hasFade=Boolean(C);if(Boolean(A)){m.moveProp=x;m.hasMove=true}m.speed=s.data("speed");if(isNaN(m.speed)){m.speed=l.st.block.speed}m.easing=s.data("easing");if(!m.easing){m.easing=l.st.block.easing}m.css3Easing=a.rsCSS3Easing[m.easing];m.delay=s.data("delay");if(isNaN(m.delay)){m.delay=l.st.block.delay*y}}var w={};if(l._useCSS3Transitions){w[(l._vendorPref+l._TD)]="0ms"}w.moveProp=b.moveProp;w.opacity=b.opacity;w.display="none";l._blockAnimProps.push({block:s,css:w});l._updateAnimBlockProps(s,e);l._animatedBlockTimeouts.push(setTimeout((function(G,F,H,E){return function(){G.css("display","block");if(H){var I={};if(!l._useCSS3Transitions){setTimeout(function(){G.animate(F,H.speed,H.easing)},16)}else{var J="";if(H.hasMove){J+=H.moveProp}if(H.hasFade){if(H.hasMove){J+=", "}J+="opacity"}I[(l._vendorPref+l._TP)]=J;I[(l._vendorPref+l._TD)]=H.speed+"ms";I[(l._vendorPref+l._TTF)]=H.css3Easing;G.css(I);setTimeout(function(){G.css(F)},24)}}delete l._animatedBlockTimeouts[E]}})(s,b,m,y),m.delay<=6?12:m.delay))})}});a.rsModules.animatedBlocks=a.rsProto._initAnimatedBlocks})(jQuery);