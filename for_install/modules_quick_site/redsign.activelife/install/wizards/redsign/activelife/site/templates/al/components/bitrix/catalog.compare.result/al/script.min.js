BX.namespace("BX.Iblock.Catalog");BX.Iblock.Catalog.CompareClass=(function(){var a=function(b){this.wrapObjId=b;this.setRhythm();BX.data(BX(this.wrapObjId),"cmpRes",this);$(window).on("resize",BX.debounce($.proxy(this.setRhythm,this),250));BX.addCustomEvent(window,"OnCompareChange",BX.proxy(function(c){if(!this.refreshed){this.MakeAjaxAction(window.location.href,c)}},this))};a.prototype.MakeAjaxAction=function(b,d){var c=BX(this.wrapObjId);$(c).rsToggleDark({progress:true,progressTop:"100px"});BX.ajax.post(b,{ajax_action:"Y",ajax_id:this.wrapObjId},BX.proxy(function(e){if(!d){this.refreshed=true;BX.onCustomEvent("OnCompareChange",[true])}$(c).rsToggleDark();c.innerHTML=e;this.setRhythm();delete appSLine.compareList;if($(c).find(".js_element").length>0){$(".js_compare__total").html("("+$(c).find(".js_element").length+")");appSLine.compareList={};$(c).find(".js_element").each(function(){var f=$(this).data("product-id");if(f>0){appSLine.compareList[f]=true}})}else{appSLine.compareList={};$(".js_compare__total").html("(0)")}appSLine.setProductItems();this.refreshed=false},this))};a.prototype.setRhythm=function(){var c=BX(this.wrapObjId),g=BX.findChild(c,{"class":"cmp_page__table"},true),d=BX.findChildren(g,{tag:"tr"},true);rowsName=BX.findChildren(BX.findChild(c,{"class":"cmp_page__names"},true),{tag:"tr"},true);if(!!rowsName&&rowsName.length>0&&!!d&&d.length){var e=-1,f={0:{items:1}};f[appSLine.grid.xs]={items:3};f[appSLine.grid.sm]={items:3};f[appSLine.grid.md]={items:3};f[appSLine.grid.lg]={items:4};for(var b in f){b=Number(b);if(b<=appSLine.pageWidth&&b>e){e=b}}g.style.width=(100*BX.findChildren(d[0],{tag:"td"},true).length/f[e].items)+"%";for(i=0;rowsName.length>i;i++){rowsName[i].style.height=d[i].style.height="auto";if(d[i].offsetHeight>rowsName[i].offsetHeight){rowsName[i].style.height=d[i].offsetHeight+"px"}else{d[i].style.height=rowsName[i].offsetHeight+"px"}}}};return a})();