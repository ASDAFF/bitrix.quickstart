BX.namespace("BX.Sale.PersonalOrderComponent");(function(){BX.Sale.PersonalOrderComponent.PersonalOrderList={init:function(b){var a=document.getElementsByClassName("sale-order-list-inner-row");b.paymentList=b.paymentList||{};b.url=b.url||"";Array.prototype.forEach.call(a,function(d){var c=d.getElementsByClassName("sale-order-list-shipment-id");if(c[0]){Array.prototype.forEach.call(c,function(e){var f=e.parentNode.getElementsByClassName("sale-order-list-shipment-id-icon")[0];if(f){BX.clipboard.bindCopyClick(f,{text:e.innerHTML})}})}BX.bindDelegate(d,"click",{"class":"ajax_reload"},BX.proxy(function(g){var h=d.getElementsByClassName("sale-order-list-inner-row-body")[0];var f=d.getElementsByClassName("sale-order-list-inner-row-template")[0];var e=f.getElementsByClassName("sale-order-list-cancel-payment")[0];BX.ajax({method:"POST",dataType:"html",url:g.target.href,data:{sessid:BX.bitrix_sessid()},onsuccess:BX.proxy(function(i){var j=document.createElement("div");j.innerHTML=i;f.insertBefore(j,e);h.style.display="none";f.style.display="block";BX.bind(e,"click",function(){h.style.display="block";f.style.display="none";j.remove()},this)},this),onfailure:BX.proxy(function(){return this},this)},this);g.preventDefault()},this));BX.bindDelegate(d,"click",{"class":"sale-order-list-change-payment"},BX.proxy(function(g){g.preventDefault();var h=d.getElementsByClassName("sale-order-list-inner-row-body")[0];var f=d.getElementsByClassName("sale-order-list-inner-row-template")[0];var e=f.getElementsByClassName("sale-order-list-cancel-payment")[0];BX.ajax({method:"POST",dataType:"html",url:b.url,data:{sessid:BX.bitrix_sessid(),orderData:b.paymentList[g.target.id]},onsuccess:BX.proxy(function(i){var j=document.createElement("div");j.innerHTML=i;f.insertBefore(j,e);g.target.style.display="none";h.parentNode.removeChild(h);f.style.display="block";BX.bind(e,"click",function(){window.location.reload()},this)},this),onfailure:BX.proxy(function(){return this},this)},this)},this))})}}})();