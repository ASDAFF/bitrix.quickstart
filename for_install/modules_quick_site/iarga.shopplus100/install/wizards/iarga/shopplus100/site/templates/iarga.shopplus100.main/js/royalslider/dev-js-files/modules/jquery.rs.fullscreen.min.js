(function(a){a.extend(a.rsProto,{_initFullscreen:function(){var b=this;b._fullscreenDefaults={enabled:false,keyboardNav:true,buttonFS:true,nativeFS:false,doubleTap:true};b.st.fullscreen=a.extend({},b._fullscreenDefaults,b.st.fullscreen);if(b.st.fullscreen.enabled){b.ev.one("rsBeforeSizeSet",function(){b._setupFullscreen()})}},_setupFullscreen:function(){var b=this;b._fsKeyboard=(!b.st.keyboardNavEnabled&&b.st.fullscreen.keyboardNav);if(b.st.fullscreen.nativeFS){b._fullScreenApi={supportsFullScreen:false,isFullScreen:function(){return false},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""};var d="webkit moz o ms khtml".split(" ");if(typeof document.cancelFullScreen!="undefined"){b._fullScreenApi.supportsFullScreen=true}else{for(var c=0;c<d.length;c++){b._fullScreenApi.prefix=d[c];if(typeof document[b._fullScreenApi.prefix+"CancelFullScreen"]!="undefined"){b._fullScreenApi.supportsFullScreen=true;break}}}if(b._fullScreenApi.supportsFullScreen){b._fullScreenApi.fullScreenEventName=b._fullScreenApi.prefix+"fullscreenchange.rs";b._fullScreenApi.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}};b._fullScreenApi.requestFullScreen=function(e){return(this.prefix==="")?e.requestFullScreen():e[this.prefix+"RequestFullScreen"]()};b._fullScreenApi.cancelFullScreen=function(e){return(this.prefix==="")?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}}else{b._fullScreenApi=false}}if(b.st.fullscreen.buttonFS){b._fsBtn=a('<div class="rsFullscreenBtn"><div class="rsFullscreenIcn"></div></div>').appendTo(b.st.controlsInside?b._sliderOverflow:b.slider).on("click.rs",function(){if(b.isFullscreen){b.exitFullscreen()}else{b.enterFullscreen()}})}},enterFullscreen:function(e){var b=this;if(b._fullScreenApi){if(!e){b._doc.on(b._fullScreenApi.fullScreenEventName,function(g){if(!b._fullScreenApi.isFullScreen()){b.exitFullscreen(true)}else{b.enterFullscreen(true)}});b._fullScreenApi.requestFullScreen(a("html")[0]);return}else{b._fullScreenApi.requestFullScreen(a("html")[0])}}if(b._isFullscreenUpdating){return}b._isFullscreenUpdating=true;b._doc.on("keyup.rsfullscreen",function(g){if(g.keyCode===27){b.exitFullscreen()}});if(b._fsKeyboard){b._bindKeyboardNav()}b._htmlStyle=a("html").attr("style");b._bodyStyle=a("body").attr("style");b._sliderStyle=b.slider.attr("style");a("body, html").css({overflow:"hidden",height:"100%",width:"100%",margin:"0",padding:"0"});b.slider.addClass("rsFullscreen");var d,c;for(c=0;c<b.numSlides;c++){d=b.slides[c];d.isRendered=false;if(d.bigImage){d.isMedLoaded=d.isLoaded;d.isMedLoading=d.isLoading;d.medImage=d.image;d.medIW=d.iW;d.medIH=d.iH;d.slideId=-99;if(d.bigImage!==d.medImage){d.sizeType="big"}d.isLoaded=d.isBigLoaded;d.isLoading=d.isBigLoading;d.image=d.bigImage;d.iW=d.bigIW;d.iH=d.bigIH;d.contentAdded=false;var f=!d.isLoaded?'<a class="rsImg" href="'+d.image+'"></a>':'<img class="rsImg" src="'+d.image+'"/>';if(d.content.hasClass("rsImg")){d.content=a(f)}else{d.content.find(".rsImg").replaceWith(f)}}}b.isFullscreen=true;setTimeout(function(){b._isFullscreenUpdating=false;b.updateSliderSize()},100)},exitFullscreen:function(e){var b=this;if(b._fullScreenApi){if(!e){b._fullScreenApi.cancelFullScreen(a("html")[0]);return}b._doc.off(b._fullScreenApi.fullScreenEventName)}if(b._isFullscreenUpdating){return}b._isFullscreenUpdating=true;b._doc.off("keyup.rsfullscreen");if(b._fsKeyboard){b._doc.off("keydown.rskb")}a("html").attr("style",b._htmlStyle||"");a("body").attr("style",b._bodyStyle||"");b.slider.removeClass("rsFullscreen");var d,c;for(c=0;c<b.numSlides;c++){d=b.slides[c];d.isRendered=false;if(d.bigImage){d.slideId=-99;d.isBigLoaded=d.isLoaded;d.isBigLoading=d.isLoading;d.bigImage=d.image;d.bigIW=d.iW;d.bigIH=d.iH;d.isLoaded=d.isMedLoaded;d.isLoading=d.isMedLoading;d.image=d.medImage;d.iW=d.medIW;d.iH=d.medIH;d.contentAdded=false;var f=!d.isLoaded?'<a class="rsImg" href="'+d.image+'"></a>':'<img class="rsImg" src="'+d.image+'"/>';if(d.content.hasClass("rsImg")){d.content=a(f)}else{d.content.find(".rsImg").replaceWith(f)}if(d.holder){d.holder.html(d.content)}if(d.bigImage!==d.medImage){d.sizeType="med"}}}b.isFullscreen=false;setTimeout(function(){b._isFullscreenUpdating=false;b.updateSliderSize()},100)}});a.rsModules.fullscreen=a.rsProto._initFullscreen})(jQuery);