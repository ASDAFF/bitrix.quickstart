(function(){var a=window.Circles=function(d){var c=d.id;this._el=document.getElementById(c);if(this._el===null){return}this._radius=d.radius;this._percentage=d.percentage;this._text=d.text;this._number=d.number||this._percentage;this._strokeWidth=d.width||10;this._colors=d.colors||["#EEE","#F00"];this._interval=16;this._textWrpClass="circles-text-wrp";this._textClass="circles-text";this._numberClass="circles-number";this._confirmAnimation(d.duration);var b=Math.PI/180*270;this._start=-Math.PI/180*90;this._startPrecise=this._precise(this._start);this._circ=b-this._start;this.generate();if(this._canAnimate){this._animate()}};a.prototype={VERSION:"0.0.4",generate:function(b){if(b){this._radius=b;this._canAnimate=false}this._svgSize=this._radius*2;this._radiusAdjusted=this._radius-(this._strokeWidth/2);this._el.innerHTML=this._wrap(this._generateSvg()+this._generateText())},_confirmAnimation:function(e){if(e===null){this._canAnimate=false;return}e=e||500;var c=e/this._interval,b=this._percentage/c,d=this._number/c;if(this._percentage<=(1+b)){this._canAnimate=false}else{this._canAnimate=true;this._pathFactor=b;this._numberFactor=d}},_animate:function(){var e=1,c=this,h=this._el.getElementsByTagName("path")[1],g=this._getNumberElement(),f=this._number%1===0,d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){setTimeout(i,c._interval)},b=function(){var i=c._pathFactor*e,l=c._pathFactor*(e+1),k=c._numberFactor*e,j=true;if(f){k=Math.round(k)}if(l>c._percentage){i=c._percentage;k=c._number;j=false}if(i>c._percentage){return}h.setAttribute("d",c._calculatePath(i,true));g.innerHTML=c._calculateNumber(k);e++;if(j){d(b)}};d(b)},_getNumberElement:function(){var d=this._el.getElementsByTagName("span");for(var c=0,b=d.length;c<b;c++){if(d[c].className===this._numberClass){return d[c]}}},_wrap:function(b){return'<div class="circles-wrp" style="position:relative; display:inline-block;">'+b+"</div>"},_generateText:function(){var b='<div class="'+this._textWrpClass+'" style="position:absolute; top:0; left:0; text-align:center; width:100%; font-size:'+this._radius*0.7+"px; height:"+this._svgSize+"px; line-height:"+this._svgSize+'px;">'+this._calculateNumber(this._canAnimate?0:this._number);if(this._text){b+='<span class="'+this._textClass+'">'+this._text+"</span>"}b+="</div>";return b},_calculateNumber:function(c){var d=(c+"").split("."),b='<span class="'+this._numberClass+'">'+d[0];if(d.length>1){b+='.<span style="font-size:.4em">'+d[1].substring(0,2)+"</span>"}return b+"</span>"},_generateSvg:function(){return'<svg width="'+this._svgSize+'" height="'+this._svgSize+'">'+this._generatePath(100,false,this._colors[0])+this._generatePath(this._canAnimate?1:this._percentage,true,this._colors[1])+"</svg>"},_generatePath:function(b,d,c){return'<path fill="transparent" stroke="'+c+'" stroke-width="'+this._strokeWidth+'" d="'+this._calculatePath(b,d)+'"/>'},_calculatePath:function(d,e){var c=this._start+((d/100)*this._circ),b=this._precise(c);return this._arc(b,e)},_arc:function(b,c){var e=b-0.001,d=b-this._startPrecise<Math.PI?0:1;return["M",this._radius+this._radiusAdjusted*Math.cos(this._startPrecise),this._radius+this._radiusAdjusted*Math.sin(this._startPrecise),"A",this._radiusAdjusted,this._radiusAdjusted,0,d,1,this._radius+this._radiusAdjusted*Math.cos(e),this._radius+this._radiusAdjusted*Math.sin(e),c?"":"Z"].join(" ")},_precise:function(b){return Math.round(b*1000)/1000}};a.create=function(b){return new a(b)}})();